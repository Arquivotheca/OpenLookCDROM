diff -cr --new-file sspkg2.0//Make.config ss/Make.config
*** sspkg2.0//Make.config	Sun Dec  6 02:50:35 1992
--- ss/Make.config
***************
*** 1,12 ****
- 
- #	@(#) config.svr4 1.7 92/10/27 
- 
- CONFIGPIC		= -Kpic
- CONFIGSHAREDLIBLD	= ld -G -o $@ -h libsspkg.so.1 $? -lm -lc;
- 
- SHAREDLIB		= $(LIBDIR)/libsspkg.so.1
- CONFIGTARGETS		= $(SHAREDLIB)
- 
- SVR4FLAG		= -DSVR4
- NSLLIB			= -lnsl
- 
--- 0 ----
diff -cr --new-file sspkg2.0//Makefile ss/Makefile
*** sspkg2.0//Makefile	Mon Nov 16 20:10:49 1992
--- ss/Makefile	Fri Aug  6 03:46:32 1993
***************
*** 1,9 ****
  
! #	@(#) Makefile 1.19 92/11/16 
  
  SSPKGHOME = 	.
! INSTALL_DIR =	/home2/install
! TARFILE =	/home2/tmp/sspkgs-tar
  
  SRCDIR =	$(SSPKGHOME)/src
  LIBDIR =	$(SSPKGHOME)/lib
--- 1,9 ----
  
! #	@(#) Makefile 1.20 93/03/26 
  
  SSPKGHOME = 	.
! INSTALL_DIR =	/usr/openwin
! TARFILE =	/tmp/sspkgs-tar
  
  SRCDIR =	$(SSPKGHOME)/src
  LIBDIR =	$(SSPKGHOME)/lib
***************
*** 13,19 ****
  
  all: subdirs
  
! subdirs: $(INCLUDEDIR) $(SRCDIR) examples
  
  $(INCLUDEDIR): FORCE
  	cd $@; make
--- 13,19 ----
  
  all: subdirs
  
! subdirs: $(INCLUDEDIR) $(SRCDIR)
  
  $(INCLUDEDIR): FORCE
  	cd $@; make
***************
*** 44,59 ****
  FORCE:
  
  clean:
- 	-sccs clean
  	(cd $(INCLUDEDIR); make clean)
  	(cd $(SRCDIR); make clean)
  	(cd examples; make clean)
  	rm -f Make.config
  
  install: $(INSTALL_DIR) FORCE
  	(cd $(INCLUDEDIR); make install INSTALL_DIR=$(INSTALL_DIR))
  	(cp $(LIBDIR)/* $(INSTALL_DIR)/lib)
! 	(cd $(INSTALL_DIR)/lib; rm -f libsspkg.so; ln -s libsspkg.so.* libsspkg.so)
  
  $(INSTALL_DIR): FORCE
  	-mkdir -p $(INSTALL_DIR)
--- 44,60 ----
  FORCE:
  
  clean:
  	(cd $(INCLUDEDIR); make clean)
  	(cd $(SRCDIR); make clean)
  	(cd examples; make clean)
  	rm -f Make.config
  
+ #	(cd $(INSTALL_DIR)/lib; rm -f libsspkg.so; ln -s libsspkg.so.* libsspkg.so)
+ 
  install: $(INSTALL_DIR) FORCE
  	(cd $(INCLUDEDIR); make install INSTALL_DIR=$(INSTALL_DIR))
  	(cp $(LIBDIR)/* $(INSTALL_DIR)/lib)
! 	-ranlib $(INSTALL_DIR)/lib/libsspkg.a
  
  $(INSTALL_DIR): FORCE
  	-mkdir -p $(INSTALL_DIR)
diff -cr --new-file sspkg2.0//examples/Makefile ss/examples/Makefile
*** sspkg2.0//examples/Makefile	Sun Dec 13 03:28:06 1992
--- ss/examples/Makefile	Sat Sep  4 15:42:23 1993
***************
*** 1,9 ****
   
! #       @(#) Makefile 1.17 92/10/23 
  
  SSPKGHOME	= ..
  
! LIBDIR		= $(OPENWINHOME)/lib
  LIBS		= -lsspkg -lxview -lolgx -lX11
  #SSPKGLIB	= $(SSPKGHOME)/lib/libsspkg.a
  SSINSTALLDIR	= $(OPENWINHOME)/examples
--- 1,10 ----
   
! #       @(#) Makefile 1.19 93/04/06 
  
  SSPKGHOME	= ..
+ OPENWINHOME	= /usr/openwin
  
! LIBDIR		= $(OPENWINHOME)/lib -L/usr/X386/lib
  LIBS		= -lsspkg -lxview -lolgx -lX11
  #SSPKGLIB	= $(SSPKGHOME)/lib/libsspkg.a
  SSINSTALLDIR	= $(OPENWINHOME)/examples
***************
*** 15,65 ****
  
  all: icons array_tile clockobj dnd drawarea drawline grip \
  	icons misc selection tree \
  	drawtext drawimage tacho
! #	drawtext drawimage tacho dnd2
  
  array_tile: FORCE
! 	cd $@; make
  
  clockobj: FORCE
! 	cd $@; make
  
  dnd: FORCE
! 	cd $@; make
  
  dnd2: FORCE
! 	cd $@; make
  
  drawarea: FORCE
! 	cd $@; make
  
  drawline: FORCE
! 	cd $@; make
  
  grip: FORCE
! 	cd $@; make
  
  icons: FORCE
! 	cd $@; make
  
  misc: FORCE
! 	cd $@; make
  
  selection: FORCE
! 	cd $@; make
  
  tree: FORCE
! 	cd $@; make
  
  drawtext: FORCE
! 	cd $@; make
  
  drawimage: FORCE
! 	cd $@; make
  
  tacho: FORCE
! 	cd $@; make
  
  clean:
  	-(cd array_tile; make clean)
  	-(cd clockobj; make clean)
--- 16,74 ----
  
  all: icons array_tile clockobj dnd drawarea drawline grip \
  	icons misc selection tree \
+ 	drawtext drawimage tacho \
+ 	color thermo \
  	drawtext drawimage tacho
! #	dnd2
  
  array_tile: FORCE
! 	cd $@; make LIBDIR="$(LIBDIR)"
  
  clockobj: FORCE
! 	cd $@; make LIBDIR="$(LIBDIR)"
  
  dnd: FORCE
! 	cd $@; make LIBDIR="$(LIBDIR)"
  
  dnd2: FORCE
! 	cd $@; make LIBDIR="$(LIBDIR)"
  
  drawarea: FORCE
! 	cd $@; make LIBDIR="$(LIBDIR)"
  
  drawline: FORCE
! 	cd $@; make LIBDIR="$(LIBDIR)"
  
  grip: FORCE
! 	cd $@; make LIBDIR="$(LIBDIR)"
  
  icons: FORCE
! 	cd $@; make LIBDIR="$(LIBDIR)"
  
  misc: FORCE
! 	cd $@; make LIBDIR="$(LIBDIR)"
  
  selection: FORCE
! 	cd $@; make LIBDIR="$(LIBDIR)"
  
  tree: FORCE
! 	cd $@; make LIBDIR="$(LIBDIR)"
  
  drawtext: FORCE
! 	cd $@; make LIBDIR="$(LIBDIR)"
  
  drawimage: FORCE
! 	cd $@; make LIBDIR="$(LIBDIR)"
  
  tacho: FORCE
! 	cd $@; make LIBDIR="$(LIBDIR)"
  
+ color: FORCE
+ 	cd $@; make LIBDIR="$(LIBDIR)"
+ 
+ thermo: FORCE
+ 	cd $@; make LIBDIR="$(LIBDIR)"
+ 
  clean:
  	-(cd array_tile; make clean)
  	-(cd clockobj; make clean)
***************
*** 75,81 ****
  	-(cd drawtext; make clean)
  	-(cd drawimage; make clean)
  	-(cd tacho; make clean)
! 	-sccs clean
  
  FORCE:
  
--- 84,91 ----
  	-(cd drawtext; make clean)
  	-(cd drawimage; make clean)
  	-(cd tacho; make clean)
! 	-(cd color; make clean)
! 	-(cd thermo; make clean)
  
  FORCE:
  
***************
*** 94,97 ****
--- 104,109 ----
  	-(cd drawtext; make SSINSTALLDIR=$(SSINSTALLDIR) install)
  	-(cd drawimage; make SSINSTALLDIR=$(SSINSTALLDIR) install)
  	-(cd tacho; make SSINSTALLDIR=$(SSINSTALLDIR) install)
+ 	-(cd color; make SSINSTALLDIR=$(SSINSTALLDIR) install)
+ 	-(cd thermo; make SSINSTALLDIR=$(SSINSTALLDIR) install)
  
diff -cr --new-file sspkg2.0//examples/array_tile/Makefile ss/examples/array_tile/Makefile
*** sspkg2.0//examples/array_tile/Makefile	Sun Dec 13 02:06:38 1992
--- ss/examples/array_tile/Makefile	Fri Aug  6 03:49:01 1993
***************
*** 3,9 ****
  
  SSPKGHOME	= ../..
  
- LIBDIR		= $(OPENWINHOME)/lib
  LIBS		= -lsspkg -lxview -lolgx -lX11
  #SSPKGLIB	= $(SSPKGHOME)/lib/libsspkg.a
  #SSPKGLIB	= /usr/src/libsspkg/ss/libsspkg.a
--- 3,8 ----
***************
*** 20,26 ****
  	cc -o $@ array_ex.o $(LDFLAGS)
  
  clean:
- 	-sccs clean
  	rm -f *.o array_ex
  
  install:
--- 19,24 ----
diff -cr --new-file sspkg2.0//examples/clockobj/Makefile ss/examples/clockobj/Makefile
*** sspkg2.0//examples/clockobj/Makefile	Sun Dec 13 02:19:10 1992
--- ss/examples/clockobj/Makefile	Fri Aug  6 03:48:45 1993
***************
*** 3,9 ****
  
  SSPKGHOME	= ../..
  
- LIBDIR		= $(OPENWINHOME)/lib
  LIBS		= -lsspkg -lxview -lolgx -lX11
  #SSPKGLIB	= $(SSPKGHOME)/lib/libsspkg.a
  
--- 3,8 ----
***************
*** 19,25 ****
  	cc -o $@ clockobj.o $(LDFLAGS)
  
  clean:
- 	-sccs clean
  	rm -f *.o clockobj
  
  install:
--- 18,23 ----
diff -cr --new-file sspkg2.0//examples/color/Makefile ss/examples/color/Makefile
*** sspkg2.0//examples/color/Makefile
--- ss/examples/color/Makefile	Sat Sep  4 15:43:38 1993
***************
*** 0 ****
--- 1,25 ----
+  
+ #        @(#) Makefile 1.2 93/04/06 
+ 
+ SSPKGHOME	= ../..
+ 
+ LIBDIR		= $(OPENWINHOME)/lib
+ LIBS		= -lsspkg -lxview -lolgx -lX11
+ 
+ .KEEP_STATE:
+ 
+ DBXFLAGS	=  -O 
+ CFLAGS		= $(DBXFLAGS) -I$(SSPKGHOME)/include -I$(OPENWINHOME)/include 
+ LDFLAGS		= -L$(LIBDIR) $(LIBS) $(SSPKGLIB) -lm
+ 
+ all: choose dndchoose
+ 
+ choose: choose.o
+ 	cc -o $@ choose.o $(LDFLAGS)
+ 
+ dndchoose: dndchoose.o
+ 	cc -o $@ dndchoose.o $(LDFLAGS)
+ 
+ clean:
+ 	rm -f *.o dndchoose
+ 
diff -cr --new-file sspkg2.0//examples/color/choose.c ss/examples/color/choose.c
*** sspkg2.0//examples/color/choose.c
--- ss/examples/color/choose.c	Thu May  6 21:06:45 1993
***************
*** 0 ****
--- 1,170 ----
+ /*
+  *	(c) Copyright 1991 Sun Microsystems, Inc.  All rights reserved.
+  *	See LEGAL_NOTICE file for terms of the license.
+  *
+  *	@(#) choose.c 1.6 93/04/06 
+  *
+  *	This program demonstrates uses of the drawrect and color.
+  */
+ 
+ #include <xview/frame.h>
+ #include <xview/cms.h>
+ #include <sspkg/canshell.h> 
+ #include <sspkg/array.h> 
+ #include <sspkg/drawobj.h> 
+ 
+ 
+ Frame create_color_chooser();
+ void single_click_callback();
+ 
+ main(argc, argv)
+ 	int	argc;
+ 	char	*argv[];
+ {
+ 	Cms		cms;
+ 	Frame           frame;
+ 
+ 	xv_init(XV_INIT_ARGC_PTR_ARGV, &argc, argv, NULL);
+  
+ 	cms = (Cms) xv_create(XV_NULL, CMS,
+ 			CMS_CONTROL_CMS, TRUE,
+ 			CMS_SIZE, CMS_CONTROL_COLORS + 32,
+ 			CMS_NAMED_COLORS, 
+ 					"MintCream", 
+ 					"moccasin",
+ 					"IndianRed",
+ 					"tomato",
+ 					"HotPink",
+ 					"navy",
+ 					"MistyRose",
+ 					"plum",
+ 					"firebrick",
+ 					"gold1",
+ 					"turquoise",
+ 					"CadetBlue",
+ 					"MediumAquamarine",
+ 					"aquamarine",
+ 					"SeaGreen",
+ 					"MediumSeaGreen",
+ 					"SpringGreen",
+ 					"LawnGreen",
+ 					"MediumSpringGreen",
+ 					"LimeGreen",
+ 					"DarkKhaki",
+ 					"khaki",
+ 					"PaleGoldenrod",
+ 					"LightGoldenrodYellow",
+ 					"yellow",
+ 					"gold",
+ 					"peru",
+ 					"firebrick",
+ 					"salmon",
+ 					"seashell1", 
+ 					"blue", 
+ 					"black", 
+ 					0,
+ 			NULL);
+ 
+ 	frame = create_color_chooser(cms, 8, 4, single_click_callback);
+ 	xv_main_loop(frame); 
+ } 
+ 
+ 
+ void
+ single_click_callback(pw, e, cs, r, state)
+ 	Xv_window pw;
+ 	Event	*e;
+ 	Canvas_shell cs;
+ 	Rectobj	r;
+ 	int	state;
+ {
+ 	printf("Clicked on color #%d\n", xv_get(r, RECTOBJ_BG));
+ }
+ 
+ 
+ /*
+  * This function is written so that you can mostly cut and paste
+  * it into your application.
+  */
+ Frame
+ create_color_chooser(cms, columns, rows, callback_fn)
+ 	Cms cms;
+ 	int columns, rows;
+ 	Proc_ptr callback_fn;
+ {
+ 	Frame           frame;
+ 	Canvas_shell	shell;
+ 	Array_tile	array_tile;
+ 	int		i;
+ 	Rectobj_ops	*rectobj_ops;
+ 	static Drawrect	proto_drawrect;
+ 
+ 	frame = (Frame) xv_create(XV_NULL, FRAME_CMD,
+ 				  FRAME_SHOW_RESIZE_CORNER, FALSE,
+ 				  FRAME_LABEL, "Color Chooser",
+ 				  NULL);
+ 
+ 	xv_destroy(xv_get(frame, FRAME_CMD_PANEL));
+ 
+ 	shell = (Canvas_shell) xv_create(frame, CANVAS_SHELL,
+ 					 WIN_CMS, cms,
+ 					 NULL);
+ 
+ 	array_tile = (Array_tile) xv_create(shell, ARRAY_TILE,
+ 				ARRAY_TILE_N_ROWS, rows,
+ 				ARRAY_TILE_N_COLUMNS, columns,
+ 				ARRAY_TILE_COLUMN_GAP, 2,
+ 				ARRAY_TILE_ROW_GAP, 2,
+ 				ARRAY_TILE_ROW_HEIGHT, 1,
+ 				ARRAY_TILE_COLUMN_WIDTH, 1,
+ 				/*
+ 				 * There is no need for rubber band style
+ 				 * selection, so setting the event proc to
+ 				 * NULL prevents it because the array_tile 
+ 				 * covers all of the space of the canvas
+ 				 * shell.
+ 				 */
+ 				RECTOBJ_EVENT_PROC, NULL,
+ 				NULL);
+ 
+ 	if(proto_drawrect == XV_NULL) {
+ 		/* 
+ 		 * Create a DRAWRECT and set up the callbacks:
+ 		 * The advantage is mostly performance, especially
+ 		 * when creating lots of objects.
+ 		 */
+ 		proto_drawrect = (Drawrect) xv_create(XV_NULL, DRAWRECT,
+ 			RECTOBJ_SINGLE_CLICK_PROC, callback_fn,
+ 			RECTOBJ_EVENT_PROC, rectobj_button_event_proc,
+ 			NULL);
+ 	}
+ 	rectobj_ops = (Rectobj_ops*) xv_get(proto_drawrect, RECTOBJ_OPS);
+ 
+ 	i = (xv_get(cms, CMS_CONTROL_CMS) ? CMS_CONTROL_COLORS : 0);
+ 
+ 	while (i < xv_get(cms, CMS_SIZE)) {
+ 		xv_create(array_tile, DRAWRECT,
+ 			RECTOBJ_OPS, rectobj_ops,
+ 			XV_WIDTH, 20,
+ 			XV_HEIGHT, 20,
+ 			DRAWRECT_BORDER2, 2,
+ 			DRAWOBJ_FILLED, TRUE,
+ 			RECTOBJ_BG2, i,
+ 			RECTOBJ_BG, i,
+ 			NULL);
+ 
+ 		i++;
+ 	}
+ 
+ 	xv_set(shell,
+ 		/* +2 is for frame's border */
+ 		XV_WIDTH, xv_get(array_tile, XV_WIDTH) + 2,
+ 		XV_HEIGHT, xv_get(array_tile, XV_HEIGHT) + 2,
+ 		NULL);
+ 
+ 	window_fit(frame);
+ 
+ 	return (frame);
+ }
+ 
+ 
diff -cr --new-file sspkg2.0//examples/color/dndchoose.c ss/examples/color/dndchoose.c
*** sspkg2.0//examples/color/dndchoose.c
--- ss/examples/color/dndchoose.c	Thu May  6 21:06:45 1993
***************
*** 0 ****
--- 1,444 ----
+ /*
+  *	(c) Copyright 1991 Sun Microsystems, Inc.  All rights reserved.
+  *	See LEGAL_NOTICE file for terms of the license.
+  *
+  *	@(#) dndchoose.c 1.11 93/04/19 
+  *
+  *	This program demonstrates further uses of dnd and color.
+  *	You can drag colors from the array of colored objects
+  *	and drop them in the drop "bullseye" target.  
+  *	Both the drop site and the draggable objects are in this one 
+  *	executable, but could have been seperate processes.  For
+  *	example, you can select the name of a color (e.g. "orange") in a
+  *	cmdtool and drag it into the bullseye.  You can also drag the
+  *	color into a cmdtool or textedit window.
+  */
+ 
+ #include <xview/frame.h>
+ #include <xview/cms.h>
+ #include <xview/cursor.h>
+ #include <xview/svrimage.h>
+ #include <xview/dragdrop.h>
+ #include <sspkg/canshell.h> 
+ #include <sspkg/array.h> 
+ #include <sspkg/drawobj.h> 
+ 
+ 
+ Frame create_color_chooser();
+ void single_click_callback();
+ 
+ #define COLOR_NAME_FROM_OBJECT(_object_) (colors[xv_get(_object_, RECTOBJ_BG)])
+ 
+ static char * colors[] = {
+ 			/* using a control cms, so these will be ignored */
+ 			"color0", "color1", "color2", "color3",
+ 
+ 			"#000000", "#000000", "#4c4c4c", "#666666",
+ 			"#999999", "#b2b2b2", "#cccccc", "#ffffff",
+ 			"#bf9898", "#bf7272", "#bf4c4c", "#bf2626",
+ 			"#e5b7b7", "#e58989", "#e55b5b", "#e52d2d",
+ 			"#bfb498", "#bfaa72", "#bf9e4c", "#bf9426",
+ 			"#e5d8b7", "#e5cb89", "#e5be5b", "#e5b12d",
+ 			"#bdbf98", "#bbbf72", "#b9bf4c", "#b7bf26",
+ 			"#e3e5b7", "#e0e589", "#dee55b", "#dce52d",
+ 			"#98bfa2", "#72bf86", "#4cbf69", "#26bf4c",
+ 			"#b7e5c2", "#89e5a0", "#5be57e", "#2de55b",
+ 			"#98bfbf", "#72bfbf", "#4cbfbf", "#26bfbf",
+ 			"#b7e5e5", "#89e5e5", "#5be5e5", "#2de5e5",
+ 			"#98a2bf", "#7286bf", "#4c69bf", "#264cbf",
+ 			"#b7c2e5", "#89a0e5", "#5b7ee5", "#2d5be5",
+ 			"#b298bf", "#a572bf", "#984cbf", "#8c26bf",
+ 			"#d5b7e5", "#c689e5", "#b75be5", "#a72de5",
+ 			"#bf98b6", "#bf72ac", "#bf4ca2", "#bf2698",
+ 			"#e5b7da", "#e589ce", "#e55bc2", "#e52db7",
+ 	};
+ 
+ main(argc, argv)
+ 	int	argc;
+ 	char	*argv[];
+ {
+ 	Frame           frame;
+ 	Cms		cms;
+ 
+ 	xv_init(XV_INIT_ARGC_PTR_ARGV, &argc, argv, NULL);
+  
+ 	cms = (Cms) xv_create(XV_NULL, CMS,
+ 			CMS_CONTROL_CMS, TRUE,
+ 			CMS_SIZE, CMS_CONTROL_COLORS + 72,
+ 			CMS_NAMED_COLORS,
+ 				colors[4], colors[5], colors[6], colors[7],
+ 				colors[8], colors[9], colors[10], colors[11],
+ 				colors[12], colors[13], colors[14], colors[15],
+ 				colors[16], colors[17], colors[18], colors[19],
+ 				colors[20], colors[21], colors[22], colors[23],
+ 				colors[24], colors[25], colors[26], colors[27],
+ 				colors[28], colors[29], colors[30], colors[31],
+ 				colors[32], colors[33], colors[34], colors[35],
+ 				colors[36], colors[37], colors[38], colors[39],
+ 				colors[40], colors[41], colors[42], colors[43],
+ 				colors[44], colors[45], colors[46], colors[47],
+ 				colors[48], colors[49], colors[50], colors[51],
+ 				colors[52], colors[53], colors[54], colors[55],
+ 				colors[56], colors[57], colors[58], colors[59],
+ 				colors[60], colors[61], colors[62], colors[63],
+ 				colors[64], colors[65], colors[66], colors[67],
+ 				colors[68], colors[69], colors[70], colors[71],
+ 				colors[72], colors[73], colors[74], colors[75],
+ 				NULL,
+ 			NULL);
+ 
+ 	frame = create_color_chooser(cms, 8, 9, single_click_callback);
+ 
+ 	create_target();
+ 
+ 	xv_main_loop(frame); 
+ } 
+ 
+ /* drop site code */
+ 
+ Cms		dropsite_cms;
+ 
+ #define DROPSITE_BG	"PeachPuff1"
+ 
+ void
+ set_dropsite_color(colorname)
+ 	char *colorname;
+ {
+ 	xv_set(dropsite_cms,
+ 		CMS_NAMED_COLORS, DROPSITE_BG, colorname, NULL,
+ 		NULL);
+ }
+ 
+ void
+ drop_callback_fn(paint_window, event, shell, drawtext)
+         Xv_window       paint_window;
+         Event           *event;
+         Canvas_shell    shell;
+         Drawtext        drawtext;
+ {
+ 	Selection_requestor sel_req;
+ 
+ 	switch (event_action(event)) {
+ 	case ACTION_DRAG_PREVIEW:
+ 		if(event_id(event) == LOC_WINENTER) {
+ 			/* show something */
+ 		} else
+ 		if(event_id(event) == LOC_WINEXIT) {
+ 			/* hide it */
+ 		} else
+ 		if(event_id(event) == LOC_DRAG) {
+ 			/* ignore */
+ 		}
+ 		return;
+ 
+ 	case ACTION_DRAG_COPY:
+ 	case ACTION_DRAG_MOVE:
+ 	case ACTION_DRAG_LOAD:{
+ 			int             length, format;
+ 			char           *string;
+ 			char            str[60];
+ 
+ 			sel_req = xv_create(shell, SELECTION_REQUESTOR, NULL);
+ 
+ 			if (dnd_decode_drop(sel_req, event) == XV_ERROR)
+ 				break;
+ 
+ 			xv_set(sel_req,
+ 			       SEL_TYPE, XA_STRING,
+ 			       NULL);
+ 
+ 			string = (char *) xv_get(sel_req,
+ 						 SEL_DATA, &length, &format);
+ 
+ 			if (length != SEL_ERROR) {
+ 				set_dropsite_color(string);
+ 				free(string);
+ 			}
+ 
+ 			if (event_action(event) == ACTION_DRAG_MOVE) {
+ 				int             length, format;
+ 
+ 				xv_set(sel_req, SEL_TYPE_NAME, "DELETE", 0);
+ 				(void) xv_get(sel_req,
+ 					      SEL_DATA, &length, &format);
+ 			}
+ 
+ 			dnd_done(sel_req);
+ 		}
+ 		break;
+ 	}
+ 	xv_destroy(sel_req);
+ }
+ 
+ 
+ create_target()
+ {
+ 	Frame           frame2;
+ 	Drawarea        dropsite_drawarea;
+ 	Canvas_shell    dropsite_shell;
+ 
+ 	frame2 = (Frame) xv_create(XV_NULL, FRAME_CMD,
+ 			XV_WIDTH, 300,
+ 			XV_HEIGHT, 60,
+ 			FRAME_SHOW_RESIZE_CORNER, FALSE,
+ 			FRAME_LABEL, "Drop here...",
+ 			XV_SHOW, TRUE,
+ 			NULL);
+ 
+ 	xv_destroy(xv_get(frame2, FRAME_CMD_PANEL));
+ 
+ 	dropsite_shell = (Canvas_shell) xv_create(frame2, CANVAS_SHELL,
+ 			CANVAS_SHELL_AUTO_DROP_SITE, TRUE,
+ 			NULL);
+ 
+ 	dropsite_drawarea = (Drawarea) xv_create(dropsite_shell, DRAWAREA,
+ 			RECTOBJ_ACCEPTS_DROP, TRUE,
+ 			RECTOBJ_DROP_PROC, drop_callback_fn,
+ 			XV_WIDTH, 298,
+ 			XV_HEIGHT, 58,
+ 			NULL);
+ 
+ 	dropsite_cms = (Cms) xv_create(XV_NULL, CMS,
+ 		CMS_TYPE, XV_DYNAMIC_CMS,
+ 		CMS_SIZE, 2,
+ 		CMS_NAMED_COLORS, DROPSITE_BG, "BlanchedAlmond", NULL,
+ 		NULL);
+ 
+ 	set_dropsite_color("BlanchedAlmond");
+ 
+ 	xv_set(dropsite_shell,
+ 		WIN_CMS, dropsite_cms,
+ 		NULL);
+ 
+ 	VSetColor(dropsite_drawarea, 1);
+ 	VFillArc(dropsite_drawarea, 500, 500, 9000, 9000, 0, 360 * 64);
+ 	VSetColor(dropsite_drawarea, 0);
+ 	VFillArc(dropsite_drawarea, 1000, 1000, 8000, 8000, 0, 360 * 64);
+ 
+ 	VSetColor(dropsite_drawarea, 1);
+ 	VFillArc(dropsite_drawarea, 2000, 2000, 6000, 6000, 0, 360 * 64);
+ 	VSetColor(dropsite_drawarea, 0);
+ 	VFillArc(dropsite_drawarea, 2600, 2600, 4900, 4900, 0, 360 * 64);
+ 
+ 	VSetColor(dropsite_drawarea, 1);
+ 	VFillArc(dropsite_drawarea, 3500, 3500, 3000, 3000, 0, 360 * 64);
+ }
+ 
+ 
+ 
+ void
+ single_click_callback(pw, e, cs, r, state)
+ 	Xv_window pw;
+ 	Event	*e;
+ 	Canvas_shell cs;
+ 	Rectobj	r;
+ 	int	state;
+ {
+ 	set_dropsite_color(COLOR_NAME_FROM_OBJECT(r));
+ }
+ 
+ 
+ /* drag code */
+ 
+ static Dnd      drag_dnd;
+ static Selection_item drag_sel_item;
+ Xv_Cursor cursor1, cursor2;
+ 
+ static unsigned short drag_cursor1_bits[] = {
+ #include "../icons/paintbrush.icon"
+ };
+ 
+ static unsigned short drag_cursor2_bits[] = {
+ #include "../icons/nopaintbrush.icon"
+ };
+ 
+ 
+ Xv_Cursor
+ create_cursor(bits)
+ 	unsigned short bits[];
+ {
+ 	Xv_Cursor cursor;
+ 
+ 	cursor = (Xv_Cursor) xv_create(XV_NULL, CURSOR,
+ 		CURSOR_IMAGE, xv_create(XV_NULL, SERVER_IMAGE,
+ 				SERVER_IMAGE_BITS, bits,
+ 				SERVER_IMAGE_DEPTH, 1,
+ 				XV_WIDTH, 16,
+ 				XV_HEIGHT, 16,
+ 				NULL),
+ 		CURSOR_OP, 	PIX_SRC^PIX_DST,
+ 		NULL);
+ 	
+ 	return cursor;
+ }
+ 
+ Xv_singlecolor *
+ cursor_color(shell, rectobj)
+ 	Canvas_shell shell;
+ 	Rectobj rectobj;
+ {
+ 	/*
+ 	 * This goes through the hoops to get to the color info.
+ 	 * You could probably get this information with CMS_COLORS
+ 	 * attribute.  But that winds up doing a XQueryColors call
+ 	 * so this actually performs better.
+ 	 */
+ 	static Xv_singlecolor xvsc;
+ 	XColor xc;
+ 	Cms cms;
+ 
+ 	cms = (Cms) xv_get(shell, WIN_CMS);
+ 
+ 	xc.pixel = (unsigned long) xv_get(cms, 
+ 			CMS_PIXEL, xv_get(rectobj, RECTOBJ_BG));
+ 	XQueryColor(
+ 		(Display *) xv_get(shell, XV_DISPLAY),
+ 		(Colormap) xv_get(cms, XV_XID),
+ 		&xc);
+ 
+ 	xvsc.red = xc.red;
+ 	xvsc.blue = xc.blue;
+ 	xvsc.green = xc.green;
+ 
+ 	return &xvsc;
+ }
+ 
+ 
+ void
+ drag_start(paint_window, event, canvas_shell, rectobj, x, y, adjust)
+ 	Xv_window       paint_window;
+ 	Event          *event;
+ 	Canvas_shell    canvas_shell;
+ 	Rectobj         rectobj;
+ 	int             x, y, adjust;
+ {
+ 	Xv_singlecolor xvsc;
+ 
+ 	if(cursor1 == NULL) {
+ 		cursor1 = create_cursor(drag_cursor1_bits);
+ 		cursor2 = create_cursor(drag_cursor2_bits);
+ 	}
+ 
+ 	xv_set(cursor1,
+ 		CURSOR_BACKGROUND_COLOR, cursor_color(canvas_shell, rectobj),
+ 		NULL);
+ 
+ 	xv_set(cursor2,
+ 		CURSOR_BACKGROUND_COLOR, cursor_color(canvas_shell, rectobj),
+ 		NULL);
+ 
+ 	xv_set(drag_dnd,
+ 		DND_ACCEPT_CURSOR, cursor1,
+ 		DND_CURSOR, cursor2,
+ 		NULL);
+ 
+ 	xv_set(drag_sel_item,
+ 	       SEL_TYPE, (Atom) XA_STRING,
+ 	       SEL_DATA, (Xv_opaque) COLOR_NAME_FROM_OBJECT(rectobj),
+ 	       0);
+ 
+ 	switch (dnd_send_drop(drag_dnd)) {
+ 		/* ... */
+ 		case XV_OK:
+ 		case DND_ABORTED:
+ 		case DND_TIMEOUT:
+ 		case DND_ROOT:
+ 		case DND_ILLEGAL_TARGET:
+ 		case DND_SELECTION:
+ 		case XV_ERROR:
+ 			/* reset the object, because that looks nicer. */
+ 			xv_set(rectobj, RECTOBJ_NORMAL, NULL);
+ 			break;
+ 	}
+ 
+ }
+ 
+ 
+ Frame
+ create_color_chooser(cms, columns, rows, callback_fn)
+ 	Cms cms;
+ 	int columns, rows;
+ 	Proc_ptr callback_fn;
+ {
+ 	Frame           frame;
+ 	Canvas_shell	shell;
+ 	Array_tile	array_tile;
+ 	int		i;
+ 	Rectobj_ops	*rectobj_ops;
+ 	static Drawrect	proto_drawrect;
+ 
+ 	frame = (Frame) xv_create(XV_NULL, FRAME_CMD,
+ 				  FRAME_SHOW_RESIZE_CORNER, FALSE,
+ 				  FRAME_LABEL, "Drag these...",
+ 				  NULL);
+ 
+ 	xv_destroy(xv_get(frame, FRAME_CMD_PANEL));
+ 
+ 	shell = (Canvas_shell) xv_create(frame, CANVAS_SHELL,
+ 					 WIN_CMS, cms,
+ 					 NULL);
+ 
+ 	array_tile = (Array_tile) xv_create(shell, ARRAY_TILE,
+ 				ARRAY_TILE_N_ROWS, rows,
+ 				ARRAY_TILE_N_COLUMNS, columns,
+ 				ARRAY_TILE_COLUMN_GAP, 2,
+ 				ARRAY_TILE_ROW_GAP, 2,
+ 				ARRAY_TILE_ROW_HEIGHT, 1,
+ 				ARRAY_TILE_COLUMN_WIDTH, 1,
+ 				/*
+ 				 * There is no need for rubber band style
+ 				 * selection, so setting the event proc to
+ 				 * NULL prevents it because the array_tile 
+ 				 * covers all of the space of the canvas
+ 				 * shell.
+ 				 */
+ 				RECTOBJ_EVENT_PROC, NULL,
+ 				NULL);
+ 
+ 	if(proto_drawrect == XV_NULL) {
+ 		/* 
+ 		 * Create a DRAWRECT and set up the callbacks:
+ 		 * The advantage is mostly performance, especially
+ 		 * when creating lots of objects.
+ 		 */
+ 		proto_drawrect = (Drawrect) xv_create(XV_NULL, DRAWRECT,
+ 			RECTOBJ_SINGLE_CLICK_PROC, callback_fn,
+ 			RECTOBJ_EVENT_PROC, rectobj_selection_event_proc,
+ 			RECTOBJ_START_DRAG_PROC, drag_start,
+ 			NULL);
+ 	}
+ 	rectobj_ops = (Rectobj_ops*) xv_get(proto_drawrect, RECTOBJ_OPS);
+ 
+ 	i = (xv_get(cms, CMS_CONTROL_CMS) ? CMS_CONTROL_COLORS : 0);
+ 
+ 	while (i < xv_get(cms, CMS_SIZE)) {
+ 		xv_create(array_tile, DRAWRECT,
+ 			RECTOBJ_OPS, rectobj_ops,
+ 			RECTOBJ_DRAGGABLE, TRUE,
+ 			XV_WIDTH, 20,
+ 			XV_HEIGHT, 20,
+ 			DRAWRECT_BORDER2, 2,
+ 			DRAWOBJ_FILLED, TRUE,
+ 			RECTOBJ_BG2, i,
+ 			RECTOBJ_BG, i,
+ 			NULL);
+ 
+ 		i++;
+ 	}
+ 
+ 	drag_dnd = xv_create(canvas_paint_window(shell), DRAGDROP,
+ 		DND_TYPE, DND_COPY,
+ 		NULL);
+  
+ 	drag_sel_item = xv_create(drag_dnd, SELECTION_ITEM, NULL);
+  
+ 	xv_set(shell,
+ 		XV_WIDTH, xv_get(array_tile, XV_WIDTH) + 2,
+ 		XV_HEIGHT, xv_get(array_tile, XV_HEIGHT) + 2,
+ 		NULL);
+ 
+ 	window_fit(frame);
+ 
+ 	return (frame);
+ }
+ 
diff -cr --new-file sspkg2.0//examples/dnd/Makefile ss/examples/dnd/Makefile
*** sspkg2.0//examples/dnd/Makefile	Sun Dec 13 02:19:26 1992
--- ss/examples/dnd/Makefile	Fri Aug  6 03:47:47 1993
***************
*** 3,9 ****
  
  SSPKGHOME	= ../..
  
- LIBDIR		= $(OPENWINHOME)/lib
  LIBS		= -lsspkg -lxview -lolgx -lX11
  #SSPKGLIB	= $(SSPKGHOME)/lib/libsspkg.a
  
--- 3,8 ----
***************
*** 21,27 ****
  drag_ex: drag_ex.o
  	cc -o $@ drag_ex.o $(LDFLAGS)
  clean:
- 	-sccs clean
  	rm -f *.o drop_ex drag_ex
  
  install:
--- 20,25 ----
diff -cr --new-file sspkg2.0//examples/dnd2/Makefile ss/examples/dnd2/Makefile
*** sspkg2.0//examples/dnd2/Makefile	Sun Dec 13 00:13:18 1992
--- ss/examples/dnd2/Makefile	Fri Aug  6 03:50:41 1993
***************
*** 3,9 ****
  
  SSPKGHOME	= ../..
  
- LIBDIR		= $(OPENWINHOME)/lib
  LIBS		= -lsspkg -lxview -lolgx -lX11
  #SSPKGLIB	= $(SSPKGHOME)/lib/libsspkg.a
  
--- 3,8 ----
***************
*** 27,32 ****
  	$(CC) $(CFLAGS) $(SVR4FLAG) -c icon_dnd.c -o $@
  
  clean:
- 	-sccs clean
  	rm -f *.o icon_dnd
  
--- 26,30 ----
diff -cr --new-file sspkg2.0//examples/drawarea/Makefile ss/examples/drawarea/Makefile
*** sspkg2.0//examples/drawarea/Makefile	Sun Dec 13 02:19:54 1992
--- ss/examples/drawarea/Makefile	Fri Aug  6 03:48:37 1993
***************
*** 3,9 ****
  
  SSPKGHOME	= ../..
  
- LIBDIR		= $(OPENWINHOME)/lib
  LIBS		= -lsspkg -lxview -lolgx -lX11
  #SSPKGLIB	= $(SSPKGHOME)/lib/libsspkg.a
  
--- 3,8 ----
***************
*** 31,37 ****
  	cc -o $@ custom.o $(LDFLAGS)
  
  clean:
- 	-sccs clean
  	rm -f *.o darea1 darea2 hist hist_stdin custom
  
  install:
--- 30,35 ----
diff -cr --new-file sspkg2.0//examples/drawimage/Makefile ss/examples/drawimage/Makefile
*** sspkg2.0//examples/drawimage/Makefile	Sun Dec 13 02:20:07 1992
--- ss/examples/drawimage/Makefile	Fri Aug  6 03:50:56 1993
***************
*** 3,9 ****
  
  SSPKGHOME	= ../..
  
- LIBDIR		= $(OPENWINHOME)/lib
  LIBS		= -lsspkg -lxview -lolgx -lX11
  #SSPKGLIB	= $(SSPKGHOME)/lib/libsspkg.a
  
--- 3,8 ----
***************
*** 18,24 ****
  	cc -o $@ drawimage.o $(LDFLAGS)
  
  clean:
- 	-sccs clean
  	rm -f *.o drawimage
  
  install:
--- 17,22 ----
diff -cr --new-file sspkg2.0//examples/drawline/Makefile ss/examples/drawline/Makefile
*** sspkg2.0//examples/drawline/Makefile	Sun Dec 13 02:21:23 1992
--- ss/examples/drawline/Makefile	Fri Aug  6 03:48:50 1993
***************
*** 3,9 ****
  
  SSPKGHOME	= ../..
  
- LIBDIR		= $(OPENWINHOME)/lib
  LIBS		= -lsspkg -lxview -lolgx -lX11
  #SSPKGLIB	= $(SSPKGHOME)/lib/libsspkg.a
  
--- 3,8 ----
***************
*** 19,25 ****
  	cc -o $@ drawline.o $(LDFLAGS)
  
  clean:
- 	-sccs clean
  	rm -f *.o drawline
  
  install:
--- 18,23 ----
diff -cr --new-file sspkg2.0//examples/drawtext/Makefile ss/examples/drawtext/Makefile
*** sspkg2.0//examples/drawtext/Makefile	Sun Dec 13 02:21:40 1992
--- ss/examples/drawtext/Makefile	Fri Sep  3 22:59:30 1993
***************
*** 3,14 ****
  
  SSPKGHOME	= ../..
  
! LIBDIR		= $(OPENWINHOME)/lib
! LIBS		= -lsspkg -lxview -lolgx -lX11
  #SSPKGLIB	= $(SSPKGHOME)/lib/libsspkg.a
  
  
! DBXFLAGS	=  -O 
  CFLAGS		= $(DBXFLAGS) -I$(SSPKGHOME)/include -I$(OPENWINHOME)/include 
  LDFLAGS		= $(SSPKGLIB) -L$(LIBDIR) $(LIBS) $(SSPKGLIB) -lm
  
--- 3,15 ----
  
  SSPKGHOME	= ../..
  
! LIBS		= -lxview -lolgx -lX11
! #LIBS		= -lsspkg -lxview -lolgx -lX11
  #SSPKGLIB	= $(SSPKGHOME)/lib/libsspkg.a
+ SSPKGLIB	= ./libsspkg.a
  
  
! DBXFLAGS	=  -g 
  CFLAGS		= $(DBXFLAGS) -I$(SSPKGHOME)/include -I$(OPENWINHOME)/include 
  LDFLAGS		= $(SSPKGLIB) -L$(LIBDIR) $(LIBS) $(SSPKGLIB) -lm
  
***************
*** 18,24 ****
  	cc -o $@ drawtext.o $(LDFLAGS)
  
  clean:
- 	-sccs clean
  	rm -f *.o drawtext
  
  install:
--- 19,24 ----
diff -cr --new-file sspkg2.0//examples/drawtext/drawtext.c ss/examples/drawtext/drawtext.c
*** sspkg2.0//examples/drawtext/drawtext.c	Fri Nov 13 04:40:52 1992
--- ss/examples/drawtext/drawtext.c	Sat Mar 20 21:58:43 1993
***************
*** 2,8 ****
   *	(c) Copyright 1991 Sun Microsystems, Inc.  All rights reserved.
   *	See LEGAL_NOTICE file for terms of the license.
   *
!  *	@(#) drawtext.c 1.6 92/07/07 
   */
  
  #include <xview/frame.h>
--- 2,8 ----
   *	(c) Copyright 1991 Sun Microsystems, Inc.  All rights reserved.
   *	See LEGAL_NOTICE file for terms of the license.
   *
!  *	@(#) drawtext.c 1.7 92/12/09 
   */
  
  #include <xview/frame.h>
***************
*** 27,33 ****
  Frame		frame;
  Canvas_shell	shell;
  Drawtext	drawtext;
! Panel_item	width_slider, height_slider;
  
  main(argc, argv)
  	int	argc;
--- 27,33 ----
  Frame		frame;
  Canvas_shell	shell;
  Drawtext	drawtext;
! Panel_item	string_item, width_slider, height_slider;
  
  main(argc, argv)
  	int	argc;
***************
*** 37,42 ****
--- 37,43 ----
  	Panel_item	ptext;
  	Xv_Font		startup_font;
  	Drawrect	drawrect;
+ 	void		drawtext_string_has_changed();
  
  	xv_init(XV_INIT_ARGC_PTR_ARGV, &argc, argv, NULL);
   
***************
*** 48,54 ****
  			PANEL_LAYOUT, PANEL_VERTICAL,
  			NULL);
  
! 	(void) xv_create(panel, PANEL_TEXT,
  			PANEL_LABEL_STRING, "DRAWTEXT_STRING:",
  			PANEL_VALUE, STARTUP_STRING,
  			PANEL_VALUE_DISPLAY_LENGTH, 50,
--- 49,55 ----
  			PANEL_LAYOUT, PANEL_VERTICAL,
  			NULL);
  
! 	string_item = xv_create(panel, PANEL_TEXT,
  			PANEL_LABEL_STRING, "DRAWTEXT_STRING:",
  			PANEL_VALUE, STARTUP_STRING,
  			PANEL_VALUE_DISPLAY_LENGTH, 50,
***************
*** 128,133 ****
--- 129,135 ----
  	drawtext = (Drawtext) xv_create(drawrect, DRAWTEXT,
  			DRAWTEXT_STRING, STARTUP_STRING,
  			DRAWTEXT_FONT, startup_font,
+ 			DRAWTEXT_NOTIFY_PROC, drawtext_string_has_changed,
  			NULL);
  
  	window_fit(shell);
***************
*** 142,147 ****
--- 144,157 ----
  } 
   
  
+ void
+ drawtext_string_has_changed(drawtext)
+ 	Drawtext drawtext;
+ {
+ 	xv_set(string_item, 
+ 		PANEL_VALUE, xv_get(drawtext, DRAWTEXT_STRING),
+ 		NULL);
+ }
  
  Panel_setting
  text_change_proc(item, event)
diff -cr --new-file sspkg2.0//examples/grip/Makefile ss/examples/grip/Makefile
*** sspkg2.0//examples/grip/Makefile	Sun Dec 13 02:21:59 1992
--- ss/examples/grip/Makefile	Fri Aug  6 03:48:56 1993
***************
*** 3,9 ****
  
  SSPKGHOME	= ../..
  
- LIBDIR		= $(OPENWINHOME)/lib
  LIBS		= -lsspkg -lxview -lolgx -lX11
  #SSPKGLIB	= $(SSPKGHOME)/lib/libsspkg.a
  
--- 3,8 ----
***************
*** 27,33 ****
  	cc -o $@ temp_grip.o $(LDFLAGS)
  
  clean:
- 	-sccs clean
  	rm -f *.o puzzdemo gripdemo nonlin temp_grip
  
  install:
--- 26,31 ----
diff -cr --new-file sspkg2.0//examples/grip/gripdemo.c ss/examples/grip/gripdemo.c
*** sspkg2.0//examples/grip/gripdemo.c	Fri Nov 13 04:38:54 1992
--- ss/examples/grip/gripdemo.c	Sat Mar 20 22:01:44 1993
***************
*** 2,8 ****
   *	(c) Copyright 1991 Sun Microsystems, Inc.  All rights reserved.
   *	See LEGAL_NOTICE file for terms of the license.
   *
!  *	@(#) gripdemo.c 1.2 92/06/24 
   */
  
  #include <X11/Xlib.h>
--- 2,8 ----
   *	(c) Copyright 1991 Sun Microsystems, Inc.  All rights reserved.
   *	See LEGAL_NOTICE file for terms of the license.
   *
!  *	@(#) gripdemo.c 1.3 93/03/16 
   */
  
  #include <X11/Xlib.h>
***************
*** 42,47 ****
--- 42,48 ----
  		"GRIP_RUBBER_HLINE", 		GRIP_RUBBER_HLINE,
  		"GRIP_RUBBER_HLINE_PAIR",	GRIP_RUBBER_HLINE_PAIR,
  		"GRIP_RUBBER_CROSSHAIRS",	GRIP_RUBBER_CROSSHAIRS,
+ 		"GRIP_RUBBER_LINE",		GRIP_RUBBER_LINE,
  	};
  
  	xv_init(XV_INIT_ARGC_PTR_ARGV, &argc, argv, NULL);
diff -cr --new-file sspkg2.0//examples/grip/temp_grip.c ss/examples/grip/temp_grip.c
*** sspkg2.0//examples/grip/temp_grip.c	Fri Nov 13 04:39:43 1992
--- ss/examples/grip/temp_grip.c	Thu Apr  1 22:21:46 1993
***************
*** 2,8 ****
   *	(c) Copyright 1991 Sun Microsystems, Inc.  All rights reserved.
   *	See LEGAL_NOTICE file for terms of the license.
   *
!  * 	@(#) temp_grip.c 1.4 92/11/12 
   */
  #include <xview/xview.h>
  #include <sspkg/canshell.h>
--- 2,8 ----
   *	(c) Copyright 1991 Sun Microsystems, Inc.  All rights reserved.
   *	See LEGAL_NOTICE file for terms of the license.
   *
!  * 	@(#) temp_grip.c 1.5 93/03/26 
   */
  #include <xview/xview.h>
  #include <sspkg/canshell.h>
***************
*** 101,106 ****
--- 101,107 ----
  		DRAWTEXT_EDITABLE, TRUE,
  		DRAWTEXT_LENGTH, 8,
  		DRAWTEXT_JUSTIFY, DRAWTEXT_JUSTIFY_CENTER,
+ 		DRAWICON_LAYOUT_CENTER, TRUE,
  		RECTOBJ_START_DRAG_PROC, start_drag_proc,
  		NULL);
  
***************
*** 113,118 ****
--- 114,120 ----
  		DRAWTEXT_EDITABLE, TRUE,
  		DRAWTEXT_LENGTH, 8,
  		DRAWTEXT_JUSTIFY, DRAWTEXT_JUSTIFY_CENTER,
+ 		DRAWICON_LAYOUT_CENTER, TRUE,
  		RECTOBJ_START_DRAG_PROC, start_drag_proc,
  		NULL);
  
diff -cr --new-file sspkg2.0//examples/icons/Makefile ss/examples/icons/Makefile
*** sspkg2.0//examples/icons/Makefile	Fri Nov 13 04:36:52 1992
--- ss/examples/icons/Makefile	Fri Aug  6 03:48:24 1993
***************
*** 3,15 ****
  
  SSPKGHOME	= ../..
  
- LIBDIR		= $(OPENWINHOME)/lib
  LIBS		= -lxview -lolgx -lX11
  SSPKGLIB	= $(SSPKGHOME)/lib/libsspkg.a
  
  .KEEP_STATE:
  
! DBXFLAGS	=  -g 
  CFLAGS		= $(DBXFLAGS) -I$(SSPKGHOME)/include -I$(OPENWINHOME)/include 
  LDFLAGS		= -L$(LIBDIR) $(LIBS) $(SSPKGLIB) -lm
  
--- 3,14 ----
  
  SSPKGHOME	= ../..
  
  LIBS		= -lxview -lolgx -lX11
  SSPKGLIB	= $(SSPKGHOME)/lib/libsspkg.a
  
  .KEEP_STATE:
  
! DBXFLAGS	=  -O 
  CFLAGS		= $(DBXFLAGS) -I$(SSPKGHOME)/include -I$(OPENWINHOME)/include 
  LDFLAGS		= -L$(LIBDIR) $(LIBS) $(SSPKGLIB) -lm
  
***************
*** 22,26 ****
  #	sccs get $@
  
  clean:
- 	-sccs clean
  
--- 21,24 ----
diff -cr --new-file sspkg2.0//examples/icons/bananamask.ico ss/examples/icons/bananamask.ico
*** sspkg2.0//examples/icons/bananamask.ico	Fri Nov 13 04:36:53 1992
--- ss/examples/icons/bananamask.ico
***************
*** 1,7 ****
- /* Format_version=1, Width=32, Height=20, Depth=1, Valid_bits_per_item=16
-  */
- 	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0xc000,0x0000,
- 	0xe000,0x0000,0xf000,0x0000,0xf800,0x0000,0x7c00,0x0000,
- 	0x7f00,0x0000,0x3f80,0x0001,0x3fc0,0x0007,0x1ff0,0x001f,
- 	0x0ffe,0x007f,0x07ff,0xfffe,0x03ff,0xfffc,0x01ff,0xfff8,
- 	0x00ff,0xfff8,0x003f,0xffe0,0x001f,0xffc0,0x0003,0xfe00
--- 0 ----
diff -cr --new-file sspkg2.0//examples/icons/bananamask.icon ss/examples/icons/bananamask.icon
*** sspkg2.0//examples/icons/bananamask.icon
--- ss/examples/icons/bananamask.icon	Fri Nov 13 04:36:53 1992
***************
*** 0 ****
--- 1,7 ----
+ /* Format_version=1, Width=32, Height=20, Depth=1, Valid_bits_per_item=16
+  */
+ 	0x0000,0x0000,0x0000,0x0000,0x0000,0x0000,0xc000,0x0000,
+ 	0xe000,0x0000,0xf000,0x0000,0xf800,0x0000,0x7c00,0x0000,
+ 	0x7f00,0x0000,0x3f80,0x0001,0x3fc0,0x0007,0x1ff0,0x001f,
+ 	0x0ffe,0x007f,0x07ff,0xfffe,0x03ff,0xfffc,0x01ff,0xfff8,
+ 	0x00ff,0xfff8,0x003f,0xffe0,0x001f,0xffc0,0x0003,0xfe00
diff -cr --new-file sspkg2.0//examples/icons/nopaintbrush.icon ss/examples/icons/nopaintbrush.icon
*** sspkg2.0//examples/icons/nopaintbrush.icon
--- ss/examples/icons/nopaintbrush.icon	Thu May  6 21:06:44 1993
***************
*** 0 ****
--- 1,18 ----
+ /* Format_version=1, Width=16, Height=16, Depth=1, Valid_bits_per_item=16
+  */
+ 	0x3FF0,
+ 	0x3550,
+ 	0x2AB0,
+ 	0x3550,
+ 	0x2AB0,
+ 	0x3550,
+ 	0x2AB0,
+ 	0x3550,
+ 	0x3EF0,
+ 	0x0580,
+ 	0x0680,
+ 	0x0580,
+ 	0x0680,
+ 	0x0580,
+ 	0x0680,
+ 	0x0780,
diff -cr --new-file sspkg2.0//examples/icons/paintbrush.icon ss/examples/icons/paintbrush.icon
*** sspkg2.0//examples/icons/paintbrush.icon
--- ss/examples/icons/paintbrush.icon	Thu May  6 21:06:44 1993
***************
*** 0 ****
--- 1,18 ----
+ /* Format_version=1, Width=16, Height=16, Depth=1, Valid_bits_per_item=16
+  */
+ 	0xFFC0,
+ 	0xC060,
+ 	0x6030,
+ 	0x3550,
+ 	0x2AB0,
+ 	0x3550,
+ 	0x2AB0,
+ 	0x3550,
+ 	0x3EE0,
+ 	0x0580,
+ 	0x0680,
+ 	0x0580,
+ 	0x0680,
+ 	0x0580,
+ 	0x0680,
+ 	0x0700,
diff -cr --new-file sspkg2.0//examples/icons/puzzle_demo.ic ss/examples/icons/puzzle_demo.ic
*** sspkg2.0//examples/icons/puzzle_demo.ic	Fri Nov 13 04:36:59 1992
--- ss/examples/icons/puzzle_demo.ic
***************
*** 1,320 ****
- 	0x0404, 0x0404, 0x0101, 0x0303, 0x0101, 0x0b0b, 0x0b0b, 0x0b0b, 
- 	0x0b0b, 0x0103, 0x0303, 0x0303, 0x0104, 0x0404, 0x0404, 0x0404, 
- 	0x0103, 0x0303, 0x010b, 0x0b0b, 0x0103, 0x0303, 0x0104, 0x0404, 
- 	0x0202, 0x0202, 0x0101, 0x0101, 0x0104, 0x0404, 0x0404, 0x0404, 
- 	
- 	0x0404, 0x0404, 0x0404, 0x0101, 0x0303, 0x0101, 0x0b0b, 0x0b0b, 
- 	0x0b0b, 0x0b01, 0x0303, 0x0303, 0x0104, 0x0404, 0x0404, 0x0404, 
- 	0x0401, 0x0303, 0x0301, 0x010b, 0x0103, 0x0303, 0x0301, 0x0202, 
- 	0x0101, 0x0101, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
- 	
- 	0x0404, 0x0404, 0x0404, 0x0404, 0x0103, 0x0303, 0x0101, 0x0b0b, 
- 	0x0b0b, 0x0b01, 0x0303, 0x0303, 0x0301, 0x0404, 0x0404, 0x0404, 
- 	0x0404, 0x0101, 0x0303, 0x0301, 0x0103, 0x0303, 0x0301, 0x0101, 
- 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
- 	
- 	0x0404, 0x0404, 0x0404, 0x0404, 0x0401, 0x0103, 0x0303, 0x0101, 
- 	0x0b0b, 0x0b0b, 0x0103, 0x0303, 0x0303, 0x0104, 0x0404, 0x0404, 
- 	0x0404, 0x0402, 0x0103, 0x0303, 0x0303, 0x0303, 0x0301, 0x0404, 
- 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
- 	
- 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0401, 0x0103, 0x0303, 
- 	0x0101, 0x0b0b, 0x0b01, 0x0303, 0x0303, 0x0301, 0x0404, 0x0402, 
- 	0x0202, 0x0201, 0x0101, 0x0303, 0x0303, 0x0303, 0x0301, 0x0404, 
- 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
- 	
- 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0401, 0x0103, 
- 	0x0303, 0x0101, 0x0b0b, 0x0103, 0x0303, 0x0303, 0x0102, 0x0201, 
- 	0x0101, 0x0104, 0x0404, 0x0103, 0x0303, 0x0303, 0x0303, 0x0104, 
- 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
- 	
- 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0401, 
- 	0x0103, 0x0303, 0x0101, 0x0103, 0x0303, 0x0303, 0x0101, 0x0104, 
- 	0x0404, 0x0404, 0x0404, 0x0401, 0x0303, 0x0303, 0x0303, 0x0104, 
- 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
- 	
- 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
- 	0x0401, 0x0103, 0x0303, 0x0303, 0x0303, 0x0303, 0x0301, 0x0101, 
- 	0x0104, 0x0101, 0x0101, 0x0404, 0x0103, 0x0303, 0x0303, 0x0104, 
- 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
- 	
- 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
- 	0x0404, 0x0201, 0x0103, 0x0303, 0x0303, 0x0303, 0x0303, 0x0103, 
- 	0x0301, 0x0103, 0x0303, 0x0101, 0x0103, 0x0303, 0x0303, 0x0104, 
- 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
- 	
- 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0202, 
- 	0x0202, 0x0101, 0x0101, 0x0103, 0x0303, 0x0101, 0x0101, 0x0101, 
- 	0x0303, 0x0301, 0x0103, 0x0301, 0x0101, 0x0303, 0x0303, 0x0104, 
- 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
- 	
- 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0202, 0x0202, 0x0101, 
- 	0x0101, 0x0404, 0x0404, 0x0401, 0x0101, 0x0303, 0x0303, 0x0303, 
- 	0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 0x0104, 
- 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
- 	
- 	0x0404, 0x0404, 0x0404, 0x0202, 0x0202, 0x0101, 0x0101, 0x0404, 
- 	0x0404, 0x0404, 0x0404, 0x0401, 0x0303, 0x0303, 0x0303, 0x0303, 
- 	0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 0x0301, 
- 	0x0104, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
- 	
- 	0x0404, 0x0202, 0x0202, 0x0101, 0x0101, 0x0404, 0x0404, 0x0404, 
- 	0x0404, 0x0404, 0x0404, 0x0103, 0x0303, 0x0303, 0x0303, 0x0303, 
- 	0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 
- 	0x0301, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
- 	
- 	0x0202, 0x0101, 0x0101, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
- 	0x0404, 0x0404, 0x0401, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 
- 	0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 
- 	0x0303, 0x0104, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
- 	
- 	0x0101, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
- 	0x0404, 0x0404, 0x0103, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 
- 	0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 
- 	0x0303, 0x0301, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
- 	
- 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
- 	0x0404, 0x0401, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 
- 	0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 
- 	0x0303, 0x0301, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
- 	
- 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
- 	0x0404, 0x0103, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 
- 	0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 
- 	0x0303, 0x0303, 0x0104, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
- 	
- 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
- 	0x0404, 0x0103, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 
- 	0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 0x0301, 0x0103, 0x0303, 
- 	0x0303, 0x0303, 0x0104, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
- 	
- 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
- 	0x0401, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 
- 	0x0303, 0x0303, 0x0303, 0x0303, 0x0101, 0x0103, 0x0301, 0x0303, 
- 	0x0303, 0x0303, 0x0301, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
- 	
- 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
- 	0x0101, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 
- 	0x0303, 0x0303, 0x0303, 0x0301, 0x0303, 0x0303, 0x0303, 0x0103, 
- 	0x0303, 0x0303, 0x0301, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
- 	
- 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
- 	0x0103, 0x0103, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 
- 	0x0303, 0x0303, 0x0301, 0x0103, 0x0303, 0x0303, 0x0303, 0x0301, 
- 	0x0303, 0x0303, 0x0301, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
- 	
- 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0401, 
- 	0x0303, 0x0301, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 
- 	0x0303, 0x0303, 0x0103, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 
- 	0x0303, 0x0303, 0x0301, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
- 	
- 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0401, 
- 	0x0303, 0x0301, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 
- 	0x0303, 0x0301, 0x0303, 0x0303, 0x0103, 0x0303, 0x0303, 0x0303, 
- 	0x0303, 0x0303, 0x0303, 0x0104, 0x0404, 0x0404, 0x0404, 0x0404, 
- 	
- 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0101, 
- 	0x0303, 0x0303, 0x0103, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 
- 	0x0303, 0x0301, 0x0303, 0x0301, 0x0303, 0x0303, 0x0303, 0x0303, 
- 	0x0303, 0x0303, 0x0303, 0x0104, 0x0404, 0x0404, 0x0404, 0x0404, 
- 	
- 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0101, 
- 	0x0303, 0x0303, 0x0103, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 
- 	0x0303, 0x0103, 0x0303, 0x0101, 0x0303, 0x0303, 0x0303, 0x0303, 
- 	0x0303, 0x0303, 0x0303, 0x0104, 0x0404, 0x0404, 0x0404, 0x0404, 
- 	
- 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0108, 
- 	0x0103, 0x0303, 0x0103, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 
- 	0x0303, 0x0103, 0x0301, 0x0d08, 0x0103, 0x0303, 0x0303, 0x0303, 
- 	0x0303, 0x0303, 0x0303, 0x0301, 0x0404, 0x0404, 0x0404, 0x0404, 
- 	
- 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0108, 
- 	0x0801, 0x0303, 0x0301, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 
- 	0x0301, 0x0303, 0x010d, 0x0808, 0x0801, 0x0303, 0x0303, 0x0303, 
- 	0x0303, 0x0303, 0x0303, 0x0301, 0x0404, 0x0404, 0x0404, 0x0404, 
- 	
- 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0108, 
- 	0x0808, 0x0103, 0x0301, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 
- 	0x0301, 0x0303, 0x0108, 0x0808, 0x080d, 0x0103, 0x0303, 0x0303, 
- 	0x0303, 0x0303, 0x0303, 0x0303, 0x0104, 0x0404, 0x0404, 0x0404, 
- 	
- 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x010d, 
- 	0x0808, 0x0801, 0x0303, 0x0103, 0x0303, 0x0303, 0x0303, 0x0303, 
- 	0x0303, 0x0301, 0x0d08, 0x0808, 0x0808, 0x0103, 0x0303, 0x0303, 
- 	0x0303, 0x0303, 0x0303, 0x0303, 0x0104, 0x0404, 0x0404, 0x0404, 
- 	
- 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0401, 0x0301, 
- 	0x0808, 0x080d, 0x0103, 0x0103, 0x0303, 0x0303, 0x0303, 0x0303, 
- 	0x0303, 0x0301, 0x0808, 0x0808, 0x0808, 0x0d01, 0x0303, 0x0303, 
- 	0x0303, 0x0303, 0x0303, 0x0303, 0x0301, 0x0404, 0x0404, 0x0404, 
- 	
- 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0401, 0x0301, 
- 	0x0808, 0x0808, 0x0103, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 
- 	0x0303, 0x0108, 0x0808, 0x0808, 0x0808, 0x0801, 0x0303, 0x0303, 
- 	0x0303, 0x0303, 0x0303, 0x0303, 0x0301, 0x0404, 0x0404, 0x0404, 
- 	
- 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0401, 0x0301, 
- 	0x0d08, 0x0808, 0x0801, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 
- 	0x0301, 0x0d08, 0x0808, 0x0808, 0x0808, 0x0801, 0x0303, 0x0303, 
- 	0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 0x0101, 0x0101, 0x0101, 
- 	
- 	0x0404, 0x0404, 0x040e, 0x0e0e, 0x0404, 0x0404, 0x0401, 0x0303, 
- 	0x0108, 0x0808, 0x080d, 0x0103, 0x0303, 0x0303, 0x0303, 0x0303, 
- 	0x0301, 0x0808, 0x0808, 0x0808, 0x0808, 0x0801, 0x0303, 0x0303, 
- 	0x0303, 0x0303, 0x0303, 0x0303, 0x0301, 0x010d, 0x0808, 0x0808, 
- 	
- 	0x0e0e, 0x0e0e, 0x0e04, 0x0404, 0x0404, 0x0404, 0x0401, 0x0303, 
- 	0x010d, 0x0808, 0x0808, 0x0103, 0x0303, 0x0301, 0x0303, 0x0303, 
- 	0x010d, 0x0808, 0x0808, 0x0808, 0x0808, 0x0801, 0x0303, 0x0303, 
- 	0x0303, 0x0303, 0x0303, 0x0303, 0x010d, 0x0808, 0x0808, 0x0808, 
- 	
- 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0103, 0x0303, 
- 	0x0301, 0x0808, 0x0808, 0x0d01, 0x0303, 0x0103, 0x0303, 0x0303, 
- 	0x0108, 0x0808, 0x0808, 0x0808, 0x0808, 0x0801, 0x0303, 0x0303, 
- 	0x0303, 0x0303, 0x0303, 0x0101, 0x0808, 0x0808, 0x0808, 0x0808, 
- 	
- 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0103, 0x0303, 
- 	0x0301, 0x0d08, 0x0808, 0x0801, 0x0303, 0x0103, 0x0303, 0x0301, 
- 	0x0d08, 0x0808, 0x0808, 0x0808, 0x0808, 0x0d01, 0x0303, 0x0303, 
- 	0x0303, 0x0303, 0x0101, 0x0d08, 0x0808, 0x0808, 0x0808, 0x0808, 
- 	
- 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0103, 0x0303, 
- 	0x0303, 0x0101, 0x010d, 0x080d, 0x0103, 0x0103, 0x0303, 0x0301, 
- 	0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0103, 0x0303, 0x0303, 
- 	0x0303, 0x0101, 0x0d08, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 
- 	
- 	0x0101, 0x0101, 0x0404, 0x0404, 0x0404, 0x0404, 0x0101, 0x0303, 
- 	0x0303, 0x0101, 0x0101, 0x0808, 0x0103, 0x0301, 0x0303, 0x0101, 
- 	0x010d, 0x0808, 0x0808, 0x0808, 0x0808, 0x0103, 0x0303, 0x0303, 
- 	0x0101, 0x0d08, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 
- 	
- 	0x0404, 0x0404, 0x0101, 0x0101, 0x0101, 0x0101, 0x0808, 0x0101, 
- 	0x0103, 0x0301, 0x0101, 0x080d, 0x0103, 0x0301, 0x0303, 0x0101, 
- 	0x0101, 0x0808, 0x0808, 0x0808, 0x0808, 0x0103, 0x0303, 0x0101, 
- 	0x0d08, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0101, 
- 	
- 	0x0404, 0x0404, 0x0404, 0x0101, 0x0808, 0x0808, 0x0101, 0x0108, 
- 	0x0801, 0x0101, 0x0101, 0x0801, 0x0101, 0x0101, 0x0101, 0x0101, 
- 	0x0101, 0x0808, 0x0808, 0x0808, 0x080d, 0x0101, 0x0101, 0x0d08, 
- 	0x0808, 0x0808, 0x0808, 0x0101, 0x0101, 0x0101, 0x0101, 0x0808, 
- 	
- 	0x0404, 0x0404, 0x0401, 0x0808, 0x0808, 0x0808, 0x0808, 0x0801, 
- 	0x0108, 0x0808, 0x0801, 0x010b, 0x0b0b, 0x0b0b, 0x0b01, 0x0101, 
- 	0x0101, 0x0808, 0x0808, 0x0801, 0x0101, 0x010d, 0x0808, 0x0808, 
- 	0x0801, 0x0101, 0x0101, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 
- 	
- 	0x0101, 0x0101, 0x0101, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 
- 	0x0801, 0x0101, 0x0808, 0x0801, 0x0b0b, 0x0b0b, 0x0b01, 0x0808, 
- 	0x0101, 0x0101, 0x0101, 0x010d, 0x0808, 0x0808, 0x0101, 0x0101, 
- 	0x0108, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 
- 	
- 	0x0404, 0x0401, 0x0808, 0x0101, 0x0101, 0x0101, 0x0101, 0x0808, 
- 	0x0808, 0x0808, 0x0101, 0x0808, 0x010b, 0x0b01, 0x0101, 0x0101, 
- 	0x0808, 0x0808, 0x0808, 0x0808, 0x0101, 0x0101, 0x0808, 0x0808, 
- 	0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 
- 	
- 	0x0404, 0x0401, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0101, 
- 	0x0101, 0x0808, 0x0808, 0x0801, 0x0101, 0x0108, 0x0808, 0x0808, 
- 	0x0808, 0x0801, 0x0101, 0x0101, 0x0808, 0x0808, 0x0808, 0x0808, 
- 	0x0808, 0x0808, 0x0101, 0x0101, 0x0101, 0x0101, 0x0101, 0x0101, 
- 	
- 	0x0404, 0x0101, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 
- 	0x0101, 0x0101, 0x0101, 0x0108, 0x0808, 0x0808, 0x0808, 0x0808, 
- 	0x0101, 0x0101, 0x0808, 0x0808, 0x0808, 0x0101, 0x0101, 0x0101, 
- 	0x0101, 0x0101, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 
- 	
- 	0x0404, 0x0101, 0x0101, 0x0101, 0x0101, 0x0101, 0x0101, 0x0108, 
- 	0x0808, 0x0808, 0x0808, 0x0108, 0x0808, 0x0808, 0x0808, 0x0808, 
- 	0x0808, 0x0801, 0x0101, 0x0101, 0x0101, 0x0d08, 0x0808, 0x0808, 
- 	0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 
- 	
- 	0x0101, 0x0101, 0x0808, 0x0808, 0x0808, 0x0808, 0x0801, 0x0101, 
- 	0x0101, 0x0101, 0x0108, 0x0108, 0x0808, 0x0801, 0x0808, 0x0808, 
- 	0x0801, 0x0101, 0x0101, 0x0101, 0x0101, 0x0101, 0x0101, 0x010d, 
- 	0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 
- 	
- 	0x0404, 0x0108, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 
- 	0x0808, 0x0808, 0x0808, 0x0801, 0x0101, 0x0101, 0x0108, 0x0808, 
- 	0x0801, 0x0101, 0x0909, 0x0909, 0x0901, 0x0101, 0x0101, 0x0101, 
- 	0x0101, 0x0101, 0x0101, 0x0101, 0x0101, 0x0101, 0x0101, 0x0101, 
- 	
- 	0x0404, 0x0108, 0x0108, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 
- 	0x0808, 0x0808, 0x0808, 0x0801, 0x0808, 0x0801, 0x0801, 0x0101, 
- 	0x0108, 0x0109, 0x0909, 0x0909, 0x0909, 0x0909, 0x0901, 0x0808, 
- 	0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 
- 	
- 	0x0404, 0x0108, 0x0108, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 
- 	0x0808, 0x0808, 0x0808, 0x0801, 0x0808, 0x0801, 0x0808, 0x0808, 
- 	0x0808, 0x0109, 0x0909, 0x0909, 0x0909, 0x0909, 0x0108, 0x0808, 
- 	0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 
- 	
- 	0x0404, 0x0401, 0x0108, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 
- 	0x0808, 0x0808, 0x0808, 0x0801, 0x0808, 0x0801, 0x0808, 0x0808, 
- 	0x0808, 0x0109, 0x0901, 0x0101, 0x0109, 0x0909, 0x0108, 0x0808, 
- 	0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 
- 	
- 	0x0404, 0x0401, 0x0401, 0x0801, 0x0808, 0x0808, 0x0808, 0x0808, 
- 	0x0808, 0x0808, 0x0808, 0x0808, 0x0108, 0x080d, 0x0108, 0x0808, 
- 	0x0808, 0x0109, 0x0106, 0x0606, 0x0601, 0x0101, 0x0808, 0x0808, 
- 	0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 
- 	
- 	0x0404, 0x0404, 0x0401, 0x0801, 0x0108, 0x0808, 0x0808, 0x0808, 
- 	0x0808, 0x0808, 0x0808, 0x0808, 0x0108, 0x0808, 0x0108, 0x0808, 
- 	0x0808, 0x0101, 0x0606, 0x0606, 0x0606, 0x0108, 0x0808, 0x0808, 
- 	0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0101, 
- 	
- 	0x0404, 0x0404, 0x0404, 0x0101, 0x0401, 0x0808, 0x0808, 0x0808, 
- 	0x0808, 0x0808, 0x0808, 0x0808, 0x0801, 0x0808, 0x0108, 0x0808, 
- 	0x0808, 0x0106, 0x0606, 0x0606, 0x0606, 0x0108, 0x0808, 0x0808, 
- 	0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0101, 0x0404, 
- 	
- 	0x0404, 0x0404, 0x0404, 0x0401, 0x0404, 0x0108, 0x0808, 0x0808, 
- 	0x0808, 0x0808, 0x0808, 0x0808, 0x0801, 0x0808, 0x0808, 0x0808, 
- 	0x0808, 0x0106, 0x0606, 0x0606, 0x0601, 0x0808, 0x0808, 0x0808, 
- 	0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0101, 0x0404, 0x0404, 
- 	
- 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0401, 0x0108, 0x0808, 
- 	0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0108, 0x0808, 0x0808, 
- 	0x0801, 0x0606, 0x0606, 0x0606, 0x0601, 0x0808, 0x0808, 0x0808, 
- 	0x0808, 0x0808, 0x0808, 0x0808, 0x0101, 0x0404, 0x0404, 0x0404, 
- 	
- 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0401, 0x0808, 
- 	0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0801, 0x0101, 0x0101, 
- 	0x0106, 0x0606, 0x0606, 0x0606, 0x0108, 0x0808, 0x0808, 0x0808, 
- 	0x0808, 0x0808, 0x0808, 0x0101, 0x0404, 0x0404, 0x0404, 0x0404, 
- 	
- 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0101, 
- 	0x0101, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0101, 
- 	0x0606, 0x0606, 0x0606, 0x0101, 0x0808, 0x0808, 0x0808, 0x0808, 
- 	0x0808, 0x0801, 0x0101, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
- 	
- 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
- 	0x0404, 0x0101, 0x0101, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 
- 	0x0101, 0x0101, 0x0101, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 
- 	0x0801, 0x0104, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
- 	
- 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
- 	0x0404, 0x0404, 0x0404, 0x0101, 0x0101, 0x0108, 0x0808, 0x0808, 
- 	0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0101, 
- 	0x0104, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
- 	
- 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
- 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0401, 0x0108, 0x0808, 
- 	0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0101, 0x0801, 
- 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
- 	
- 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
- 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0401, 0x0108, 
- 	0x0808, 0x0808, 0x0808, 0x0801, 0x0101, 0x0101, 0x0808, 0x0801, 
- 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
- 	
- 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
- 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0401, 
- 	0x0101, 0x0101, 0x0101, 0x0108, 0x0808, 0x0808, 0x0808, 0x0801, 
- 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
- 	
- 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
- 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
- 	0x0404, 0x0401, 0x0303, 0x0308, 0x0808, 0x0808, 0x0808, 0x0801, 
- 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
- 	
--- 0 ----
diff -cr --new-file sspkg2.0//examples/icons/puzzle_demo.icon ss/examples/icons/puzzle_demo.icon
*** sspkg2.0//examples/icons/puzzle_demo.icon
--- ss/examples/icons/puzzle_demo.icon	Fri Nov 13 04:36:59 1992
***************
*** 0 ****
--- 1,320 ----
+ 	0x0404, 0x0404, 0x0101, 0x0303, 0x0101, 0x0b0b, 0x0b0b, 0x0b0b, 
+ 	0x0b0b, 0x0103, 0x0303, 0x0303, 0x0104, 0x0404, 0x0404, 0x0404, 
+ 	0x0103, 0x0303, 0x010b, 0x0b0b, 0x0103, 0x0303, 0x0104, 0x0404, 
+ 	0x0202, 0x0202, 0x0101, 0x0101, 0x0104, 0x0404, 0x0404, 0x0404, 
+ 	
+ 	0x0404, 0x0404, 0x0404, 0x0101, 0x0303, 0x0101, 0x0b0b, 0x0b0b, 
+ 	0x0b0b, 0x0b01, 0x0303, 0x0303, 0x0104, 0x0404, 0x0404, 0x0404, 
+ 	0x0401, 0x0303, 0x0301, 0x010b, 0x0103, 0x0303, 0x0301, 0x0202, 
+ 	0x0101, 0x0101, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
+ 	
+ 	0x0404, 0x0404, 0x0404, 0x0404, 0x0103, 0x0303, 0x0101, 0x0b0b, 
+ 	0x0b0b, 0x0b01, 0x0303, 0x0303, 0x0301, 0x0404, 0x0404, 0x0404, 
+ 	0x0404, 0x0101, 0x0303, 0x0301, 0x0103, 0x0303, 0x0301, 0x0101, 
+ 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
+ 	
+ 	0x0404, 0x0404, 0x0404, 0x0404, 0x0401, 0x0103, 0x0303, 0x0101, 
+ 	0x0b0b, 0x0b0b, 0x0103, 0x0303, 0x0303, 0x0104, 0x0404, 0x0404, 
+ 	0x0404, 0x0402, 0x0103, 0x0303, 0x0303, 0x0303, 0x0301, 0x0404, 
+ 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
+ 	
+ 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0401, 0x0103, 0x0303, 
+ 	0x0101, 0x0b0b, 0x0b01, 0x0303, 0x0303, 0x0301, 0x0404, 0x0402, 
+ 	0x0202, 0x0201, 0x0101, 0x0303, 0x0303, 0x0303, 0x0301, 0x0404, 
+ 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
+ 	
+ 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0401, 0x0103, 
+ 	0x0303, 0x0101, 0x0b0b, 0x0103, 0x0303, 0x0303, 0x0102, 0x0201, 
+ 	0x0101, 0x0104, 0x0404, 0x0103, 0x0303, 0x0303, 0x0303, 0x0104, 
+ 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
+ 	
+ 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0401, 
+ 	0x0103, 0x0303, 0x0101, 0x0103, 0x0303, 0x0303, 0x0101, 0x0104, 
+ 	0x0404, 0x0404, 0x0404, 0x0401, 0x0303, 0x0303, 0x0303, 0x0104, 
+ 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
+ 	
+ 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
+ 	0x0401, 0x0103, 0x0303, 0x0303, 0x0303, 0x0303, 0x0301, 0x0101, 
+ 	0x0104, 0x0101, 0x0101, 0x0404, 0x0103, 0x0303, 0x0303, 0x0104, 
+ 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
+ 	
+ 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
+ 	0x0404, 0x0201, 0x0103, 0x0303, 0x0303, 0x0303, 0x0303, 0x0103, 
+ 	0x0301, 0x0103, 0x0303, 0x0101, 0x0103, 0x0303, 0x0303, 0x0104, 
+ 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
+ 	
+ 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0202, 
+ 	0x0202, 0x0101, 0x0101, 0x0103, 0x0303, 0x0101, 0x0101, 0x0101, 
+ 	0x0303, 0x0301, 0x0103, 0x0301, 0x0101, 0x0303, 0x0303, 0x0104, 
+ 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
+ 	
+ 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0202, 0x0202, 0x0101, 
+ 	0x0101, 0x0404, 0x0404, 0x0401, 0x0101, 0x0303, 0x0303, 0x0303, 
+ 	0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 0x0104, 
+ 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
+ 	
+ 	0x0404, 0x0404, 0x0404, 0x0202, 0x0202, 0x0101, 0x0101, 0x0404, 
+ 	0x0404, 0x0404, 0x0404, 0x0401, 0x0303, 0x0303, 0x0303, 0x0303, 
+ 	0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 0x0301, 
+ 	0x0104, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
+ 	
+ 	0x0404, 0x0202, 0x0202, 0x0101, 0x0101, 0x0404, 0x0404, 0x0404, 
+ 	0x0404, 0x0404, 0x0404, 0x0103, 0x0303, 0x0303, 0x0303, 0x0303, 
+ 	0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 
+ 	0x0301, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
+ 	
+ 	0x0202, 0x0101, 0x0101, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
+ 	0x0404, 0x0404, 0x0401, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 
+ 	0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 
+ 	0x0303, 0x0104, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
+ 	
+ 	0x0101, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
+ 	0x0404, 0x0404, 0x0103, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 
+ 	0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 
+ 	0x0303, 0x0301, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
+ 	
+ 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
+ 	0x0404, 0x0401, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 
+ 	0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 
+ 	0x0303, 0x0301, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
+ 	
+ 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
+ 	0x0404, 0x0103, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 
+ 	0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 
+ 	0x0303, 0x0303, 0x0104, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
+ 	
+ 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
+ 	0x0404, 0x0103, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 
+ 	0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 0x0301, 0x0103, 0x0303, 
+ 	0x0303, 0x0303, 0x0104, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
+ 	
+ 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
+ 	0x0401, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 
+ 	0x0303, 0x0303, 0x0303, 0x0303, 0x0101, 0x0103, 0x0301, 0x0303, 
+ 	0x0303, 0x0303, 0x0301, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
+ 	
+ 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
+ 	0x0101, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 
+ 	0x0303, 0x0303, 0x0303, 0x0301, 0x0303, 0x0303, 0x0303, 0x0103, 
+ 	0x0303, 0x0303, 0x0301, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
+ 	
+ 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
+ 	0x0103, 0x0103, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 
+ 	0x0303, 0x0303, 0x0301, 0x0103, 0x0303, 0x0303, 0x0303, 0x0301, 
+ 	0x0303, 0x0303, 0x0301, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
+ 	
+ 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0401, 
+ 	0x0303, 0x0301, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 
+ 	0x0303, 0x0303, 0x0103, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 
+ 	0x0303, 0x0303, 0x0301, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
+ 	
+ 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0401, 
+ 	0x0303, 0x0301, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 
+ 	0x0303, 0x0301, 0x0303, 0x0303, 0x0103, 0x0303, 0x0303, 0x0303, 
+ 	0x0303, 0x0303, 0x0303, 0x0104, 0x0404, 0x0404, 0x0404, 0x0404, 
+ 	
+ 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0101, 
+ 	0x0303, 0x0303, 0x0103, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 
+ 	0x0303, 0x0301, 0x0303, 0x0301, 0x0303, 0x0303, 0x0303, 0x0303, 
+ 	0x0303, 0x0303, 0x0303, 0x0104, 0x0404, 0x0404, 0x0404, 0x0404, 
+ 	
+ 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0101, 
+ 	0x0303, 0x0303, 0x0103, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 
+ 	0x0303, 0x0103, 0x0303, 0x0101, 0x0303, 0x0303, 0x0303, 0x0303, 
+ 	0x0303, 0x0303, 0x0303, 0x0104, 0x0404, 0x0404, 0x0404, 0x0404, 
+ 	
+ 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0108, 
+ 	0x0103, 0x0303, 0x0103, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 
+ 	0x0303, 0x0103, 0x0301, 0x0d08, 0x0103, 0x0303, 0x0303, 0x0303, 
+ 	0x0303, 0x0303, 0x0303, 0x0301, 0x0404, 0x0404, 0x0404, 0x0404, 
+ 	
+ 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0108, 
+ 	0x0801, 0x0303, 0x0301, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 
+ 	0x0301, 0x0303, 0x010d, 0x0808, 0x0801, 0x0303, 0x0303, 0x0303, 
+ 	0x0303, 0x0303, 0x0303, 0x0301, 0x0404, 0x0404, 0x0404, 0x0404, 
+ 	
+ 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0108, 
+ 	0x0808, 0x0103, 0x0301, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 
+ 	0x0301, 0x0303, 0x0108, 0x0808, 0x080d, 0x0103, 0x0303, 0x0303, 
+ 	0x0303, 0x0303, 0x0303, 0x0303, 0x0104, 0x0404, 0x0404, 0x0404, 
+ 	
+ 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x010d, 
+ 	0x0808, 0x0801, 0x0303, 0x0103, 0x0303, 0x0303, 0x0303, 0x0303, 
+ 	0x0303, 0x0301, 0x0d08, 0x0808, 0x0808, 0x0103, 0x0303, 0x0303, 
+ 	0x0303, 0x0303, 0x0303, 0x0303, 0x0104, 0x0404, 0x0404, 0x0404, 
+ 	
+ 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0401, 0x0301, 
+ 	0x0808, 0x080d, 0x0103, 0x0103, 0x0303, 0x0303, 0x0303, 0x0303, 
+ 	0x0303, 0x0301, 0x0808, 0x0808, 0x0808, 0x0d01, 0x0303, 0x0303, 
+ 	0x0303, 0x0303, 0x0303, 0x0303, 0x0301, 0x0404, 0x0404, 0x0404, 
+ 	
+ 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0401, 0x0301, 
+ 	0x0808, 0x0808, 0x0103, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 
+ 	0x0303, 0x0108, 0x0808, 0x0808, 0x0808, 0x0801, 0x0303, 0x0303, 
+ 	0x0303, 0x0303, 0x0303, 0x0303, 0x0301, 0x0404, 0x0404, 0x0404, 
+ 	
+ 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0401, 0x0301, 
+ 	0x0d08, 0x0808, 0x0801, 0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 
+ 	0x0301, 0x0d08, 0x0808, 0x0808, 0x0808, 0x0801, 0x0303, 0x0303, 
+ 	0x0303, 0x0303, 0x0303, 0x0303, 0x0303, 0x0101, 0x0101, 0x0101, 
+ 	
+ 	0x0404, 0x0404, 0x040e, 0x0e0e, 0x0404, 0x0404, 0x0401, 0x0303, 
+ 	0x0108, 0x0808, 0x080d, 0x0103, 0x0303, 0x0303, 0x0303, 0x0303, 
+ 	0x0301, 0x0808, 0x0808, 0x0808, 0x0808, 0x0801, 0x0303, 0x0303, 
+ 	0x0303, 0x0303, 0x0303, 0x0303, 0x0301, 0x010d, 0x0808, 0x0808, 
+ 	
+ 	0x0e0e, 0x0e0e, 0x0e04, 0x0404, 0x0404, 0x0404, 0x0401, 0x0303, 
+ 	0x010d, 0x0808, 0x0808, 0x0103, 0x0303, 0x0301, 0x0303, 0x0303, 
+ 	0x010d, 0x0808, 0x0808, 0x0808, 0x0808, 0x0801, 0x0303, 0x0303, 
+ 	0x0303, 0x0303, 0x0303, 0x0303, 0x010d, 0x0808, 0x0808, 0x0808, 
+ 	
+ 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0103, 0x0303, 
+ 	0x0301, 0x0808, 0x0808, 0x0d01, 0x0303, 0x0103, 0x0303, 0x0303, 
+ 	0x0108, 0x0808, 0x0808, 0x0808, 0x0808, 0x0801, 0x0303, 0x0303, 
+ 	0x0303, 0x0303, 0x0303, 0x0101, 0x0808, 0x0808, 0x0808, 0x0808, 
+ 	
+ 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0103, 0x0303, 
+ 	0x0301, 0x0d08, 0x0808, 0x0801, 0x0303, 0x0103, 0x0303, 0x0301, 
+ 	0x0d08, 0x0808, 0x0808, 0x0808, 0x0808, 0x0d01, 0x0303, 0x0303, 
+ 	0x0303, 0x0303, 0x0101, 0x0d08, 0x0808, 0x0808, 0x0808, 0x0808, 
+ 	
+ 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0103, 0x0303, 
+ 	0x0303, 0x0101, 0x010d, 0x080d, 0x0103, 0x0103, 0x0303, 0x0301, 
+ 	0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0103, 0x0303, 0x0303, 
+ 	0x0303, 0x0101, 0x0d08, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 
+ 	
+ 	0x0101, 0x0101, 0x0404, 0x0404, 0x0404, 0x0404, 0x0101, 0x0303, 
+ 	0x0303, 0x0101, 0x0101, 0x0808, 0x0103, 0x0301, 0x0303, 0x0101, 
+ 	0x010d, 0x0808, 0x0808, 0x0808, 0x0808, 0x0103, 0x0303, 0x0303, 
+ 	0x0101, 0x0d08, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 
+ 	
+ 	0x0404, 0x0404, 0x0101, 0x0101, 0x0101, 0x0101, 0x0808, 0x0101, 
+ 	0x0103, 0x0301, 0x0101, 0x080d, 0x0103, 0x0301, 0x0303, 0x0101, 
+ 	0x0101, 0x0808, 0x0808, 0x0808, 0x0808, 0x0103, 0x0303, 0x0101, 
+ 	0x0d08, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0101, 
+ 	
+ 	0x0404, 0x0404, 0x0404, 0x0101, 0x0808, 0x0808, 0x0101, 0x0108, 
+ 	0x0801, 0x0101, 0x0101, 0x0801, 0x0101, 0x0101, 0x0101, 0x0101, 
+ 	0x0101, 0x0808, 0x0808, 0x0808, 0x080d, 0x0101, 0x0101, 0x0d08, 
+ 	0x0808, 0x0808, 0x0808, 0x0101, 0x0101, 0x0101, 0x0101, 0x0808, 
+ 	
+ 	0x0404, 0x0404, 0x0401, 0x0808, 0x0808, 0x0808, 0x0808, 0x0801, 
+ 	0x0108, 0x0808, 0x0801, 0x010b, 0x0b0b, 0x0b0b, 0x0b01, 0x0101, 
+ 	0x0101, 0x0808, 0x0808, 0x0801, 0x0101, 0x010d, 0x0808, 0x0808, 
+ 	0x0801, 0x0101, 0x0101, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 
+ 	
+ 	0x0101, 0x0101, 0x0101, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 
+ 	0x0801, 0x0101, 0x0808, 0x0801, 0x0b0b, 0x0b0b, 0x0b01, 0x0808, 
+ 	0x0101, 0x0101, 0x0101, 0x010d, 0x0808, 0x0808, 0x0101, 0x0101, 
+ 	0x0108, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 
+ 	
+ 	0x0404, 0x0401, 0x0808, 0x0101, 0x0101, 0x0101, 0x0101, 0x0808, 
+ 	0x0808, 0x0808, 0x0101, 0x0808, 0x010b, 0x0b01, 0x0101, 0x0101, 
+ 	0x0808, 0x0808, 0x0808, 0x0808, 0x0101, 0x0101, 0x0808, 0x0808, 
+ 	0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 
+ 	
+ 	0x0404, 0x0401, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0101, 
+ 	0x0101, 0x0808, 0x0808, 0x0801, 0x0101, 0x0108, 0x0808, 0x0808, 
+ 	0x0808, 0x0801, 0x0101, 0x0101, 0x0808, 0x0808, 0x0808, 0x0808, 
+ 	0x0808, 0x0808, 0x0101, 0x0101, 0x0101, 0x0101, 0x0101, 0x0101, 
+ 	
+ 	0x0404, 0x0101, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 
+ 	0x0101, 0x0101, 0x0101, 0x0108, 0x0808, 0x0808, 0x0808, 0x0808, 
+ 	0x0101, 0x0101, 0x0808, 0x0808, 0x0808, 0x0101, 0x0101, 0x0101, 
+ 	0x0101, 0x0101, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 
+ 	
+ 	0x0404, 0x0101, 0x0101, 0x0101, 0x0101, 0x0101, 0x0101, 0x0108, 
+ 	0x0808, 0x0808, 0x0808, 0x0108, 0x0808, 0x0808, 0x0808, 0x0808, 
+ 	0x0808, 0x0801, 0x0101, 0x0101, 0x0101, 0x0d08, 0x0808, 0x0808, 
+ 	0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 
+ 	
+ 	0x0101, 0x0101, 0x0808, 0x0808, 0x0808, 0x0808, 0x0801, 0x0101, 
+ 	0x0101, 0x0101, 0x0108, 0x0108, 0x0808, 0x0801, 0x0808, 0x0808, 
+ 	0x0801, 0x0101, 0x0101, 0x0101, 0x0101, 0x0101, 0x0101, 0x010d, 
+ 	0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 
+ 	
+ 	0x0404, 0x0108, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 
+ 	0x0808, 0x0808, 0x0808, 0x0801, 0x0101, 0x0101, 0x0108, 0x0808, 
+ 	0x0801, 0x0101, 0x0909, 0x0909, 0x0901, 0x0101, 0x0101, 0x0101, 
+ 	0x0101, 0x0101, 0x0101, 0x0101, 0x0101, 0x0101, 0x0101, 0x0101, 
+ 	
+ 	0x0404, 0x0108, 0x0108, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 
+ 	0x0808, 0x0808, 0x0808, 0x0801, 0x0808, 0x0801, 0x0801, 0x0101, 
+ 	0x0108, 0x0109, 0x0909, 0x0909, 0x0909, 0x0909, 0x0901, 0x0808, 
+ 	0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 
+ 	
+ 	0x0404, 0x0108, 0x0108, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 
+ 	0x0808, 0x0808, 0x0808, 0x0801, 0x0808, 0x0801, 0x0808, 0x0808, 
+ 	0x0808, 0x0109, 0x0909, 0x0909, 0x0909, 0x0909, 0x0108, 0x0808, 
+ 	0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 
+ 	
+ 	0x0404, 0x0401, 0x0108, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 
+ 	0x0808, 0x0808, 0x0808, 0x0801, 0x0808, 0x0801, 0x0808, 0x0808, 
+ 	0x0808, 0x0109, 0x0901, 0x0101, 0x0109, 0x0909, 0x0108, 0x0808, 
+ 	0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 
+ 	
+ 	0x0404, 0x0401, 0x0401, 0x0801, 0x0808, 0x0808, 0x0808, 0x0808, 
+ 	0x0808, 0x0808, 0x0808, 0x0808, 0x0108, 0x080d, 0x0108, 0x0808, 
+ 	0x0808, 0x0109, 0x0106, 0x0606, 0x0601, 0x0101, 0x0808, 0x0808, 
+ 	0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 
+ 	
+ 	0x0404, 0x0404, 0x0401, 0x0801, 0x0108, 0x0808, 0x0808, 0x0808, 
+ 	0x0808, 0x0808, 0x0808, 0x0808, 0x0108, 0x0808, 0x0108, 0x0808, 
+ 	0x0808, 0x0101, 0x0606, 0x0606, 0x0606, 0x0108, 0x0808, 0x0808, 
+ 	0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0101, 
+ 	
+ 	0x0404, 0x0404, 0x0404, 0x0101, 0x0401, 0x0808, 0x0808, 0x0808, 
+ 	0x0808, 0x0808, 0x0808, 0x0808, 0x0801, 0x0808, 0x0108, 0x0808, 
+ 	0x0808, 0x0106, 0x0606, 0x0606, 0x0606, 0x0108, 0x0808, 0x0808, 
+ 	0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0101, 0x0404, 
+ 	
+ 	0x0404, 0x0404, 0x0404, 0x0401, 0x0404, 0x0108, 0x0808, 0x0808, 
+ 	0x0808, 0x0808, 0x0808, 0x0808, 0x0801, 0x0808, 0x0808, 0x0808, 
+ 	0x0808, 0x0106, 0x0606, 0x0606, 0x0601, 0x0808, 0x0808, 0x0808, 
+ 	0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0101, 0x0404, 0x0404, 
+ 	
+ 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0401, 0x0108, 0x0808, 
+ 	0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0108, 0x0808, 0x0808, 
+ 	0x0801, 0x0606, 0x0606, 0x0606, 0x0601, 0x0808, 0x0808, 0x0808, 
+ 	0x0808, 0x0808, 0x0808, 0x0808, 0x0101, 0x0404, 0x0404, 0x0404, 
+ 	
+ 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0401, 0x0808, 
+ 	0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0801, 0x0101, 0x0101, 
+ 	0x0106, 0x0606, 0x0606, 0x0606, 0x0108, 0x0808, 0x0808, 0x0808, 
+ 	0x0808, 0x0808, 0x0808, 0x0101, 0x0404, 0x0404, 0x0404, 0x0404, 
+ 	
+ 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0101, 
+ 	0x0101, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0101, 
+ 	0x0606, 0x0606, 0x0606, 0x0101, 0x0808, 0x0808, 0x0808, 0x0808, 
+ 	0x0808, 0x0801, 0x0101, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
+ 	
+ 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
+ 	0x0404, 0x0101, 0x0101, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 
+ 	0x0101, 0x0101, 0x0101, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 
+ 	0x0801, 0x0104, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
+ 	
+ 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
+ 	0x0404, 0x0404, 0x0404, 0x0101, 0x0101, 0x0108, 0x0808, 0x0808, 
+ 	0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0101, 
+ 	0x0104, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
+ 	
+ 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
+ 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0401, 0x0108, 0x0808, 
+ 	0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0808, 0x0101, 0x0801, 
+ 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
+ 	
+ 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
+ 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0401, 0x0108, 
+ 	0x0808, 0x0808, 0x0808, 0x0801, 0x0101, 0x0101, 0x0808, 0x0801, 
+ 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
+ 	
+ 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
+ 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0401, 
+ 	0x0101, 0x0101, 0x0101, 0x0108, 0x0808, 0x0808, 0x0808, 0x0801, 
+ 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
+ 	
+ 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
+ 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
+ 	0x0404, 0x0401, 0x0303, 0x0308, 0x0808, 0x0808, 0x0808, 0x0801, 
+ 	0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 0x0404, 
+ 	
diff -cr --new-file sspkg2.0//examples/misc/Makefile ss/examples/misc/Makefile
*** sspkg2.0//examples/misc/Makefile	Sun Dec 13 02:22:14 1992
--- ss/examples/misc/Makefile	Fri Aug  6 03:50:46 1993
***************
*** 3,9 ****
  
  SSPKGHOME	= ../..
  
- LIBDIR		= $(OPENWINHOME)/lib
  LIBS		= -lsspkg -lxview -lolgx -lX11
  #SSPKGLIB	= $(SSPKGHOME)/lib/libsspkg.a
  
--- 3,8 ----
***************
*** 21,27 ****
  	cc -o $@ example1.o $(LDFLAGS)
  
  clean:
- 	-sccs clean
  	rm -f *.o drawrect example1
  
  install:
--- 20,25 ----
diff -cr --new-file sspkg2.0//examples/selection/Makefile ss/examples/selection/Makefile
*** sspkg2.0//examples/selection/Makefile	Sun Dec 13 02:22:29 1992
--- ss/examples/selection/Makefile	Fri Aug  6 03:49:06 1993
***************
*** 3,9 ****
  
  SSPKGHOME	= ../..
  
- LIBDIR		= $(OPENWINHOME)/lib
  LIBS		= -lsspkg -lxview -lolgx -lX11
  #SSPKGLIB	= $(SSPKGHOME)/lib/libsspkg.a
  
--- 3,8 ----
***************
*** 19,25 ****
  	cc -o $@ select.o $(LDFLAGS)
  
  clean:
- 	-sccs clean
  	rm -f *.o select
  
  install:
--- 18,23 ----
diff -cr --new-file sspkg2.0//examples/tacho/Makefile ss/examples/tacho/Makefile
*** sspkg2.0//examples/tacho/Makefile	Sun Dec 13 02:22:39 1992
--- ss/examples/tacho/Makefile	Fri Aug  6 03:51:09 1993
***************
*** 3,9 ****
  
  SSPKGHOME	= ../..
  
- LIBDIR		= $(OPENWINHOME)/lib
  LIBS		= -lsspkg -lxview -lolgx -lX11
  #SSPKGLIB	= $(SSPKGHOME)/lib/libsspkg.a
  
--- 3,8 ----
***************
*** 18,24 ****
  	cc -o $@ tacho.o $(LDFLAGS)
  
  clean:
- 	-sccs clean
  	rm -f *.o tacho
  
  install:
--- 17,22 ----
diff -cr --new-file sspkg2.0//examples/thermo/Makefile ss/examples/thermo/Makefile
*** sspkg2.0//examples/thermo/Makefile
--- ss/examples/thermo/Makefile	Fri Aug  6 03:51:45 1993
***************
*** 0 ****
--- 1,24 ----
+  
+ #       @(#) Makefile 1.1 93/04/06 
+ 
+ SSPKGHOME	= ../..
+ 
+ LIBDIR		= $(OPENWINHOME)/lib
+ LIBS		= -lsspkg -lxview -lolgx -lX11
+ #SSPKGLIB	= $(SSPKGHOME)/lib/libsspkg.a
+ 
+ .KEEP_STATE:
+ .INIT: thermo.h
+ 
+ DBXFLAGS	=  -O 
+ CFLAGS		= $(DBXFLAGS) -I$(SSPKGHOME)/include -I$(OPENWINHOME)/include 
+ LDFLAGS		= -L$(LIBDIR) $(LIBS) $(SSPKGLIB) -lm
+ 
+ all: thermo
+ 
+ thermo: thermo.o main.o
+ 	cc -o $@ thermo.o main.o $(LDFLAGS)
+ 
+ clean:
+ 	rm -f *.o thermo
+ 
diff -cr --new-file sspkg2.0//examples/thermo/main.c ss/examples/thermo/main.c
*** sspkg2.0//examples/thermo/main.c
--- ss/examples/thermo/main.c	Thu May  6 21:06:44 1993
***************
*** 0 ****
--- 1,136 ----
+ /*
+  * @(#) main.c 1.3 93/04/06 
+  *
+  * The thermo is a prototype object.  It is not a full xview object
+  * in the sence that the interface does not use xv_get, xv_set, etc.
+  * but it is encapulated.  To use it, set values in the Thermo structure
+  * and call thermo_set_value.  A thermo is created by thermo_init and
+  * destroyed by calling xv_destroy() on therm->box.
+  *
+  * The thermo is implemented using the SlingShot drawarea object.
+  * 
+  * The code in this file is largely for demonstrations purposes,
+  * if you wish to link in the thermo in your application, all you
+  * need to copy are the thermo.c and thermo.h files.
+  *
+  * brian.warkentine@eng.sun.com
+  */
+ 
+ #include <sys/types.h>
+ #include <time.h>
+ #include <xview/frame.h>
+ #include <xview/cms.h>
+ #include <sspkg/canshell.h>
+ #include <sspkg/rectobj.h>
+ #include <sspkg/drawobj.h>
+ #include "thermo.h"
+ 
+ void            resize();
+ 
+ Frame           frame;
+ Canvas_shell    shell;
+ Thermo          a_thermo;
+ Cms             cms;
+ 
+ #define		WHITE	0
+ #define		COLOR1	1
+ #define		COLOR2	2
+ #define		COLOR3	3
+ #define		COLOR4	4
+ #define		COLOR5	5
+ #define 	COLOR6	6
+ #define 	BLACK	7
+ 
+ main(argc, argv)
+ 	int             argc;
+ 	char           *argv[];
+ {
+ 
+ 	xv_init(XV_INIT_ARGC_PTR_ARGV, &argc, argv, NULL);
+ 
+ 	cms = (Cms) xv_create(XV_NULL, CMS,
+ 			      CMS_SIZE, 8,
+ 			      CMS_NAMED_COLORS,
+ 			      "white", "gray90", "snow", "peru",
+ 			      "orange", "firebrick", "gold", "black", NULL,
+ 			      NULL);
+ 
+ 	frame = (Frame) xv_create(XV_NULL, FRAME,
+ 				  FRAME_LABEL, argv[0],
+ 				  XV_WIDTH, 100,
+ 				  XV_HEIGHT, 500,
+ 				  NULL);
+ 
+ 	shell = (Canvas_shell) xv_create(frame, CANVAS_SHELL,
+ 					 CANVAS_SHELL_BATCH_REPAINT, TRUE,
+ 					 WIN_CMS, cms,
+ 					 NULL);
+ 
+ 	a_thermo.outline = BLACK;
+ 	a_thermo.fill = COLOR1;
+ 	a_thermo.fill2 = COLOR5;
+ 	a_thermo.label = COLOR4;
+ 	thermo_init(shell, &a_thermo);
+ 	a_thermo.scaletop = 100;
+ 	a_thermo.scalebot = 0;
+ 	a_thermo.value = 40;
+ 	a_thermo.font = (Xv_font) xv_create(frame, FONT,
+ 			FONT_NAME, "helvetica-22",
+ 			NULL);
+ 	thermo_set_value(&a_thermo);
+ 
+ 	xv_set(a_thermo.box,
+ 	       XV_WIDTH, xv_get(shell, XV_WIDTH),
+ 	       XV_HEIGHT, xv_get(shell, XV_HEIGHT),
+ 	       NULL);
+ 
+ 	xv_set(shell,
+ 	       CANVAS_RESIZE_PROC, resize,
+ 	       NULL);
+ 
+         init_timer();
+ 
+ 	xv_main_loop(frame);
+ }
+ 
+ void
+ resize(shell, width, height)
+ 	Canvas_shell    shell;
+ 	int             width;
+ 	int             height;
+ {
+ 	xv_set(a_thermo.box,
+ 	       XV_WIDTH, width,
+ 	       XV_HEIGHT, height,
+ 	       NULL);
+ }
+ 
+ 
+ Notify_value
+ alarmhandler(client, which)
+         Notify_client   client;
+         int             which;
+ {
+         a_thermo.value = rand() % 100;
+         thermo_set_value(&a_thermo);
+          
+         return NOTIFY_DONE;
+ }
+        
+ 
+ init_timer()
+ {
+ 	static struct itimerval timer;
+ 
+ 	timer.it_value.tv_sec = 1;
+ 	timer.it_value.tv_usec = 0;
+ 	timer.it_interval.tv_sec = 1;
+ 	timer.it_interval.tv_usec = 0;
+ 
+ 	notify_set_itimer_func(shell,
+ 			       alarmhandler,
+ 			       ITIMER_REAL,
+ 			       &timer,
+ 			       NULL);
+ }
+ 
diff -cr --new-file sspkg2.0//examples/thermo/thermo.c ss/examples/thermo/thermo.c
*** sspkg2.0//examples/thermo/thermo.c
--- ss/examples/thermo/thermo.c	Thu May  6 21:06:44 1993
***************
*** 0 ****
--- 1,175 ----
+ /*
+  *	@(#) thermo.c 1.1 93/04/06 
+  */
+ 
+ #include <xview/cms.h>
+ #include <sspkg/rectobj.h> 
+ #include <sspkg/canshell.h> 
+ #include <sspkg/drawobj.h> 
+ #include "thermo.h"
+  
+ 
+ #define TH_LEFT_X -1.0
+ #define TH_RIGHT_X 1.0
+ #define TH_UPPER_Y 0.0
+ #define TH_LOWER_Y 20.0
+ #define TH_WIDTH (TH_RIGHT_X - TH_LEFT_X)
+ #define TH_HEIGHT (TH_LOWER_Y - TH_UPPER_Y)
+ 
+ #define INSIDE_LEFT		-0.5
+ #define INSIDE_SIZE		(TH_WIDTH/2)
+ #define WELL_SCALE		2.0
+ 
+ #define SCALE_LENGTH		(TH_HEIGHT - WELL_SCALE - INSIDE_SIZE/2)
+ #define WICK_LEFT		-.25
+ #define WICK_WIDTH		.5
+ 
+ 
+ void
+ thermo_init(parent, the)
+ 	Rectobj parent;
+ 	Thermo *the;
+ {
+ 	double left, right, upper, lower;
+ 
+ 	left = TH_LEFT_X - 0.1;
+ 	right = TH_RIGHT_X + 1.0;
+ 	upper = TH_UPPER_Y - 0.1;
+ 	lower = TH_LOWER_Y + 0.1;
+ 
+ 	the->box = (Cbox) xv_create(parent, CBOX, NULL);
+ 
+ 	the->background = (Drawarea) xv_create(the->box, DRAWAREA,
+ 		RECTOBJ_RESIZABLE, TRUE,
+ 		DRAWAREA_LEFT_X, &left,
+ 		DRAWAREA_RIGHT_X, &right,
+ 		DRAWAREA_UPPER_Y, &upper,
+ 		DRAWAREA_LOWER_Y, &lower,
+ 		NULL);
+ 
+ 	the->foreground = (Drawarea) xv_create(the->box, DRAWAREA,
+ 		RECTOBJ_RESIZABLE, TRUE,
+ 		DRAWAREA_LEFT_X, &left,
+ 		DRAWAREA_RIGHT_X, &right,
+ 		DRAWAREA_UPPER_Y, &upper,
+ 		DRAWAREA_LOWER_Y, &lower,
+ 		NULL);
+ 
+ 	thermo_render_background(the);
+ }
+ 
+ void
+ thermo_render_background(the)
+ 	Thermo *the;
+ {
+ 	VClear( the->background );
+ 	VSetColor( the->background, the->fill);
+ 	DFillArc( the->background,
+ 		INSIDE_LEFT, TH_UPPER_Y,
+ 		INSIDE_SIZE, INSIDE_SIZE,
+ 		0, 360*64);
+ 
+ 	VSetColor( the->background, the->outline);
+ 	DDrawArc( the->background,
+ 		INSIDE_LEFT, TH_UPPER_Y,
+ 		INSIDE_SIZE, INSIDE_SIZE,
+ 		0, 360*64);
+ 
+ 	VSetColor( the->background, the->fill);
+ 	DFillArc( the->background,
+ 		TH_LEFT_X, TH_HEIGHT - WELL_SCALE,
+ 		WELL_SCALE, WELL_SCALE,
+ 		0, 360*64);
+ 
+ 	VSetColor( the->background, the->outline);
+ 	DDrawArc( the->background,
+ 		TH_LEFT_X, TH_HEIGHT - WELL_SCALE,
+ 		WELL_SCALE, WELL_SCALE,
+ 		0, 360*64);
+ 
+ 	VSetColor( the->background, the->fill);
+ 	DFillRectangle( the->background,
+ 		INSIDE_LEFT, TH_UPPER_Y + INSIDE_SIZE/2,
+ 		INSIDE_SIZE, TH_HEIGHT - WELL_SCALE);
+ 
+ 	VSetColor( the->background, the->outline );
+ 	DDrawLine( the->background, 
+ 		INSIDE_LEFT, TH_UPPER_Y + INSIDE_SIZE/2,
+ 		INSIDE_LEFT, TH_HEIGHT-WELL_SCALE/2-0.880/*dontask*/);
+ 	DDrawLine( the->background, 
+ 		INSIDE_LEFT + INSIDE_SIZE -0.0001, TH_UPPER_Y + INSIDE_SIZE/2,
+ 		INSIDE_LEFT + INSIDE_SIZE - 0.0001, TH_HEIGHT-WELL_SCALE/2-0.880);
+ 
+ 	VSetColor( the->background, the->fill2);
+ 	DFillArc( the->background,
+ 		INSIDE_LEFT - .125,
+ 		TH_HEIGHT-WELL_SCALE/2 - INSIDE_SIZE/2 - .125,
+ 		INSIDE_SIZE + .25, INSIDE_SIZE + .25,
+ 		0, 360*64);
+ 
+ 	DFillRectangle( the->background,
+ 		WICK_LEFT, SCALE_LENGTH + INSIDE_SIZE/2,
+ 		WICK_WIDTH, WELL_SCALE/2);
+ 
+ 
+ }
+ 
+ void
+ thermo_set_value(the)
+ 	Thermo *the;
+ {
+ 	Canvas_shell	canvas_shell;
+ 	double          percentage;
+ 	double		y;
+ 	double		height;
+ 	char		string[40];
+ 
+ 	if (the->value == the->prev_value &&
+ 	    the->scaletop == the->prev_scaletop &&
+ 	    the->scalebot == the->prev_scalebot)
+ 		return;
+ 
+ 	the->prev_value = the->value;
+ 	the->prev_scaletop = the->scaletop;
+ 	the->prev_scalebot = the->scalebot;
+ 
+ 	canvas_shell = (Canvas_shell) xv_get(the->box, RECTOBJ_CANVAS);
+ 	if(!canvas_shell)
+ 		return;
+ 
+ 	xv_set(canvas_shell, 
+ 		CANVAS_SHELL_DELAY_REPAINT, TRUE,
+ 		NULL);
+ 
+ 	percentage = (double) (the->value - the->scalebot) /
+ 		(double) (the->scaletop - the->scalebot);
+ 
+ 	height = SCALE_LENGTH * percentage;
+ 	y = SCALE_LENGTH - height + INSIDE_SIZE/2;
+ 
+ 	VClear(the->foreground);
+ 	VSetColor(the->foreground, the->fill2);
+ 
+ 	DFillRectangle(the->foreground,
+ 		WICK_LEFT, y,
+ 		WICK_WIDTH, height);
+ 
+ 	VSetColor( the->foreground, the->outline);
+ 	DDrawLine( the->foreground,
+ 		WICK_LEFT, y,
+ 		WICK_LEFT + WICK_WIDTH + 0.5, y);
+ 
+ 	if(the->font)
+ 		VSetFont(the->foreground, the->font);
+ 
+ 	sprintf(string, "%d", the->value);
+ 	DDrawString( the->foreground,
+ 		WICK_LEFT + WICK_WIDTH + 0.5, y,
+ 		string, strlen(string));
+ 
+ 
+ 	xv_set(canvas_shell, 
+ 		CANVAS_SHELL_DELAY_REPAINT, FALSE,
+ 		NULL);
+ }
+ 
diff -cr --new-file sspkg2.0//examples/thermo/thermo.h ss/examples/thermo/thermo.h
*** sspkg2.0//examples/thermo/thermo.h
--- ss/examples/thermo/thermo.h	Thu May  6 21:06:45 1993
***************
*** 0 ****
--- 1,43 ----
+ /*
+  *	@(#) thermo.h 1.1 93/04/06 
+  */
+ 
+  
+ #include <xview/font.h>
+ #include <sspkg/drawobj.h>
+ #include <sspkg/box.h>
+ 
+ typedef struct {
+ 	/* colors */
+ 	int             outline;
+ 	int             fill;
+ 	int             fill2;
+ 	int		label;
+ 	/* values */
+ 	int		scaletop;
+ 	int		scalebot;
+ 	int		value;
+ 
+ 	Xv_font		font;
+ 	/*
+ 	 * Following fields are initialized in thermo_init, you can deref 'box'
+ 	 * if you want to attach key data or 'xv_destroy' the thermo.
+ 	 */
+ 	Cbox            box;
+ 	Drawarea        background;
+ 	Drawarea        foreground;
+ 	int		prev_scaletop;
+ 	int		prev_scalebot;
+ 	int		prev_value;
+ } Thermo;
+ 
+ /*
+  * call thermo_init to create;
+  * call thermo_render_background if you set colors;
+  * call thermo_set when scaletop, scalebot, or value change
+  */
+ EXTERN_FUNCTION(void thermo_init, ( Rectobj parent, Thermo* ));
+ EXTERN_FUNCTION(void thermo_render_background, ( Thermo* ));
+ EXTERN_FUNCTION(void thermo_set_value, ( Thermo* ));
+ 
+ 
diff -cr --new-file sspkg2.0//examples/tree/Makefile ss/examples/tree/Makefile
*** sspkg2.0//examples/tree/Makefile	Sun Dec 13 02:22:51 1992
--- ss/examples/tree/Makefile	Fri Aug  6 03:49:28 1993
***************
*** 3,9 ****
  
  SSPKGHOME	= ../..
  
- LIBDIR		= $(OPENWINHOME)/lib
  LIBS		= -lsspkg -lxview -lolgx -lX11
  #SSPKGLIB	= $(SSPKGHOME)/lib/libsspkg.a
  
--- 3,8 ----
***************
*** 28,34 ****
  
  
  clean:
- 	-sccs clean
  	rm -f *.o tlstool treetool lex.yy.c
  
  install:
--- 27,32 ----
diff -cr --new-file sspkg2.0//include/sspkg/Makefile ss/include/sspkg/Makefile
*** sspkg2.0//include/sspkg/Makefile	Fri Nov 13 04:28:02 1992
--- ss/include/sspkg/Makefile	Fri Aug  6 03:52:12 1993
***************
*** 10,16 ****
  all:	$(INCLUDEFILES)
  
  clean:
! 	-sccs clean
  
  install: FORCE
  	cp $(INCLUDEFILES) $(INSTALL_DIR)/include/sspkg
--- 10,16 ----
  all:	$(INCLUDEFILES)
  
  clean:
! 	
  
  install: FORCE
  	cp $(INCLUDEFILES) $(INSTALL_DIR)/include/sspkg
diff -cr --new-file sspkg2.0//include/sspkg/drawobj.h ss/include/sspkg/drawobj.h
*** sspkg2.0//include/sspkg/drawobj.h	Fri Nov 13 04:28:03 1992
--- ss/include/sspkg/drawobj.h	Thu Apr  1 22:21:45 1993
***************
*** 6,12 ****
  #ifndef DRAWOBJ_DEFINED
  #define DRAWOBJ_DEFINED
  
! /* @(#) drawobj.h 1.42 92/10/30  */
  
  #include <xview/generic.h>
  
--- 6,12 ----
  #ifndef DRAWOBJ_DEFINED
  #define DRAWOBJ_DEFINED
  
! /* @(#) drawobj.h 1.44 93/03/26  */
  
  #include <xview/generic.h>
  
***************
*** 88,93 ****
--- 88,94 ----
  	DRAWTEXT_EDITABLE	= DRAWOBJ_ATTR(ATTR_BOOLEAN,		34),
  	DRAWTEXT_SHOW_UNDERLINE = DRAWOBJ_ATTR(ATTR_BOOLEAN,		35),
  	DRAWTEXT_LENGTH		= DRAWOBJ_ATTR(ATTR_INT,		36),
+ 	DRAWTEXT_NOTIFY_PROC	= DRAWOBJ_ATTR(ATTR_FUNCTION_PTR,	37),
  
  	DRAWICON_TEXT		= DRAWOBJ_ATTR(ATTR_OPAQUE,		40),
  	DRAWICON_IMAGE		= DRAWOBJ_ATTR(ATTR_OPAQUE,		41),
***************
*** 95,100 ****
--- 96,102 ----
  	DRAWICON_TEXT_COLOR	= DRAWOBJ_ATTR(ATTR_INT, 		43),
  	DRAWICON_GAP		= DRAWOBJ_ATTR(ATTR_INT, 		44),
  	DRAWICON_LAYOUT_VERTICAL= DRAWOBJ_ATTR(ATTR_BOOLEAN,		45),
+ 	DRAWICON_LAYOUT_CENTER	= DRAWOBJ_ATTR(ATTR_BOOLEAN,		46),
  
  	DRAWAREA_LEFT_X		= DRAWOBJ_ATTR(ATTR_OPAQUE, 		50),
  	DRAWAREA_RIGHT_X	= DRAWOBJ_ATTR(ATTR_OPAQUE, 		51),
diff -cr --new-file sspkg2.0//include/sspkg/grip.h ss/include/sspkg/grip.h
*** sspkg2.0//include/sspkg/grip.h	Fri Nov 13 04:28:04 1992
--- ss/include/sspkg/grip.h	Sat Mar 20 22:01:44 1993
***************
*** 6,12 ****
  #ifndef GRIP_DEFINED
  #define GRIP_DEFINED
  
! /* @(#) grip.h 1.3 92/10/30  */
  
  #include <sspkg/rectobj.h>
  
--- 6,12 ----
  #ifndef GRIP_DEFINED
  #define GRIP_DEFINED
  
! /* @(#) grip.h 1.4 93/03/16  */
  
  #include <sspkg/rectobj.h>
  
***************
*** 62,67 ****
--- 62,68 ----
  	GRIP_RUBBER_HLINE,
  	GRIP_RUBBER_HLINE_PAIR,
  	GRIP_RUBBER_CROSSHAIRS,
+ 	GRIP_RUBBER_LINE,
  } Grip_rubber_style;
  
  #endif
diff -cr --new-file sspkg2.0//include/sspkg/patchlevel.h ss/include/sspkg/patchlevel.h
*** sspkg2.0//include/sspkg/patchlevel.h	Fri Nov 13 04:28:05 1992
--- ss/include/sspkg/patchlevel.h	Thu May  6 21:08:13 1993
***************
*** 1,5 ****
! /* "@(#)patchlevel.h 1.5 92/10/23 */
  
! #define SSPKG_PATCHLEVEL 0
  #define SSPKG_VERSION 2.0
  
--- 1,161 ----
! /* "@(#)patchlevel.h 1.10 93/04/19 */
  
! #define SSPKG_PATCHLEVEL 4
  #define SSPKG_VERSION 2.0
+ 
+ /*
+  * Patch 1 fixes a bug with editable drawtext objects and adds a new
+  * attribute.
+  *
+  * The bug: When an editable drawtext loses focus, it destroys the panel
+  * and the panel text item that are used to edit the text.  Unfortunately,
+  * this happens far too often in normal use.  Additionally, this is
+  * annoying behavior for users too, because the editing window doesn't
+  * stick around when you move the mouse out and in to the window.
+  *
+  * The additional attribute (DRAWTEXT_NOTIFY_PROC) has been added mostly
+  * because it is very difficult to get notification of all the
+  * circumstances where the drawtext string changes.  This also makes it
+  * unnecessary to use trap the single click proc for editable drawtext
+  * objects and use the drawtext_start_edit() and drawtext_finish_edit()
+  * functions.
+  *
+  * This attribute is a function of the form:
+  * 	void callback(drawtext)
+  * 		Drawtext drawtext;
+  * and it is called when the user presses return or when the caret is
+  * removed from the edited object.  It takes one argument, drawtext, that 
+  * is the object that has been changed by the edit.  Inside this callback,
+  * you can find out what the new string is by using DRAWTEXT_STRING
+  * on the drawtext.
+  * 
+  * An update to sspkg2.0/examples/drawtext/drawtext.c is part of patch 1.
+  * The patched example program demonstrates the use of the new attribute.
+  *
+  * Source files affected by patch 1 are:
+  * 	sspkg2.0/src/drawtext.c
+  *	sspkg2.0/src/drawicon.c
+  *	sspkg2.0/src/dtext_impl.h
+  *	sspkg2.0/include/sspkg/drawobj.h
+  *	sspkg2.0/include/sspkg/patchlevel.h
+  *	sspkg2.0/examples/drawtext/drawtext.c
+  *
+  * ---------------------------------------------------------------------
+  *
+  * Patch 2, new features:
+  *
+  * GRIP_RUBBER_LINE.
+  *
+  * 	This is a new value for GRIP_RUBBER_STYLE.  This value makes the
+  *	grip draw a line from the begining of the drag to the current 
+  *	position.  The demo examples/grip/gripdemo demonstrates the
+  *	use of the attribute.
+  *
+  * --
+  * RECTOBJ_MENU_CLIENT.
+  *
+  *	You can use this attribute to get the rectobj that the mouse
+  *	was positioned over when menu_show() was called. Usage:
+  *	        rectobj = (Rectobj) xv_get(menu, RECTOBJ_MENU_CLIENT);
+  *
+  *	This is not necessarily the same as the rectobj that had the
+  *	menu attached to it via RECTOBJ_MENU, because the menu
+  *	may be attached to an ancestor of the rectobj.
+  *	
+  *	Because this attribute is set when xview's menu_show() function is
+  *	called, this is not recommended for use if the menu is pinned.
+  *
+  * ---------------------------------------------------------------------
+  * 
+  * Patch2, bug fixes:
+  * 
+  * Fixed a potential memory leak with the allocation of a GC in
+  * the drawtext.
+  * --
+  * Changed the order in which an object was marked as selected and 
+  * the invocation of the selection callback.  This permits the application
+  * to manipulate the selection status from its selection proc.
+  * --
+  * The grip was not reporting x and y positions in GRIP_DONE_PROC when
+  * the GRIP_RUBBER_STYLE was GRIP_RUBBER_NONE.  Two assignment
+  * statements were added to fix this up.
+  * --
+  * The CANVAS_SHELL_DROP_SITE was being improperly maintained due
+  * to a typo.
+  * --
+  * The size of the paint windows wasn't being tracked correctly
+  * when the paint window dimensions was not the same as the 
+  * canvas dimensions.  This caused problem with events not getting
+  * delivered, and regions not getting painted.
+  * --
+  * VFlush() was causing a core dump.  This only happened when
+  * VSetColor() commands were previously used.
+  * --
+  * There was a core dump when destroying an object that had its
+  * XV_OWNER or RECTOBJ_PARENT set to NULL.
+  * --
+  * Also, a warning:  some implementations of SunPro's math library
+  * contain bogus implementations of sincos.  The symptoms can
+  * be seen if the clockobj's hands don't look anything like the
+  * picture in the documentation.  If you have this problem, 
+  * define NO_SINCOS and recompile the library.
+  * ---------------------------------------------------------------------
+  *
+  * Patch 3, new features:
+  *
+  * DRAWICON_LAYOUT_CENTER
+  *
+  *	Setting this attribute to TRUE causes the drawicon to attempt
+  * 	to center itself when the image or text is resized.  This
+  *	avoids confusing the user when the drawicon's text has changed
+  *	size after editing.  This will not have a visible effect if the
+  *	drawicon's parent is an array_tile, tree, etc. but it will if
+  * 	it is a canvas_shell or bag.
+  *	The default is FALSE, and the behavior is as before.
+  *	examples/grip/temp_grip.c has been changed to demonstrate the
+  *	feature.
+  *
+  * ---------------------------------------------------------------------
+  * 
+  * Patch3, bug fixes:
+  * 
+  * Icons drawn with DDrawImage() could be erroneously selected due to a
+  * typo in Dmapimage().
+  * --
+  * The drawicon's geometry manager was not correctly calculating
+  * geometries when only the size of the text changed.
+  * --
+  * Added ranlib to makefile install target.
+  * ---------------------------------------------------------------------
+  * Patch 4, new features:
+  *
+  * Three new demos have been added to the examples directories:
+  *	examples/thermo	- a program that uses the drawarea to render
+  *		a thermometer.  It is constructed so that you can
+  *		rip out the thermometer portion and include it
+  *		in another program easily.
+  *
+  *	examples/color/choose - a program that creates an array of
+  *		colored drawrects, the user can select a color by
+  *		clicking on the appropriate drawrect.  This code is
+  *		written so it is easy to reuse in another program.
+  *		
+  *	examples/color/dndchoose - this is similar to the color chooser
+  *		example, but also handles drag and drop of the colors.
+  *
+  * Patch 4, bug fixes:
+  * 
+  * Setting CANVAS_SHELL_BATCH_REPAINT to TRUE on creation did not
+  * always immediately turn on repaint batching.
+  * --
+  * Children of a drawarea were not get repainted when their size or 
+  * position changed.
+  * --
+  * Setting RECTOBJ_SELECTED to TRUE on an object that is marked as exclusive
+  * select did not clear the other selections.
+  * --
+  * The drawicon was not centering either the text or the image when a
+  * size change did not effect the size of the drawicon itself.
+  */
+ 
  
diff -cr --new-file sspkg2.0//include/sspkg/rectobj.h ss/include/sspkg/rectobj.h
*** sspkg2.0//include/sspkg/rectobj.h	Fri Nov 13 04:28:05 1992
--- ss/include/sspkg/rectobj.h	Sat Mar 20 22:01:44 1993
***************
*** 6,12 ****
  #ifndef RECTOBJ_DEFINED
  #define RECTOBJ_DEFINED
  
! /* @(#) rectobj.h 1.57 92/11/10  */
  
  #include <xview/win_input.h>
  #include <xview/canvas.h>
--- 6,12 ----
  #ifndef RECTOBJ_DEFINED
  #define RECTOBJ_DEFINED
  
! /* @(#) rectobj.h 1.58 93/03/16  */
  
  #include <xview/win_input.h>
  #include <xview/canvas.h>
***************
*** 101,106 ****
--- 101,107 ----
  #define RECTOBJ_FOREGROUND_COLOR	RECTOBJ_FG
  #define RECTOBJ_BACKGROUND_COLOR	RECTOBJ_BG
  #define RECTOBJ_MENU 			XV_KEY_DATA, RECTOBJ_MENU_KEY
+ #define RECTOBJ_MENU_CLIENT		XV_KEY_DATA, RECTOBJ_MENU_KEY
  #define RECTOBJ_SELECTION_OWNER		XV_KEY_DATA, RECTOBJ_SEL_OWNER_KEY
  
  
diff -cr --new-file sspkg2.0//src/Makefile ss/src/Makefile
*** sspkg2.0//src/Makefile	Tue Feb 16 02:27:32 1993
--- ss/src/Makefile	Thu Sep 30 20:51:16 1993
***************
*** 16,23 ****
  
  INCDIR		= $(SSPKGHOME)/include/sspkg
  PRIVATEINCDIR	= $(SSPKGHOME)/src
! #CFLAGS 		= -B/usr/bin/jump/ -O -DNO_SINCOS -DNO_IRINT
! CFLAGS 		= -O -DNO_SINCOS -DNO_IRINT
  CPPFLAGS	= -I$(SSPKGHOME)/include -I$(PRIVATEINCDIR) -I$(OPENWINHOME)/include
  
  
--- 16,22 ----
  
  INCDIR		= $(SSPKGHOME)/include/sspkg
  PRIVATEINCDIR	= $(SSPKGHOME)/src
! CFLAGS 		= -O -DNO_SINCOS
  CPPFLAGS	= -I$(SSPKGHOME)/include -I$(PRIVATEINCDIR) -I$(OPENWINHOME)/include
  
  
***************
*** 80,86 ****
  include ../Make.config
  
  #all: Static Shared $(LIBDIR) $(CONFIGTARGETS) $(STATICLIBRARY) $(SHAREDLIBLN)
! all: $(STATICLIBRARY) $(SHAREDLIBLN)
  
  $(STATICLIBRARY):	$(CSOURCE_ALL:%.c=%.o)
  	ar rv $@ $(CSOURCE_ALL:%.c=%.o)
--- 79,85 ----
  include ../Make.config
  
  #all: Static Shared $(LIBDIR) $(CONFIGTARGETS) $(STATICLIBRARY) $(SHAREDLIBLN)
! all: $(STATICLIBRARY)
  
  $(STATICLIBRARY):	$(CSOURCE_ALL:%.c=%.o)
  	ar rv $@ $(CSOURCE_ALL:%.c=%.o)
***************
*** 117,131 ****
  $(LIBDIR):
  	-mkdir $(LIBDIR)
  
  
! install: $(STATICLIBRARY) $(SHAREDLIB) FORCE
  	cp $(STATICLIBRARY) $(INSTALL_DIR)/lib
  	cp $(SHAREDLIB) $(INSTALL_DIR)/lib
  	ln -s $(SHAREDLIB) $(INSTALLDIR)/libsspkg.so
  
  
  clean:
- 	-sccs clean
  	rm -rf *.o
  	rm -rf Shared Static
  	rm -f $(SHAREDLIB) $(SHAREDLIBDATA) $(STATICLIBRARY) $(SHAREDLIBLN) 
--- 116,134 ----
  $(LIBDIR):
  	-mkdir $(LIBDIR)
  
+ install: install.static FORCE
+ 	@echo "Installing static Slingshot library only"
  
! install.static: $(STATICLIBRARY) FORCE
  	cp $(STATICLIBRARY) $(INSTALL_DIR)/lib
+ 
+ install.shared: $(STATICLIBRARY) $(SHAREDLIB) FORCE
+ 	cp $(STATICLIBRARY) $(INSTALL_DIR)/lib
  	cp $(SHAREDLIB) $(INSTALL_DIR)/lib
  	ln -s $(SHAREDLIB) $(INSTALLDIR)/libsspkg.so
  
  
  clean:
  	rm -rf *.o
  	rm -rf Shared Static
  	rm -f $(SHAREDLIB) $(SHAREDLIBDATA) $(STATICLIBRARY) $(SHAREDLIBLN) 
diff -cr --new-file sspkg2.0//src/array.c ss/src/array.c
*** sspkg2.0//src/array.c	Fri Nov 13 04:31:22 1992
--- ss/src/array.c	Thu Sep 30 18:46:07 1993
***************
*** 127,133 ****
  	FLAG_SET(ainfo->aflags,	AF_AUTO_POSITION);
  	array_tile_reset_dimensions(ainfo, 4, 1);
  	calc_array_rect_size(ainfo, &rinfo->rect);
! 	rinfo->rectobj_ops = (Rectobj_ops*)&rectobj_ops;
  
  	return(XV_OK);
  }
--- 127,134 ----
  	FLAG_SET(ainfo->aflags,	AF_AUTO_POSITION);
  	array_tile_reset_dimensions(ainfo, 4, 1);
  	calc_array_rect_size(ainfo, &rinfo->rect);
! 	rinfo->rectobj_ops = rectobj_ops_find((Rectobj_ops*)&rectobj_ops);
! 	++rinfo->rectobj_ops->ref_count;
  
  	return(XV_OK);
  }
diff -cr --new-file sspkg2.0//src/bag.c ss/src/bag.c
*** sspkg2.0//src/bag.c	Fri Nov 13 04:29:02 1992
--- ss/src/bag.c	Thu Sep 30 18:46:07 1993
***************
*** 33,39 ****
  		bag_del_child_proc,
  	};
  
! 	rinfo->rectobj_ops = (Rectobj_ops*)&rectobj_ops;
  	RF_SET(rinfo, BAG_ANCHORED_FLAG);
  
  	return(XV_OK);
--- 33,40 ----
  		bag_del_child_proc,
  	};
  
! 	rinfo->rectobj_ops = rectobj_ops_find((Rectobj_ops*)&rectobj_ops);
! 	++rinfo->rectobj_ops->ref_count;
  	RF_SET(rinfo, BAG_ANCHORED_FLAG);
  
  	return(XV_OK);
diff -cr --new-file sspkg2.0//src/bkg_event.c ss/src/bkg_event.c
*** sspkg2.0//src/bkg_event.c	Fri Nov 13 04:31:45 1992
--- ss/src/bkg_event.c	Sat Mar 20 22:01:43 1993
***************
*** 5,11 ****
  
  #ifndef lint
  #ifdef sccs
! static char     sccsid[] = "@(#)bkg_event.c 1.14 92/11/12";
  #endif
  #endif
  
--- 5,11 ----
  
  #ifndef lint
  #ifdef sccs
! static char     sccsid[] = "@(#)bkg_event.c 1.15 93/03/16";
  #endif
  #endif
  
***************
*** 233,240 ****
  {
  	Menu 	menu;
  
! 	if(rectobj_upsearch(rectobj, &menu, RECTOBJ_MENU))
  		menu_show(menu, w, e, NULL);
  }
  
  
--- 233,244 ----
  {
  	Menu 	menu;
  
! 	if(rectobj_upsearch(rectobj, &menu, RECTOBJ_MENU)) {
! 		xv_set(menu,
! 			RECTOBJ_MENU_CLIENT, rectobj,
! 			NULL);
  		menu_show(menu, w, e, NULL);
+ 	}
  }
  
  
diff -cr --new-file sspkg2.0//src/box.c ss/src/box.c
*** sspkg2.0//src/box.c	Fri Nov 13 04:28:35 1992
--- ss/src/box.c	Thu Sep 30 18:46:11 1993
***************
*** 53,59 ****
  		box_del_child_proc,
  	};
  
! 	rinfo->rectobj_ops = (Rectobj_ops*)&rectobj_ops;
  
  	binfo = xv_alloc(Box_info);
  	binfo->gap = 1;
--- 53,60 ----
  		box_del_child_proc,
  	};
  
! 	rinfo->rectobj_ops = rectobj_ops_find((Rectobj_ops*)&rectobj_ops);
! 	++rinfo->rectobj_ops->ref_count;
  
  	binfo = xv_alloc(Box_info);
  	binfo->gap = 1;
diff -cr --new-file sspkg2.0//src/canshell.c ss/src/canshell.c
*** sspkg2.0//src/canshell.c	Fri Nov 13 04:28:08 1992
--- ss/src/canshell.c	Thu Sep 30 18:46:12 1993
***************
*** 5,11 ****
  
  #ifndef lint
  #ifdef sccs
! static char     sccsid[] = "@(#)canshell.c 1.50 92/11/08";
  #endif
  #endif
  
--- 5,11 ----
  
  #ifndef lint
  #ifdef sccs
! static char     sccsid[] = "@(#)canshell.c 1.52 93/04/19";
  #endif
  #endif
  
***************
*** 73,79 ****
  	 * event in repaint proc.  xv_set can override.
  	 */
  	RF_UNSET(&csinfo->rectobj_info, RF_PAINTED);
! 	csinfo->rectobj_info.rectobj_ops = (Rectobj_ops*) &rectobj_ops;
  
  	xv_set(canvas_shell, 
  		OPENWIN_SPLIT,
--- 73,80 ----
  	 * event in repaint proc.  xv_set can override.
  	 */
  	RF_UNSET(&csinfo->rectobj_info, RF_PAINTED);
! 	csinfo->rectobj_info.rectobj_ops = rectobj_ops_find((Rectobj_ops*)&rectobj_ops);
! 	++csinfo->rectobj_info.rectobj_ops->ref_count;
  
  	xv_set(canvas_shell, 
  		OPENWIN_SPLIT,
***************
*** 262,269 ****
  		if(!no_pixmap_batching) {
  			csinfo->batch_repaint = (char)*(avlist+1);
  			canvas_shell_alloc_batch_pixmap(canvas_shell, csinfo,
! 				xv_get(canvas_shell, XV_WIDTH), 
! 				xv_get(canvas_shell, XV_HEIGHT), 
  				xv_get(canvas_shell, WIN_DEPTH)); 
  		}
  		avlist = attr_next(avlist);
--- 263,270 ----
  		if(!no_pixmap_batching) {
  			csinfo->batch_repaint = (char)*(avlist+1);
  			canvas_shell_alloc_batch_pixmap(canvas_shell, csinfo,
! 				xv_get(canvas_shell, CANVAS_WIDTH), 
! 				xv_get(canvas_shell, CANVAS_HEIGHT), 
  				xv_get(canvas_shell, WIN_DEPTH)); 
  		}
  		avlist = attr_next(avlist);
***************
*** 284,292 ****
  			(RF_STATE_CREATED|RF_REPAINT|RF_CLEAR));
  		csinfo->rectobj_info.invocation_level = 1;
  		csinfo->rectobj_info.rect.r_width = 
! 				(short) xv_get(canvas_shell, XV_WIDTH);
  		csinfo->rectobj_info.rect.r_height = 
! 				(short) xv_get(canvas_shell, XV_HEIGHT);
  		if(csinfo->auto_drop_site) {
  			canvas_shell_create_drop_site(xv_get(canvas_shell, 
  				CANVAS_NTH_PAINT_WINDOW, 0));
--- 285,306 ----
  			(RF_STATE_CREATED|RF_REPAINT|RF_CLEAR));
  		csinfo->rectobj_info.invocation_level = 1;
  		csinfo->rectobj_info.rect.r_width = 
! 				(short) xv_get(canvas_shell, CANVAS_WIDTH);
  		csinfo->rectobj_info.rect.r_height = 
! 				(short) xv_get(canvas_shell, CANVAS_HEIGHT);
! 
! 		/*
! 		 * Allocating the batch pixmap here is necessary because on 
! 		 * init the sizes are zero.  Otherwise if the attribute is set 
! 		 * to TRUE in the create attrlist, the pixmap is not
! 		 * created.
! 		 */
! 		if(!no_pixmap_batching && csinfo->batch_repaint)
! 			canvas_shell_alloc_batch_pixmap(canvas_shell, csinfo,
! 				csinfo->rectobj_info.rect.r_width,
! 				csinfo->rectobj_info.rect.r_height,
! 				xv_get(canvas_shell, WIN_DEPTH)); 
! 
  		if(csinfo->auto_drop_site) {
  			canvas_shell_create_drop_site(xv_get(canvas_shell, 
  				CANVAS_NTH_PAINT_WINDOW, 0));
***************
*** 928,937 ****
  	if(csinfo->resize_proc)
  		(csinfo->resize_proc)(canvas_shell, width, height);
  	recursion_guard = FALSE;
! 	rinfo->rect.r_width = width;
! 	rinfo->rect.r_height = height;
  
! 	canvas_shell_alloc_batch_pixmap(canvas_shell, csinfo, width, height);
  	if(csinfo->auto_drop_site)
  		canvas_shell_set_drop_region(canvas_shell, &rinfo->rect);
  
--- 942,953 ----
  	if(csinfo->resize_proc)
  		(csinfo->resize_proc)(canvas_shell, width, height);
  	recursion_guard = FALSE;
! 	rinfo->rect.r_width = xv_get(canvas_shell, CANVAS_WIDTH);
! 	rinfo->rect.r_height = xv_get(canvas_shell, CANVAS_HEIGHT);
  
! 	canvas_shell_alloc_batch_pixmap(canvas_shell, csinfo,
! 			xv_get(canvas_shell, CANVAS_WIDTH),
! 			xv_get(canvas_shell, CANVAS_HEIGHT));
  	if(csinfo->auto_drop_site)
  		canvas_shell_set_drop_region(canvas_shell, &rinfo->rect);
  
***************
*** 990,998 ****
  	Proc_ptr	grab_event_proc;
  	void		*grab_arg;
  {
! 	Canvas_shell_info	*csinfo = CANVAS_SHELL_PRIVATE(canvas_shell);
  	Rectobj_info		*rinfo;
  
  	csinfo->grab_event_proc = grab_event_proc;
  	csinfo->grab_arg = grab_arg;
  	csinfo->grab_rectobj = grab_rectobj;
--- 1006,1018 ----
  	Proc_ptr	grab_event_proc;
  	void		*grab_arg;
  {
! 	Canvas_shell_info	*csinfo;
  	Rectobj_info		*rinfo;
  
+ 	if(!canvas_shell)
+ 		return;
+ 
+ 	csinfo = CANVAS_SHELL_PRIVATE(canvas_shell);
  	csinfo->grab_event_proc = grab_event_proc;
  	csinfo->grab_arg = grab_arg;
  	csinfo->grab_rectobj = grab_rectobj;
***************
*** 1019,1025 ****
  	CANVAS_EACH_PAINT_WINDOW(canvas_shell, paint_window)
  
  		drop_site = (Xv_drop_site) xv_get(paint_window, 
! 				CANVAS_SHELL_DROP_SITE_KEY);
  
  		if(drop_site)
  		  xv_set(drop_site,
--- 1039,1045 ----
  	CANVAS_EACH_PAINT_WINDOW(canvas_shell, paint_window)
  
  		drop_site = (Xv_drop_site) xv_get(paint_window, 
! 				CANVAS_SHELL_DROP_SITE);
  
  		if(drop_site)
  		  xv_set(drop_site,
***************
*** 1043,1049 ****
  		DROP_SITE_EVENT_MASK, (DND_ENTERLEAVE|DND_MOTION),
  		NULL);
  	xv_set(paint_window,
! 		CANVAS_SHELL_DROP_SITE_KEY, drop_site,
  		NULL);
  }
  
--- 1063,1069 ----
  		DROP_SITE_EVENT_MASK, (DND_ENTERLEAVE|DND_MOTION),
  		NULL);
  	xv_set(paint_window,
! 		CANVAS_SHELL_DROP_SITE, drop_site,
  		NULL);
  }
  
diff -cr --new-file sspkg2.0//src/cbox.c ss/src/cbox.c
*** sspkg2.0//src/cbox.c	Fri Nov 13 04:28:28 1992
--- ss/src/cbox.c	Thu Sep 30 18:46:12 1993
***************
*** 37,43 ****
  		NULL, /* cbox del child */
  	};
  
! 	rinfo->rectobj_ops = (Rectobj_ops*)&rectobj_ops;
  
  	return(XV_OK);
  }
--- 37,44 ----
  		NULL, /* cbox del child */
  	};
  
! 	rinfo->rectobj_ops = rectobj_ops_find((Rectobj_ops*)&rectobj_ops);
! 	++rinfo->rectobj_ops->ref_count;
  
  	return(XV_OK);
  }
diff -cr --new-file sspkg2.0//src/clock.c ss/src/clock.c
*** sspkg2.0//src/clock.c	Fri Nov 13 04:30:44 1992
--- ss/src/clock.c	Thu Sep 30 18:46:12 1993
***************
*** 111,117 ****
  			RECTOBJ_OPS, &handops,
                          NULL);
  
! 	rinfo->rectobj_ops = (Rectobj_ops*)&rectobj_ops;
  	RF_UNSET(rinfo, RF_RESTACK_CHILDREN);
  	return XV_OK;
  }
--- 111,118 ----
  			RECTOBJ_OPS, &handops,
                          NULL);
  
! 	rinfo->rectobj_ops = rectobj_ops_find((Rectobj_ops*)&rectobj_ops);
! 	++rinfo->rectobj_ops->ref_count; 
  	RF_UNSET(rinfo, RF_RESTACK_CHILDREN);
  	return XV_OK;
  }
diff -cr --new-file sspkg2.0//src/display_list.c ss/src/display_list.c
*** sspkg2.0//src/display_list.c	Fri Nov 13 04:30:17 1992
--- ss/src/display_list.c	Thu Apr  1 22:21:45 1993
***************
*** 6,12 ****
  
  #ifndef lint
  #ifdef sccs
! static  char sccsid[] = "@(#) display_list.c 1.43 92/10/20 ";
  #endif
  #endif
  
--- 6,12 ----
  
  #ifndef lint
  #ifdef sccs
! static  char sccsid[] = "@(#) display_list.c 1.45 93/03/26 ";
  #endif
  #endif
  
***************
*** 483,489 ****
  		return FALSE;
  
  	height = (int) xv_get(data->image, XV_HEIGHT);
! 	if(y+height < event_x(event))
  		return FALSE;
  
  	return TRUE;
--- 483,489 ----
  		return FALSE;
  
  	height = (int) xv_get(data->image, XV_HEIGHT);
! 	if(y+height < event_y(event))
  		return FALSE;
  
  	return TRUE;
***************
*** 692,697 ****
--- 692,700 ----
  		short color;
  		Rectobj_info *rinfo = RECTOBJ_PRIVATE(dl_arg->drawarea);
  
+ 		if(dl_arg->cms == NULL)
+ 			break;
+ 
  		if(rinfo->shared_info->cms == dl_arg->cms) {
  			color = data->data.color;
  			if(color >= rinfo->shared_info->num_colors)
***************
*** 711,716 ****
--- 714,722 ----
  		short color;
  		Rectobj_info *rinfo = RECTOBJ_PRIVATE(dl_arg->drawarea);
  
+ 		if(dl_arg->cms == NULL)
+ 			break;
+ 
  		if(rinfo->shared_info->cms == dl_arg->cms) {
  			color = data->data.color;
  			if(color >= rinfo->shared_info->num_colors)
***************
*** 758,764 ****
  		break;
  
  	case Set_Cms:
! 		dl_arg->cms = data->data.cms;
  		break;
  	}
  }
--- 764,775 ----
  		break;
  
  	case Set_Cms:
! 		if(data->data.cms != NULL)
! 			dl_arg->cms = data->data.cms;
! 		else {
! 			Rectobj_info *rinfo = RECTOBJ_PRIVATE(dl_arg->drawarea);
! 			dl_arg->cms = rinfo->shared_info->cms;
! 		}
  		break;
  	}
  }
diff -cr --new-file sspkg2.0//src/drawarea.c ss/src/drawarea.c
*** sspkg2.0//src/drawarea.c	Fri Nov 13 04:30:06 1992
--- ss/src/drawarea.c	Thu Sep 30 18:46:12 1993
***************
*** 5,11 ****
  
  #ifndef lint
  #ifdef sccs
! static char     sccsid[] = "@(#) drawarea.c 1.43 92/11/08 ";
  #endif
  #endif
  
--- 5,11 ----
  
  #ifndef lint
  #ifdef sccs
! static char     sccsid[] = "@(#) drawarea.c 1.45 93/04/19 ";
  #endif
  #endif
  
***************
*** 60,66 ****
  		rectobj_selection_event_proc,
  		drawarea_map_event_proc,
  		rectobj_set_geometry_proc,
! 		NULL,			/* manage child */
  		NULL,			/* add child */
  		NULL,			/* del child */
  		NULL,			/* new parent */
--- 60,66 ----
  		rectobj_selection_event_proc,
  		drawarea_map_event_proc,
  		rectobj_set_geometry_proc,
! 		rectobj_manage_child_proc,
  		NULL,			/* add child */
  		NULL,			/* del child */
  		NULL,			/* new parent */
***************
*** 68,75 ****
  		rectobj_simple_style_change_proc,
  	};
  		
! 	rinfo->rectobj_ops = (Rectobj_ops*)&rectobj_ops;
! 
  	dinfo = xv_alloc(Drawarea_info);
  	dinfo->gc = NULL;
  	dinfo->displayed = 0;
--- 68,75 ----
  		rectobj_simple_style_change_proc,
  	};
  		
! 	rinfo->rectobj_ops = rectobj_ops_find((Rectobj_ops*)&rectobj_ops);
! 	++rinfo->rectobj_ops->ref_count;
  	dinfo = xv_alloc(Drawarea_info);
  	dinfo->gc = NULL;
  	dinfo->displayed = 0;
***************
*** 383,388 ****
--- 383,389 ----
  	dl_arg->font = drawarea_get_font(drawarea, dinfo->font);
  	dl_arg->font_info = (XFontStruct*) xv_get(dl_arg->font, FONT_INFO);
  	dl_arg->current_mark_key = NULL;
+ 	dl_arg->cms = rinfo->shared_info ? rinfo->shared_info->cms : NULL;
  }
  
  
diff -cr --new-file sspkg2.0//src/drawicon.c ss/src/drawicon.c
*** sspkg2.0//src/drawicon.c	Fri Nov 13 04:29:54 1992
--- ss/src/drawicon.c	Thu Sep 30 18:46:12 1993
***************
*** 5,11 ****
  
  #ifndef lint
  #ifdef sccs
! static char     sccsid[] = "@(#)drawicon.c 1.24 92/11/11";
  #endif
  #endif
  
--- 5,11 ----
  
  #ifndef lint
  #ifdef sccs
! static char     sccsid[] = "@(#)drawicon.c 1.27 93/04/19";
  #endif
  #endif
  
***************
*** 32,37 ****
--- 32,38 ----
  		XV_PRIVATE(Drawicon_info, Drawicon_struct, drawicon)
  
  #define LAYOUT_VERTICAL RF_MISC_FLAG1
+ #define LAYOUT_CENTER RF_MISC_FLAG2
  
  
  Pkg_private int 	drawicon_init();
***************
*** 43,48 ****
--- 44,50 ----
  void 		drawicon_set_geometry_proc();
  void		drawicon_manage_child_proc();
  void		drawicon_single_click_proc();
+ static void	set_child_positions();
  
  /*ARGSUSED*/
  Pkg_private int
***************
*** 84,90 ****
  	drawicon_object->private_data = (Xv_opaque) dinfo;
  
  	RF_SET(rinfo, (RF_SELECTABLE | LAYOUT_VERTICAL));
! 	rinfo->rectobj_ops = (Rectobj_ops*)&rectobj_ops;
  
  /*
  	dinfo->text = xv_create(drawicon, DRAWTEXT, 
--- 86,93 ----
  	drawicon_object->private_data = (Xv_opaque) dinfo;
  
  	RF_SET(rinfo, (RF_SELECTABLE | LAYOUT_VERTICAL));
! 	rinfo->rectobj_ops = rectobj_ops_find((Rectobj_ops*)&rectobj_ops);
! 	++rinfo->rectobj_ops->ref_count;
  
  /*
  	dinfo->text = xv_create(drawicon, DRAWTEXT, 
***************
*** 140,145 ****
--- 143,149 ----
  		case DRAWTEXT_JUSTIFY:
  		case DRAWTEXT_SHOW_UNDERLINE:
  		case DRAWTEXT_LENGTH:
+ 		case DRAWTEXT_NOTIFY_PROC:
  		case DRAWTEXT_EDITABLE:
  			recalc_text_size = TRUE;
  			/* handle repaint and resizing here... */
***************
*** 235,240 ****
--- 239,251 ----
  				RF_UNSET(rinfo, LAYOUT_VERTICAL);
  			break;
  
+ 		case DRAWICON_LAYOUT_CENTER:
+ 			if(*avlist++)
+ 				RF_SET(rinfo, LAYOUT_CENTER);
+ 			else
+ 				RF_UNSET(rinfo, LAYOUT_CENTER);
+ 			break;
+ 
  		case XV_OWNER:
  		case RECTOBJ_PARENT:
  			if(rinfo->shared_info)
***************
*** 295,301 ****
  			drawtext_calc_rect(dinfo->text);
  		if(recalc_image_size)
  			drawimage_calc_rect(dinfo->image);
! 		if(recalc_image_size || recalc_image_size) {
          		Rectobj_info    *tinfo;
  		        Rectobj_info    *iinfo;
  
--- 306,312 ----
  			drawtext_calc_rect(dinfo->text);
  		if(recalc_image_size)
  			drawimage_calc_rect(dinfo->image);
! 		if(recalc_text_size || recalc_image_size) {
          		Rectobj_info    *tinfo;
  		        Rectobj_info    *iinfo;
  
***************
*** 313,318 ****
--- 324,330 ----
  				rinfo->rect.r_width = tinfo->rect.r_width + 
  					iinfo->rect.r_width + dinfo->gap;
  			}
+ 			set_child_positions(drawicon, &rinfo->rect);
  		}
  	}
  
***************
*** 356,361 ****
--- 368,374 ----
  		case DRAWTEXT_JUSTIFY:
  		case DRAWTEXT_SHOW_UNDERLINE:
  		case DRAWTEXT_LENGTH:
+ 		case DRAWTEXT_NOTIFY_PROC:
  		case DRAWTEXT_EDITABLE:
  			/* faster than: xv_get(dinfo->text, which_attr); */
  			return (Xv_opaque) 
***************
*** 374,379 ****
--- 387,395 ----
  		case DRAWICON_LAYOUT_VERTICAL:
  			return (Xv_opaque) (RF_TRUE(rinfo, LAYOUT_VERTICAL));
  
+ 		case DRAWICON_LAYOUT_CENTER:
+ 			return (Xv_opaque) (RF_TRUE(rinfo, LAYOUT_CENTER));
+ 
  		default:
  			*status = XV_ERROR;
  			return (Xv_opaque) 0;
***************
*** 484,489 ****
--- 500,509 ----
  
  	r.r_left= rinfo->rect.r_left;
  	r.r_top = rinfo->rect.r_top;
+ 	if(RF_IS_SET(RECTOBJ_PRIVATE(drawicon), LAYOUT_CENTER)) {
+ 		r.r_left += rinfo->rect.r_width/2;
+ 		r.r_top += rinfo->rect.r_height/2;
+ 	}
  	if(RF_IS_SET(RECTOBJ_PRIVATE(drawicon), LAYOUT_VERTICAL)) {
  		r.r_width = MAX(tinfo->rect.r_width, iinfo->rect.r_width);
  		r.r_height= tinfo->rect.r_height + iinfo->rect.r_height 
***************
*** 493,499 ****
  		r.r_width = tinfo->rect.r_width + iinfo->rect.r_width 
  			+ dinfo->gap;
  	}
! 
  	if( (rinfo->rect.r_width != r.r_width) ||
  	    (rinfo->rect.r_height!= r.r_height) )
  		rectobj_geometry_manage(drawicon, &r);
--- 513,522 ----
  		r.r_width = tinfo->rect.r_width + iinfo->rect.r_width 
  			+ dinfo->gap;
  	}
! 	if(RF_IS_SET(RECTOBJ_PRIVATE(drawicon), LAYOUT_CENTER)) {
! 		r.r_left -= r.r_width/2;
! 		r.r_top -= r.r_height/2;
! 	}
  	if( (rinfo->rect.r_width != r.r_width) ||
  	    (rinfo->rect.r_height!= r.r_height) )
  		rectobj_geometry_manage(drawicon, &r);
diff -cr --new-file sspkg2.0//src/drawimage.c ss/src/drawimage.c
*** sspkg2.0//src/drawimage.c	Fri Nov 13 04:29:33 1992
--- ss/src/drawimage.c	Thu Sep 30 18:46:13 1993
***************
*** 56,62 ****
  	drawimage_object = (Drawimage_struct*) drawimage;
  	drawimage_object->private_data = (Xv_opaque) dinfo;
  
! 	rinfo->rectobj_ops = (Rectobj_ops*)&rectobj_ops;
  	RF_SET(rinfo, RF_SELECTABLE);
  
  	return(XV_OK);
--- 56,63 ----
  	drawimage_object = (Drawimage_struct*) drawimage;
  	drawimage_object->private_data = (Xv_opaque) dinfo;
  
! 	rinfo->rectobj_ops = rectobj_ops_find((Rectobj_ops*)&rectobj_ops);
! 	++rinfo->rectobj_ops->ref_count;
  	RF_SET(rinfo, RF_SELECTABLE);
  
  	return(XV_OK);
diff -cr --new-file sspkg2.0//src/drawline.c ss/src/drawline.c
*** sspkg2.0//src/drawline.c	Fri Nov 13 04:29:19 1992
--- ss/src/drawline.c	Thu Sep 30 18:46:13 1993
***************
*** 97,103 ****
  
  	dinfo->arrow[1] = dinfo->arrow[0];
  
! 	RECTOBJ_PRIVATE(drawline)->rectobj_ops = (Rectobj_ops*)&rectobj_ops;
  
  	return(XV_OK);
  }
--- 97,104 ----
  
  	dinfo->arrow[1] = dinfo->arrow[0];
  
! 	RECTOBJ_PRIVATE(drawline)->rectobj_ops = rectobj_ops_find((Rectobj_ops*)&rectobj_ops);
! 	RECTOBJ_PRIVATE(drawline)->rectobj_ops->ref_count++;
  
  	return(XV_OK);
  }
diff -cr --new-file sspkg2.0//src/drawrect.c ss/src/drawrect.c
*** sspkg2.0//src/drawrect.c	Fri Nov 13 04:29:10 1992
--- ss/src/drawrect.c	Thu Sep 30 18:46:13 1993
***************
*** 70,76 ****
  	drawrect_object = (Drawrect_struct*) drawrect;
  	drawrect_object->private_data = (Xv_opaque) dinfo;
  
! 	rinfo->rectobj_ops = (Rectobj_ops*)&rectobj_ops;
  
  	dinfo->border2 = 1;
  	dinfo->bg2 = -1;
--- 70,77 ----
  	drawrect_object = (Drawrect_struct*) drawrect;
  	drawrect_object->private_data = (Xv_opaque) dinfo;
  
! 	rinfo->rectobj_ops = rectobj_ops_find((Rectobj_ops*)&rectobj_ops);
! 	++rinfo->rectobj_ops->ref_count;
  
  	dinfo->border2 = 1;
  	dinfo->bg2 = -1;
diff -cr --new-file sspkg2.0//src/drawtext.c ss/src/drawtext.c
*** sspkg2.0//src/drawtext.c	Fri Nov 13 04:29:42 1992
--- ss/src/drawtext.c	Thu Sep 30 18:46:13 1993
***************
*** 5,11 ****
  
  #ifndef lint
  #ifdef sccs
! static char     sccsid[] = "@(#)drawtext.c 1.36 92/11/11";
  #endif
  #endif
  
--- 5,11 ----
  
  #ifndef lint
  #ifdef sccs
! static char     sccsid[] = "@(#)drawtext.c 1.38 93/03/16";
  #endif
  #endif
  
***************
*** 62,68 ****
  	drawtext_object = (Drawtext_struct*) drawtext;
  	drawtext_object->private_data = (Xv_opaque) dinfo;
  
! 	rinfo->rectobj_ops = (Rectobj_ops*)&rectobj_ops;
  	RF_SET(rinfo, RF_SELECTABLE);
  
  	return(XV_OK);
--- 62,69 ----
  	drawtext_object = (Drawtext_struct*) drawtext;
  	drawtext_object->private_data = (Xv_opaque) dinfo;
  
! 	rinfo->rectobj_ops = rectobj_ops_find((Rectobj_ops*)&rectobj_ops);
! 	++rinfo->rectobj_ops->ref_count; 
  	RF_SET(rinfo, RF_SELECTABLE);
  
  	return(XV_OK);
***************
*** 98,103 ****
--- 99,105 ----
  		case DRAWTEXT_JUSTIFY:
  		case DRAWTEXT_SHOW_UNDERLINE:
  		case DRAWTEXT_LENGTH:
+ 		case DRAWTEXT_NOTIFY_PROC:
  		case DRAWTEXT_EDITABLE:
  		case XV_WIDTH:
  		case XV_HEIGHT:
***************
*** 211,216 ****
--- 213,222 ----
  			dinfo->disp_length = (short) value;
  			break;
  
+ 		case DRAWTEXT_NOTIFY_PROC:
+ 			dinfo->notify_proc = (Proc_ptr) value;
+ 			break;
+ 
  		case XV_WIDTH:
  			dinfo->set_width = (short) value;
  			break;
***************
*** 304,309 ****
--- 310,318 ----
  		case DRAWTEXT_LENGTH:
  			return (Xv_opaque) dinfo->disp_length;
  
+ 		case DRAWTEXT_NOTIFY_PROC:
+ 			return (Xv_opaque) dinfo->notify_proc;
+ 
  		default:
  			*status = XV_ERROR;
  			return (Xv_opaque) 0;
***************
*** 352,359 ****
  	GC		gc;
  	register int	x, y;
  
- 	gc = XCreateGC(dpy, win, 0, 0);
- 
  	/* assert (rinfo->shared_info); */
  	/* assert (dinfo->font_info); */
  
--- 361,366 ----
***************
*** 360,365 ****
--- 367,374 ----
  	if(!dinfo->font_info)
  		return;
  
+ 	gc = XCreateGC(dpy, win, 0, 0);
+ 
  	XSetFont(dpy, gc, dinfo->font_info->fid);
  
  	if(xrects && xrects->count)
***************
*** 438,443 ****
--- 447,490 ----
  }
  
  
+ /* pick a "random" key */
+ #define FOCUS_DRAWTEXT_KEY XV_KEY_DATA, (1<<20)
+ 
+ /*
+  * Hack in a subclass to detect when the item loses the caret.
+  * This is unfortunately forced, because it is impossible to
+  * detect this.  The function frame_kbd_use sets WIN_REMOVE_CARET
+  * on the window that is losing the caret.  This is an event on
+  * another window, so the client never sees this.
+  */
+ static Xv_opaque
+ panel_subclass_set(panel, avlist)
+ 	Panel			panel;
+ 	register Attr_avlist	avlist;
+ {
+ 	Drawtext focus_drawtext = xv_get(panel, FOCUS_DRAWTEXT_KEY);
+ 
+ 	if(*avlist == WIN_REMOVE_CARET) {
+ 		if(focus_drawtext)
+ 			drawtext_finish_edit(focus_drawtext, TRUE);
+ 	}
+ 
+ 	return(XV_OK);
+ }
+ 
+ static Xv_pkg panel_with_focus_hack = {
+ 	"Panel_with_focus_hack",
+ 	ATTR_PKG_PANEL,
+ 	sizeof(Grip_struct),
+ 	&xv_panel_pkg,
+ 	NULL,
+ 	panel_subclass_set,
+ 	NULL,
+ 	NULL,
+ 	NULL
+ };
+ 
+ 
  
  void
  drawtext_finish_edit(drawtext, use_new_string)
***************
*** 455,460 ****
--- 502,509 ----
  		return;
  
  	if(use_new_string) {
+ 		Drawtext_info	*dinfo = DRAWTEXT_PRIVATE(drawtext);
+ 
  	        new_string = (char*) xv_get(rinfo->shared_info->edit_item, 
  				PANEL_VALUE);
  
***************
*** 462,467 ****
--- 511,519 ----
  			xv_set(drawtext,
  				DRAWTEXT_STRING, new_string,
  				NULL);
+ 
+ 		if(dinfo->notify_proc)
+ 			(dinfo->notify_proc)(drawtext);
  	}
  
  	xv_destroy_safe(rinfo->shared_info->edit_item);
***************
*** 472,479 ****
  	rinfo->shared_info->edit_item = NULL;
  }
  
- /* pick a "random" key */
- #define FOCUS_DRAWTEXT_KEY XV_KEY_DATA, (1<<20)
  
  Panel_setting
  drawtext_end_edit_proc(item, event)
--- 524,529 ----
***************
*** 511,519 ****
  			xv_set(rinfo->shared_info->edit_panel,
  				WIN_SET_FOCUS,
  				NULL);
- 
- 		if(event_id(event) == KBD_DONE)
- 			drawtext_finish_edit(drawtext, TRUE);
  	  }
  	}
  
--- 561,566 ----
***************
*** 536,542 ****
  
  	rinfo->shared_info->focus_drawtext = drawtext;
  
! 	rinfo->shared_info->edit_panel = xv_create(paint_window, PANEL, 
  		XV_SHOW,	FALSE,
  		WIN_FONT,	(dinfo->font ? dinfo->font :
                                  (rinfo->shared_info ? rinfo->shared_info->font :                                xv_find(NULL, FONT, NULL))), 
--- 583,589 ----
  
  	rinfo->shared_info->focus_drawtext = drawtext;
  
! 	rinfo->shared_info->edit_panel = xv_create( paint_window, &panel_with_focus_hack,
  		XV_SHOW,	FALSE,
  		WIN_FONT,	(dinfo->font ? dinfo->font :
                                  (rinfo->shared_info ? rinfo->shared_info->font :                                xv_find(NULL, FONT, NULL))), 
***************
*** 639,642 ****
--- 686,691 ----
  			NULL);
  	}
  }
+ 
+ 
  
diff -cr --new-file sspkg2.0//src/dtext_impl.h ss/src/dtext_impl.h
*** sspkg2.0//src/dtext_impl.h	Fri Nov 13 04:28:10 1992
--- ss/src/dtext_impl.h	Sat Mar 20 21:58:43 1993
***************
*** 6,12 ****
  #ifndef DTEXT_IMPL_DEFINED
  #define DTEXT_IMPL_DEFINED
  
! /* @(#)dtext_impl.h 1.5 92/07/08 */
  
  
  typedef struct drawtext_info {
--- 6,12 ----
  #ifndef DTEXT_IMPL_DEFINED
  #define DTEXT_IMPL_DEFINED
  
! /* @(#)dtext_impl.h 1.6 92/12/09 */
  
  
  typedef struct drawtext_info {
***************
*** 13,18 ****
--- 13,19 ----
  	char		*string;
  	Xv_font		font;
  	XFontStruct	*font_info;
+ 	Proc_ptr	notify_proc;
  	Drawtext_justify_style justify;
  	short		set_width;	/* shadow for XV_WIDTH, set by app */
  	short		set_height;	/* shadow for XV_HEIGHT, set by app */
diff -cr --new-file sspkg2.0//src/grip.c ss/src/grip.c
*** sspkg2.0//src/grip.c	Fri Nov 13 04:30:54 1992
--- ss/src/grip.c	Thu Sep 30 18:46:14 1993
***************
*** 5,11 ****
  
  #ifndef lint
  #ifdef sccs
! static char sccsid[] = "@(#)grip.c 1.34 92/11/10";
  #endif
  #endif
  
--- 5,11 ----
  
  #ifndef lint
  #ifdef sccs
! static char sccsid[] = "@(#)grip.c 1.35 93/03/16";
  #endif
  #endif
  
***************
*** 101,107 ****
  	ginfo->max_y = 32000;
  	ginfo->rubber_style = GRIP_RUBBER_NONE;
  
! 	rinfo->rectobj_ops = &rectobj_ops;
  	RF_UNSET(rinfo, RF_SELECTABLE);
  
  	return(XV_OK);
--- 101,109 ----
  	ginfo->max_y = 32000;
  	ginfo->rubber_style = GRIP_RUBBER_NONE;
  
! 	rinfo->rectobj_ops = rectobj_ops_find(&rectobj_ops);
! 	++rinfo->rectobj_ops->ref_count;
! 
  	RF_UNSET(rinfo, RF_SELECTABLE);
  
  	return(XV_OK);
***************
*** 465,470 ****
--- 467,474 ----
  					XV_X, new_x,
  					XV_Y, new_y, 
  					NULL);
+ 				gminfo->last_x = new_x;
+ 				gminfo->last_y = new_y;
  			} else {
  				/* erase */
  				if(!gminfo->first_time)
***************
*** 500,505 ****
--- 504,511 ----
  	start_rect		= (Rect*) xv_get(grip, XV_RECT);
  	grip_move_info.grip		= grip;
  	grip_move_info.adjust		= adjust;
+ 	grip_move_info.last_x		= btn_down_x;
+ 	grip_move_info.last_y		= btn_down_y;
  
  	if(ginfo->rubber_style == GRIP_RUBBER_NONE) {
  		grip_move_info.btn_down_x = btn_down_x;
***************
*** 681,686 ****
--- 687,704 ----
  				gminfo->xor_gc,
  				gminfo->last_x + half_width, y1, 
  				gminfo->last_x + half_width, y2);
+ 			break;
+ 
+ 		case GRIP_RUBBER_LINE:
+ 			x1 = gminfo->last_x + half_width;
+ 			y1 = gminfo->last_y + half_height;
+ 			x2 = gminfo->btn_down_x;
+ 			y2 = gminfo->btn_down_y;
+ 			XDrawLine(
+ 				rinfo->shared_info->dpy,
+ 				(XID) xv_get(xv_win, XV_XID),
+ 				gminfo->xor_gc,
+ 				x1, y1, x2, y2);
  			break;
  
  		/* unimplemented...
diff -cr --new-file sspkg2.0//src/rectobj.c ss/src/rectobj.c
*** sspkg2.0//src/rectobj.c	Tue Feb 16 01:06:55 1993
--- ss/src/rectobj.c	Thu Sep 30 20:32:59 1993
***************
*** 5,11 ****
  
  #ifndef lint
  #ifdef sccs
! static char     sccsid[] = "@(#)rectobj.c 1.80 92/11/08";
  #endif
  #endif
  
--- 5,11 ----
  
  #ifndef lint
  #ifdef sccs
! static char     sccsid[] = "@(#)rectobj.c 1.82 93/04/19";
  #endif
  #endif
  
***************
*** 30,35 ****
--- 30,36 ----
  
  int	rectobj_global_invocation_level = 0;
  
+ 
  /*
   * This struct provides a indexed version of Rectobj_ops.
   * Two restrictions: 
***************
*** 47,52 ****
--- 48,182 ----
  		(ATTR_ORDINAL(attr) - ATTR_ORDINAL(RECTOBJ_PAINT_PROC))
  
  
+ /****************************************************************************
+  *  Automatically shared RECTOBJ_OPS tables.
+  *
+  *  J. Michael Lake, NEC Research Institute, Princeton, NJ  08540
+  *  jmlake@research.nj.nec.com  (jmlake@uiuc.edu after 20 August 1993)
+  *  03 August 1993
+  ****************************************************************************/
+ 
+ typedef struct _o_h_e {
+ 	int		pre_hash;
+ 	struct _o_h_e	*next;
+ 	Rectobj_ops 	*r;
+ } Rectobj_ops_list;
+ 
+ #define TABLE_SIZE         (101)
+ #define SELECTION_PROC_IDX (RECTOBJ_PROCS_ATTR_INDEX(RECTOBJ_SELECTION_PROC))
+ 
+ static Rectobj_ops_list	*hash_table_head[TABLE_SIZE] = { NULL };
+ 
+ static      int          rectobj_ops_diff_hash();
+ Pkg_private Rectobj_ops *rectobj_ops_find     ();
+ static      Rectobj_ops *rectobj_ops_find_diff();
+ 
+ static int
+ rectobj_ops_diff_hash(r, func, func_value)
+ 	Rectobj_ops	*r;
+ 	int		func;
+ 	Proc_ptr	func_value;
+ {
+ 	int rv;
+ 
+ 	switch (func) {
+ 	case RECTOBJ_PROCS_ATTR_INDEX(RECTOBJ_EVENT_PROC)	:
+ 		rv = ( (  ((int)r->manage_child_proc  )
+ 			+ ((int)func_value            )
+ 			+ ((int)r->single_click_proc  )
+ 			+ ((int)r->dbl_click_proc     )
+ 			+ ((int)r->paint_proc         )) >> 4);
+ 		break;
+ 	case RECTOBJ_PROCS_ATTR_INDEX(RECTOBJ_MANAGE_CHILD_PROC):
+ 		rv = ( (  ((int)func_value            )
+ 			+ ((int)r->event_proc         )
+ 			+ ((int)r->single_click_proc  )
+ 			+ ((int)r->dbl_click_proc     )
+ 			+ ((int)r->paint_proc         )) >> 4);
+ 		break;
+ 	case RECTOBJ_PROCS_ATTR_INDEX(RECTOBJ_SINGLE_CLICK_PROC):
+ 		rv = ( (  ((int)r->manage_child_proc  )
+ 			+ ((int)r->event_proc         )
+ 			+ ((int)func_value            )
+ 			+ ((int)r->dbl_click_proc     )
+ 			+ ((int)r->paint_proc         )) >> 4);
+ 		break;
+ 	case RECTOBJ_PROCS_ATTR_INDEX(RECTOBJ_DBL_CLICK_PROC)	:
+ 		rv = ( (  ((int)r->manage_child_proc  )
+ 			+ ((int)r->event_proc         )
+ 			+ ((int)r->single_click_proc  )
+ 			+ ((int)func_value            )
+ 			+ ((int)r->paint_proc         )) >> 4);
+ 		break;
+ 	case RECTOBJ_PROCS_ATTR_INDEX(RECTOBJ_PAINT_PROC)	:
+ 		rv = ( (  ((int)r->manage_child_proc  )
+ 			+ ((int)r->event_proc         )
+ 			+ ((int)r->single_click_proc  )
+ 			+ ((int)r->dbl_click_proc     )
+ 			+ ((int)func_value            )) >> 4);
+ 		break;
+ 	default:
+ 		rv = ( (  ((int)r->manage_child_proc  )
+ 			+ ((int)r->event_proc         )
+ 			+ ((int)r->single_click_proc  )
+ 			+ ((int)r->dbl_click_proc     )
+ 			+ ((int)r->paint_proc         )) >> 4);
+ 	}
+ 
+ 	return (0x0000ffff & rv);
+ }
+ 
+ 
+ Pkg_private Rectobj_ops *
+ rectobj_ops_find(r)
+ 	Rectobj_ops	*r;
+ {
+ 	/* a convenience routine, used in <subclass>_init() only */
+ 	return rectobj_ops_find_diff(r, 0, r->paint_proc);
+ }
+ 
+ static Rectobj_ops *
+ rectobj_ops_find_diff(r, func, func_value)
+ 	Rectobj_ops		*r;
+ 	int			func;
+ 	Proc_ptr		func_value;
+ {
+ 	int			pre_hash, hash, i, found ;
+ 	Rectobj_ops_list	*temp;
+ 	Rectobj_ops_array 	*ra = (Rectobj_ops_array*)r;
+ 
+ 	pre_hash = rectobj_ops_diff_hash(r, func, func_value);
+ 	hash     = pre_hash % TABLE_SIZE;
+ 	temp     = hash_table_head[ hash ];
+ 	for(found = 0; !found && temp; temp = temp->next) {
+ 		Rectobj_ops_array *t = (Rectobj_ops_array *)temp->r;
+ 
+ 		if (temp->pre_hash != pre_hash  ) continue;
+ 		if (t->proc[func]  != func_value) continue;
+ 		found = 1;
+ 		for(i = 0; found && (i <= SELECTION_PROC_IDX); ++i) {
+ 			if (func == i                ) continue;
+ 			if (ra->proc[i] != t->proc[i]) found = 0;
+ 		}
+ 		if (found) return temp->r;
+ 	}
+ 
+ 	if (!(temp = (Rectobj_ops_list*)malloc(sizeof(Rectobj_ops_list)))) {
+ 		return NULL;	/* could not allocate space for table */
+ 	} else {
+ 		temp->pre_hash = pre_hash;
+ 		temp->next     = hash_table_head[ hash ];
+ 		if (temp->r    = (Rectobj_ops*)malloc(sizeof(Rectobj_ops))) {
+ 			*temp->r           = *r;  /* copy it.... */
+ 			temp->r->ref_count =  1;  /* claim it... */
+ 			((Rectobj_ops_array*)temp->r)->proc[func] = func_value;
+ 		}
+ 		hash_table_head[hash] = temp;
+ 	}
+ 	return temp->r;
+ }
+ 
+ 
  /*ARGSUSED*/
  Pkg_private int
  rectobj_init(parent, rectobj, avlist)
***************
*** 57,63 ****
  	Rectobj_info	*rinfo;
  	Rectobj_struct	*rectobj_object;
  	static Rectobj_ops rectobj_ops = {
! 		1000,
  		rectobj_paint_proc,
  		rectobj_event_proc,
  		rectobj_map_event_proc,
--- 187,193 ----
  	Rectobj_info	*rinfo;
  	Rectobj_struct	*rectobj_object;
  	static Rectobj_ops rectobj_ops = {
! 		1,
  		rectobj_paint_proc,
  		rectobj_event_proc,
  		rectobj_map_event_proc,
***************
*** 72,78 ****
  	rectobj_object->private_data = (Xv_opaque) rinfo;
  
  	rectobj_internal_init(rectobj, rinfo);
! 	rinfo->rectobj_ops = (Rectobj_ops*)&rectobj_ops;
  	rinfo->parent = parent;
  
  	if(parent) {
--- 202,209 ----
  	rectobj_object->private_data = (Xv_opaque) rinfo;
  
  	rectobj_internal_init(rectobj, rinfo);
! 	rinfo->rectobj_ops = rectobj_ops_find((Rectobj_ops*)&rectobj_ops);
! 	++rinfo->rectobj_ops->ref_count;
  	rinfo->parent = parent;
  
  	if(parent) {
***************
*** 218,224 ****
  		case RECTOBJ_SELECTED:
  			if(*avlist++) {
  				rectobj_add_to_selected_list(rectobj, 
! 					FALSE, NULL);
  				rectobj_set_paint_style(rectobj, NULL, 
  					RECTOBJ_HIGHLIGHT);
  			} else {
--- 349,355 ----
  		case RECTOBJ_SELECTED:
  			if(*avlist++) {
  				rectobj_add_to_selected_list(rectobj, 
! 					RF_IS_SET(rinfo, RF_EXCLUSIVE_SELECT), NULL);
  				rectobj_set_paint_style(rectobj, NULL, 
  					RECTOBJ_HIGHLIGHT);
  			} else {
***************
*** 693,699 ****
  	RF_SET(rinfo, RF_STATE_DESTROYING);
  	RF_UNSET(rinfo, RF_STATE_CREATED);
  	
! 	if(RF_IS_SET(rinfo, RF_HAS_EVENT_GRAB))
  		rectobj_set_event_grab(canvas_shell, rectobj, 0, 0);
  
  	rectobj_destroy_children(rectobj);
--- 824,830 ----
  	RF_SET(rinfo, RF_STATE_DESTROYING);
  	RF_UNSET(rinfo, RF_STATE_CREATED);
  	
! 	if(canvas_shell && RF_IS_SET(rinfo, RF_HAS_EVENT_GRAB))
  		rectobj_set_event_grab(canvas_shell, rectobj, 0, 0);
  
  	rectobj_destroy_children(rectobj);
***************
*** 710,719 ****
  	if(canvas_shell)
  		rectobj_set_delay_repaint(canvas_shell, FALSE);
  
! 	if(rinfo->rectobj_ops->ref_count == 1)
  		free(rinfo->rectobj_ops);
! 	else
  		rinfo->rectobj_ops->ref_count--;
  
  	free(rinfo);
  	return XV_OK;
--- 841,851 ----
  	if(canvas_shell)
  		rectobj_set_delay_repaint(canvas_shell, FALSE);
  
! 	if(rinfo->rectobj_ops->ref_count == 1) {
  		free(rinfo->rectobj_ops);
! 	} else {
  		rinfo->rectobj_ops->ref_count--;
+ 	}
  
  	free(rinfo);
  	return XV_OK;
***************
*** 796,809 ****
  	int		which;
  	Proc_ptr	fn;
  {
  	if(rinfo->rectobj_ops->ref_count != 1) {
  		/*
  		 * Shared rectobj_ops:  copy and set private to this rectobj.
  		 */
  		Rectobj_ops	*tmp;
! 		tmp = (Rectobj_ops*) malloc(sizeof(Rectobj_ops));
! 		*tmp = *(rinfo->rectobj_ops);
! 		tmp->ref_count = 1;
  		rinfo->rectobj_ops = tmp;
  	}
  
--- 928,941 ----
  	int		which;
  	Proc_ptr	fn;
  {
+ 
  	if(rinfo->rectobj_ops->ref_count != 1) {
  		/*
  		 * Shared rectobj_ops:  copy and set private to this rectobj.
  		 */
  		Rectobj_ops	*tmp;
! 		tmp = rectobj_ops_find_diff(rinfo->rectobj_ops, which, fn);
! 		++tmp->ref_count;
  		rinfo->rectobj_ops = tmp;
  	}
  
diff -cr --new-file sspkg2.0//src/rectobj_impl.h ss/src/rectobj_impl.h
*** sspkg2.0//src/rectobj_impl.h	Fri Nov 13 04:28:11 1992
--- ss/src/rectobj_impl.h	Thu Sep 30 18:46:19 1993
***************
*** 132,147 ****
  
  } Rectobj_info;
  
! extern void	rectobj_internal_init();
! extern void	rectobj_paint_proc();
! extern void	rectobj_event_proc();
! extern Rectobj	rectobj_map_event_proc();
! extern void	rectobj_manage_child_proc();
! extern void	rectobj_set_geometry_proc();
! extern void	rectobj_add_child_proc();
! extern void	rectobj_del_child_proc();
! extern void	rectobj_finish_set_proc();
! extern void	rectobj_set_delay_repaint();
  
  extern void	bag_set_geometry_proc();
  extern void	bag_manage_child_proc();
--- 132,148 ----
  
  } Rectobj_info;
  
! extern void		rectobj_internal_init();
! extern void		rectobj_paint_proc();
! extern void		rectobj_event_proc();
! extern Rectobj		rectobj_map_event_proc();
! extern void		rectobj_manage_child_proc();
! extern void		rectobj_set_geometry_proc();
! extern void		rectobj_add_child_proc();
! extern void		rectobj_del_child_proc();
! extern void		rectobj_finish_set_proc();
! extern void		rectobj_set_delay_repaint();
! extern Rectobj_ops 	*rectobj_ops_find();
  
  extern void	bag_set_geometry_proc();
  extern void	bag_manage_child_proc();
diff -cr --new-file sspkg2.0//src/selection.c ss/src/selection.c
*** sspkg2.0//src/selection.c	Fri Nov 13 04:32:00 1992
--- ss/src/selection.c	Sat Mar 20 22:01:44 1993
***************
*** 5,11 ****
  
  #ifndef lint
  #ifdef sccs
! static char     sccsid[] = "@(#)selection.c 1.18 92/10/22";
  #endif
  #endif
  
--- 5,11 ----
  
  #ifndef lint
  #ifdef sccs
! static char     sccsid[] = "@(#)selection.c 1.19 93/03/16";
  #endif
  #endif
  
***************
*** 129,134 ****
--- 129,135 ----
  		    new_node->handle = (void *) new;
  		    selected_list = (Rectobj_list *)
  			list_concat(selected_list, new_node);
+ 		    RF_SET(rinfo, RF_SELECTED);
  		    call_selection_proc(new, TRUE, event);
  
  		   /*
***************
*** 145,151 ****
  			rectobj_selection_own(sel_owner, event, TRUE);
  			curr_owner = sel_owner;
  		    }
- 		    RF_SET(rinfo, RF_SELECTED);
  		    num_selected++;
  		}
  	}
--- 146,151 ----
diff -cr --new-file sspkg2.0//src/tacho.c ss/src/tacho.c
*** sspkg2.0//src/tacho.c	Sun Dec  6 04:15:21 1992
--- ss/src/tacho.c	Thu Sep 30 18:46:19 1993
***************
*** 54,61 ****
  #define SINCOS(_a,_b,_c)	sincos(_a, &_b, &_c)
  #endif
  
! #if defined(linux) && defined(NO_IRINT)
! #define irint(x) (short)(x)
  #endif
  
  /* ARGSUSED */
--- 54,62 ----
  #define SINCOS(_a,_b,_c)	sincos(_a, &_b, &_c)
  #endif
  
! #if defined(__linux)
! /* irint() is missing from linux libs. Fake it somehow (this is a guess) */
! static short irint(v) double v; { return (short)rint(v); }
  #endif
  
  /* ARGSUSED */
***************
*** 90,96 ****
  	rinfo->rect.r_height = 40;
  	tinfo->arc_height = 40;
  	tinfo->bg2 = -1;
! 	rinfo->rectobj_ops = (Rectobj_ops*)&rectobj_ops;
  
  	return XV_OK;
  }
--- 91,98 ----
  	rinfo->rect.r_height = 40;
  	tinfo->arc_height = 40;
  	tinfo->bg2 = -1;
! 	rinfo->rectobj_ops = rectobj_ops_find((Rectobj_ops*)&rectobj_ops);
! 	++rinfo->rectobj_ops->ref_count;
  
  	return XV_OK;
  }
diff -cr --new-file sspkg2.0//src/tree.c ss/src/tree.c
*** sspkg2.0//src/tree.c	Fri Nov 13 04:31:07 1992
--- ss/src/tree.c	Thu Sep 30 18:46:19 1993
***************
*** 61,67 ****
  	tree_object = (Tree_struct*) tree;
  	tree_object->private_data = (Xv_opaque) tinfo;
  
! 	RECTOBJ_PRIVATE(tree)->rectobj_ops = (Rectobj_ops*)&rectobj_ops;
  
  	tinfo->parent_distance = 30;
  	tinfo->layout = TREE_LAYOUT_HORIZONTAL;
--- 61,68 ----
  	tree_object = (Tree_struct*) tree;
  	tree_object->private_data = (Xv_opaque) tinfo;
  
! 	RECTOBJ_PRIVATE(tree)->rectobj_ops = rectobj_ops_find((Rectobj_ops*)&rectobj_ops);
! 	++RECTOBJ_PRIVATE(tree)->rectobj_ops->ref_count;
  
  	tinfo->parent_distance = 30;
  	tinfo->layout = TREE_LAYOUT_HORIZONTAL;
diff -cr --new-file sspkg2.0//ss-jmlake@uiuc.edu.diff ss/ss-jmlake@uiuc.edu.diff
*** sspkg2.0//ss-jmlake@uiuc.edu.diff
--- ss/ss-jmlake@uiuc.edu.diff	Thu Sep 30 20:36:04 1993
***************
*** 0 ****
--- 1,827 ----
+ From hal%pollux.cs.uga.edu@bluese2.ericsson.fi Mon Sep 27 18:13 EET 1993
+ Received: from bluese2.ericsson.fi by bluese1.ericsson.fi with SMTP
+ 	(16.6/16.4/LMFX-1.2) id AA17084; Mon, 27 Sep 93 18:13:25 +0300
+ Return-Path: <hal%pollux.cs.uga.edu@bluese2.ericsson.fi>
+ Received: from mailgate.ericsson.se by bluese2.lmf.ericsson.se with SMTP
+ 	(16.6/BLUESE2-0.7) id AA16660; Mon, 27 Sep 93 18:13:22 +0300
+ Received: from pollux.cs.uga.edu by mailgate.ericsson.se (4.1/SMI-4.1-MAILGATE1.14)
+ 	id AA25595; Mon, 27 Sep 93 16:13:12 +0100
+ Received:  by pollux.cs.uga.edu (4.1/25-eef)
+ 	id AA07599; Mon, 27 Sep 93 11:13:01 EDT
+ Date: Mon, 27 Sep 93 11:13:01 EDT
+ From: Hal N. Brooks <hal%pollux.cs.uga.edu@bluese2.ericsson.fi>
+ Message-Id: <9309271513.AA07599@pollux.cs.uga.edu>
+ To: lmfken@bluese2.ericsson.fi
+ Subject: Re: SlingShot DRAWTEXT bug under Linux
+ Status: RO
+ 
+  
+ >> I know you've already gotten out XView 3.2, so this is
+ >> not only too little, but too late.  Anyway, I just sent
+ >> this to Brian Warkentine, so I thought I'd share it with
+ >> you, too.  I don't know if you actually use SlingShot, but
+ >> if you do I thought you might be interested.  This is really
+ >> only a problem under Linux, I guess, because the malloc/free
+ >> routines are so fragile.  Still, it's a bug in SlingShot.
+ >> 
+ >> I haven't had a chance to try out your new XView package.
+ >> First I have to upgrade from 0.99pl9, libc 4.3.3, and XFree86 1.2.
+ >> Stability has its advantages, and your new XView is the only
+ >> good reason I've had to get back with the game of staying current!
+ >
+ >Thanks for the info. I have discovered some rather serious bugs in
+ >olvm and the UICSS DLL library. These are my goofs, not generic ones.
+ >Nobody else has apparently noticed them yet, but I think it'll only be
+ >a question of hours now judging by the number of messages pouring in
+ >about xview. So I will sooner or later have to do a bugfix release.
+ >If B.Warkentine fixes the problem quickly (within days) I will of course
+ >include the fix.
+ >
+ >regards,
+ >Kenneth
+ 
+ Kenneth,
+ 
+ Below is a patch that J. Michael Lake sent to Warkentine, and then
+ Warkentine sent to me.  Warkentine said he hasn't had time to look
+ at it yet, but I compiled it and in addition to providing some
+ enhancements, it seems to have solved the problem of static
+ memory being free'd.
+ 
+ On the one hand I can see that incorporating such unofficial patches
+ is bad.  On the other hand, because of the ease with which the Linux
+ malloc/free routines corrupt the heap when used incorrectly, I can
+ see that this could be good.  I think it's unlikely that Warkentine
+ will release any new fixes with the next few days.
+ 
+ On another topic, this doesn't fix the problem with the embedding
+ seal warning seen with the editable drawtext field of the SlingShot
+ drawtext demo.  I thought I'd have another look at that today.
+ 
+ First I'll include a correspondence with J. Michael Lake, in which
+ he replies to suggestion I made about a memory leak and explains
+ the patch in some detail.  Then the patch itself.
+ 
+ =============================================================================
+  Hal N. Brooks     Voice: (706) 546-7792     Internet: hal@pollux.cs.uga.edu
+ =============================================================================
+ 
+ ============ jmlake@uiuc.edu discusses the patch  ==========
+ 
+ >From jmlake@lees.cogsci.uiuc.edu Sat Sep 25 15:53:11 1993
+ Subject: Re: Automatically shared RECTOBJ_OPS tables
+ To: hal@pollux.cs.uga.edu (Hal N. Brooks)
+ X-Mailer: ELM [version 2.3 PL11]
+ 
+ 
+ Hi Hal,
+ 
+ > Your patch to SlingShot 2.0 pl4 eliminates the problem I
+ > was having with the free'ing of static memory, good work.
+ 
+ Thanks.  Glad it was of use.  In answer to your query of this morning, yes,
+ there is additional functionality.  I'm sure you've figured this out already,
+ but I'll state it here just in case.  Normally, SlingShot only shares the 
+ default initializers for an object class; when a call like 
+ 
+ 	xv_set(obj, RECTOBJ_DBL_CLICK_PROC, procfoo)
+ 
+ is made, SlingShot creates a new, private rectobj_ops instance, copies the
+ default, then sets the double click procedure callback to procfoo.  Thus,
+ if you want to change the double click callback on 100 Drawtext objects, for
+ instance, you'd end up with 100 new rectobj_ops structures allocated for each
+ one.  Alternatively, you could preallocate a rectobj_ops_table and set it in
+ the object creation call like
+ 
+ 	xv_create(obj, DRAWTEXT, ..., RECTOBJ_OPS, rectobj_ops_table, NULL)
+ 
+ or set it directly after creation if your objects' callbacks could change 
+ from time to time.  I decided it would be much nicer to have this managed
+ by SlingShot, thus the patch.  With the patch installed, those 100 Drawtexts
+ would use the same rectobj_ops table without any change to the application's
+ code, thus reducing memory use by 99 * sizeof(struct rectobj_ops).  [Or 
+ whatever the name of that structure is.]  For the application we were writing,
+ this meant a savings of 10000 to 100000 rectobj_ops tables, or roughly 6MB
+ of space on certain runs.
+ 
+ 
+ > But I believe it results in a small memory leak (trivial
+ > compared to the leaks provided by XView itself), but
+ > nonetheless ...
+ 
+ Well, it's not really a memory leak, since you can still get to the 
+ allocated memory, but I know what you're getting at.  When I implemented
+ this, I had a choice:  either keep track of which rectobj_ops were statically
+ allocated (so they were never freed) or make them all dynamic.  I chose to
+ make them all dynamic (at a slight space cost). 
+ 
+ The decision to make them permanent residents of the hash table resulted from
+ the desire to avoid unnecessary malloc/free calls.  In most of the applications
+ I've written, usually you're only modifying the objects a little bit, say,
+ by changing the double click callback.  Most objects use the default.
+ In the application I was working on when I ran into the SlingShot bug, we had
+ 2 dozen or so unique rectobj_ops tables which could describe the behaviour of 
+ all instances of all SlingShot objects.  Certain of the objects had different
+ behaviour on double clicking depending upon their current display state; thus,
+ an object might be created with dcproc_0 as its double click callback, then
+ change it to dcproc_1, then change it back to dcproc_0.  dcproc_1 is very
+ likely (in this application) to be reused, so I chose not to deallocate any 
+ rectobj_ops tables.  The space cost is trivial, the tables stay in real memory,
+ and the malloc/free cost is only paid once per "extentionally unique" 
+ rectobj_ops table. 
+ 
+ Remember that rectobj_ops_find doesn't always create a new table entry.  
+ While the rectobj_ops object is in active use, it will have a reference count
+ of at least 2; if the ref count drops to 1, it's used only in the hash table.
+ If you're going to change the initialization from 1 to 0, be sure to delete
+ the element from the bucket in the hash table as well, otherwise you'll 
+ eventually chase an invalid pointer.  
+ 
+ SlingShot in general is a little too aggressive in deallocating this memory
+ when the ref_count is 1.  If the application is setting RECTOBJ_OPS directly,
+ it too must initialize the ref_count to at least 1, or SlingShot may free it
+ up or scribble in it.  Then you're passing invalid data around, and the app
+ dies mysteriously on a mouse click or expose or something.
+ 
+ > I just changed the initialization of ref_count from 1 to 0.  I guess
+ > the alternative would be to leave the initialization alone, increment
+ > the ref_count in rectobj_ops_find_diff() when the rectobj_ops
+ > for the given object type already exists, and remove the increment
+ > steps in all of the *_init() routines.  I like the alternative, but
+ > it would have been more trouble.
+ 
+ This was more or less how I initially implemented it.  There was a problem
+ with maintaining backwards compatibility with the RECTOBJ_OPS attribute's
+ semantics.  I don't recall offhand what that problem was.  
+ 
+ Mike
+ -- 
+ J. Michael Lake              "Judge McDade maintained that it is within the
+ Beckman Institute             university's rights to discriminate against the
+ Dept. of Comp. Science        swimmers because they are men and overrepresented
+ jmlake@uiuc.edu               in varsity athletics." -- TO&B Observer, 3 Sep 93
+ 
+ ========== unoffical patch to SlingShot 2.0 patchlevel 4 ==================
+ 
+ >From Brian.Warkentine@Eng.Sun.COM Fri Sep 24 19:43:53 1993
+ To: hal@pollux.cs.uga.edu
+ Subject: Re: debugging session, static rectobj_ops being free'd
+ X-Sun-Charset: US-ASCII
+ Content-Length: 22929
+ 
+ Okay, here it comes...  let me know how it goes.
+ 
+ -brian
+ 
+ 
+ diff -r -c sspkg2.0/src/array.c pappi/sspkg/sspkg2.0/src/array.c
+ *** sspkg2.0/src/array.c	Fri Aug 13 11:44:48 1993
+ --- pappi/sspkg/sspkg2.0/src/array.c	Tue Aug  3 14:09:45 1993
+ ***************
+ *** 127,133 ****
+   	FLAG_SET(ainfo->aflags,	AF_AUTO_POSITION);
+   	array_tile_reset_dimensions(ainfo, 4, 1);
+   	calc_array_rect_size(ainfo, &rinfo->rect);
+ ! 	rinfo->rectobj_ops = (Rectobj_ops*)&rectobj_ops;
+   
+   	return(XV_OK);
+   }
+ --- 127,134 ----
+   	FLAG_SET(ainfo->aflags,	AF_AUTO_POSITION);
+   	array_tile_reset_dimensions(ainfo, 4, 1);
+   	calc_array_rect_size(ainfo, &rinfo->rect);
+ ! 	rinfo->rectobj_ops = rectobj_ops_find((Rectobj_ops*)&rectobj_ops);
+ ! 	++rinfo->rectobj_ops->ref_count;
+   
+   	return(XV_OK);
+   }
+ diff -r -c sspkg2.0/src/bag.c pappi/sspkg/sspkg2.0/src/bag.c
+ *** sspkg2.0/src/bag.c	Fri Aug 13 11:44:45 1993
+ --- pappi/sspkg/sspkg2.0/src/bag.c	Tue Aug  3 14:10:04 1993
+ ***************
+ *** 33,39 ****
+   		bag_del_child_proc,
+   	};
+   
+ ! 	rinfo->rectobj_ops = (Rectobj_ops*)&rectobj_ops;
+   	RF_SET(rinfo, BAG_ANCHORED_FLAG);
+   
+   	return(XV_OK);
+ --- 33,40 ----
+   		bag_del_child_proc,
+   	};
+   
+ ! 	rinfo->rectobj_ops = rectobj_ops_find((Rectobj_ops*)&rectobj_ops);
+ ! 	++rinfo->rectobj_ops->ref_count;
+   	RF_SET(rinfo, BAG_ANCHORED_FLAG);
+   
+   	return(XV_OK);
+ diff -r -c sspkg2.0/src/box.c pappi/sspkg/sspkg2.0/src/box.c
+ *** sspkg2.0/src/box.c	Fri Aug 13 11:44:45 1993
+ --- pappi/sspkg/sspkg2.0/src/box.c	Tue Aug  3 14:10:31 1993
+ ***************
+ *** 53,59 ****
+   		box_del_child_proc,
+   	};
+   
+ ! 	rinfo->rectobj_ops = (Rectobj_ops*)&rectobj_ops;
+   
+   	binfo = xv_alloc(Box_info);
+   	binfo->gap = 1;
+ --- 53,60 ----
+   		box_del_child_proc,
+   	};
+   
+ ! 	rinfo->rectobj_ops = rectobj_ops_find((Rectobj_ops*)&rectobj_ops);
+ ! 	++rinfo->rectobj_ops->ref_count;
+   
+   	binfo = xv_alloc(Box_info);
+   	binfo->gap = 1;
+ diff -r -c sspkg2.0/src/canshell.c pappi/sspkg/sspkg2.0/src/canshell.c
+ *** sspkg2.0/src/canshell.c	Fri Aug 13 11:44:43 1993
+ --- pappi/sspkg/sspkg2.0/src/canshell.c	Tue Aug  3 14:11:17 1993
+ ***************
+ *** 73,79 ****
+   	 * event in repaint proc.  xv_set can override.
+   	 */
+   	RF_UNSET(&csinfo->rectobj_info, RF_PAINTED);
+ ! 	csinfo->rectobj_info.rectobj_ops = (Rectobj_ops*) &rectobj_ops;
+   
+   	xv_set(canvas_shell, 
+   		OPENWIN_SPLIT,
+ --- 73,80 ----
+   	 * event in repaint proc.  xv_set can override.
+   	 */
+   	RF_UNSET(&csinfo->rectobj_info, RF_PAINTED);
+ ! 	csinfo->rectobj_info.rectobj_ops = rectobj_ops_find((Rectobj_ops*)&rectobj_ops);
+ ! 	++csinfo->rectobj_info.rectobj_ops->ref_count;
+   
+   	xv_set(canvas_shell, 
+   		OPENWIN_SPLIT,
+ diff -r -c sspkg2.0/src/cbox.c pappi/sspkg/sspkg2.0/src/cbox.c
+ *** sspkg2.0/src/cbox.c	Fri Aug 13 11:44:44 1993
+ --- pappi/sspkg/sspkg2.0/src/cbox.c	Tue Aug  3 14:11:43 1993
+ ***************
+ *** 37,43 ****
+   		NULL, /* cbox del child */
+   	};
+   
+ ! 	rinfo->rectobj_ops = (Rectobj_ops*)&rectobj_ops;
+   
+   	return(XV_OK);
+   }
+ --- 37,44 ----
+   		NULL, /* cbox del child */
+   	};
+   
+ ! 	rinfo->rectobj_ops = rectobj_ops_find((Rectobj_ops*)&rectobj_ops);
+ ! 	++rinfo->rectobj_ops->ref_count;
+   
+   	return(XV_OK);
+   }
+ diff -r -c sspkg2.0/src/clock.c pappi/sspkg/sspkg2.0/src/clock.c
+ *** sspkg2.0/src/clock.c	Fri Aug 13 11:44:47 1993
+ --- pappi/sspkg/sspkg2.0/src/clock.c	Tue Aug  3 14:15:17 1993
+ ***************
+ *** 111,117 ****
+   			RECTOBJ_OPS, &handops,
+                           NULL);
+   
+ ! 	rinfo->rectobj_ops = (Rectobj_ops*)&rectobj_ops;
+   	RF_UNSET(rinfo, RF_RESTACK_CHILDREN);
+   	return XV_OK;
+   }
+ --- 111,118 ----
+   			RECTOBJ_OPS, &handops,
+                           NULL);
+   
+ ! 	rinfo->rectobj_ops = rectobj_ops_find((Rectobj_ops*)&rectobj_ops);
+ ! 	++rinfo->rectobj_ops->ref_count; 
+   	RF_UNSET(rinfo, RF_RESTACK_CHILDREN);
+   	return XV_OK;
+   }
+ diff -r -c sspkg2.0/src/drawarea.c pappi/sspkg/sspkg2.0/src/drawarea.c
+ *** sspkg2.0/src/drawarea.c	Fri Aug 13 11:44:46 1993
+ --- pappi/sspkg/sspkg2.0/src/drawarea.c	Tue Aug  3 14:15:47 1993
+ ***************
+ *** 68,75 ****
+   		rectobj_simple_style_change_proc,
+   	};
+   		
+ ! 	rinfo->rectobj_ops = (Rectobj_ops*)&rectobj_ops;
+ ! 
+   	dinfo = xv_alloc(Drawarea_info);
+   	dinfo->gc = NULL;
+   	dinfo->displayed = 0;
+ --- 68,75 ----
+   		rectobj_simple_style_change_proc,
+   	};
+   		
+ ! 	rinfo->rectobj_ops = rectobj_ops_find((Rectobj_ops*)&rectobj_ops);
+ ! 	++rinfo->rectobj_ops->ref_count;
+   	dinfo = xv_alloc(Drawarea_info);
+   	dinfo->gc = NULL;
+   	dinfo->displayed = 0;
+ diff -r -c sspkg2.0/src/drawicon.c pappi/sspkg/sspkg2.0/src/drawicon.c
+ *** sspkg2.0/src/drawicon.c	Fri Aug 13 11:44:46 1993
+ --- pappi/sspkg/sspkg2.0/src/drawicon.c	Tue Aug  3 14:16:24 1993
+ ***************
+ *** 86,92 ****
+   	drawicon_object->private_data = (Xv_opaque) dinfo;
+   
+   	RF_SET(rinfo, (RF_SELECTABLE | LAYOUT_VERTICAL));
+ ! 	rinfo->rectobj_ops = (Rectobj_ops*)&rectobj_ops;
+   
+   /*
+   	dinfo->text = xv_create(drawicon, DRAWTEXT, 
+ --- 86,93 ----
+   	drawicon_object->private_data = (Xv_opaque) dinfo;
+   
+   	RF_SET(rinfo, (RF_SELECTABLE | LAYOUT_VERTICAL));
+ ! 	rinfo->rectobj_ops = rectobj_ops_find((Rectobj_ops*)&rectobj_ops);
+ ! 	++rinfo->rectobj_ops->ref_count;
+   
+   /*
+   	dinfo->text = xv_create(drawicon, DRAWTEXT, 
+ diff -r -c sspkg2.0/src/drawimage.c pappi/sspkg/sspkg2.0/src/drawimage.c
+ *** sspkg2.0/src/drawimage.c	Fri Aug 13 11:44:46 1993
+ --- pappi/sspkg/sspkg2.0/src/drawimage.c	Tue Aug  3 14:16:52 1993
+ ***************
+ *** 56,62 ****
+   	drawimage_object = (Drawimage_struct*) drawimage;
+   	drawimage_object->private_data = (Xv_opaque) dinfo;
+   
+ ! 	rinfo->rectobj_ops = (Rectobj_ops*)&rectobj_ops;
+   	RF_SET(rinfo, RF_SELECTABLE);
+   
+   	return(XV_OK);
+ --- 56,63 ----
+   	drawimage_object = (Drawimage_struct*) drawimage;
+   	drawimage_object->private_data = (Xv_opaque) dinfo;
+   
+ ! 	rinfo->rectobj_ops = rectobj_ops_find((Rectobj_ops*)&rectobj_ops);
+ ! 	++rinfo->rectobj_ops->ref_count;
+   	RF_SET(rinfo, RF_SELECTABLE);
+   
+   	return(XV_OK);
+ diff -r -c sspkg2.0/src/drawline.c pappi/sspkg/sspkg2.0/src/drawline.c
+ *** sspkg2.0/src/drawline.c	Fri Aug 13 11:44:45 1993
+ --- pappi/sspkg/sspkg2.0/src/drawline.c	Tue Aug  3 14:17:31 1993
+ ***************
+ *** 97,103 ****
+   
+   	dinfo->arrow[1] = dinfo->arrow[0];
+   
+ ! 	RECTOBJ_PRIVATE(drawline)->rectobj_ops = (Rectobj_ops*)&rectobj_ops;
+   
+   	return(XV_OK);
+   }
+ --- 97,104 ----
+   
+   	dinfo->arrow[1] = dinfo->arrow[0];
+   
+ ! 	RECTOBJ_PRIVATE(drawline)->rectobj_ops = rectobj_ops_find((Rectobj_ops*)&rectobj_ops);
+ ! 	RECTOBJ_PRIVATE(drawline)->rectobj_ops->ref_count++;
+   
+   	return(XV_OK);
+   }
+ diff -r -c sspkg2.0/src/drawrect.c pappi/sspkg/sspkg2.0/src/drawrect.c
+ *** sspkg2.0/src/drawrect.c	Fri Aug 13 11:44:45 1993
+ --- pappi/sspkg/sspkg2.0/src/drawrect.c	Tue Aug  3 14:18:01 1993
+ ***************
+ *** 70,76 ****
+   	drawrect_object = (Drawrect_struct*) drawrect;
+   	drawrect_object->private_data = (Xv_opaque) dinfo;
+   
+ ! 	rinfo->rectobj_ops = (Rectobj_ops*)&rectobj_ops;
+   
+   	dinfo->border2 = 1;
+   	dinfo->bg2 = -1;
+ --- 70,77 ----
+   	drawrect_object = (Drawrect_struct*) drawrect;
+   	drawrect_object->private_data = (Xv_opaque) dinfo;
+   
+ ! 	rinfo->rectobj_ops = rectobj_ops_find((Rectobj_ops*)&rectobj_ops);
+ ! 	++rinfo->rectobj_ops->ref_count;
+   
+   	dinfo->border2 = 1;
+   	dinfo->bg2 = -1;
+ diff -r -c sspkg2.0/src/drawtext.c pappi/sspkg/sspkg2.0/src/drawtext.c
+ *** sspkg2.0/src/drawtext.c	Fri Aug 13 11:44:46 1993
+ --- pappi/sspkg/sspkg2.0/src/drawtext.c	Tue Aug  3 14:18:25 1993
+ ***************
+ *** 62,68 ****
+   	drawtext_object = (Drawtext_struct*) drawtext;
+   	drawtext_object->private_data = (Xv_opaque) dinfo;
+   
+ ! 	rinfo->rectobj_ops = (Rectobj_ops*)&rectobj_ops;
+   	RF_SET(rinfo, RF_SELECTABLE);
+   
+   	return(XV_OK);
+ --- 62,69 ----
+   	drawtext_object = (Drawtext_struct*) drawtext;
+   	drawtext_object->private_data = (Xv_opaque) dinfo;
+   
+ ! 	rinfo->rectobj_ops = rectobj_ops_find((Rectobj_ops*)&rectobj_ops);
+ ! 	++rinfo->rectobj_ops->ref_count; 
+   	RF_SET(rinfo, RF_SELECTABLE);
+   
+   	return(XV_OK);
+ diff -r -c sspkg2.0/src/grip.c pappi/sspkg/sspkg2.0/src/grip.c
+ *** sspkg2.0/src/grip.c	Fri Aug 13 11:44:47 1993
+ --- pappi/sspkg/sspkg2.0/src/grip.c	Tue Aug  3 14:18:56 1993
+ ***************
+ *** 101,107 ****
+   	ginfo->max_y = 32000;
+   	ginfo->rubber_style = GRIP_RUBBER_NONE;
+   
+ ! 	rinfo->rectobj_ops = &rectobj_ops;
+   	RF_UNSET(rinfo, RF_SELECTABLE);
+   
+   	return(XV_OK);
+ --- 101,109 ----
+   	ginfo->max_y = 32000;
+   	ginfo->rubber_style = GRIP_RUBBER_NONE;
+   
+ ! 	rinfo->rectobj_ops = rectobj_ops_find(&rectobj_ops);
+ ! 	++rinfo->rectobj_ops->ref_count;
+ ! 
+   	RF_UNSET(rinfo, RF_SELECTABLE);
+   
+   	return(XV_OK);
+ diff -r -c sspkg2.0/src/rectobj.c pappi/sspkg/sspkg2.0/src/rectobj.c
+ *** sspkg2.0/src/rectobj.c	Fri Aug 13 11:44:45 1993
+ --- pappi/sspkg/sspkg2.0/src/rectobj.c	Fri Aug 13 11:31:25 1993
+ ***************
+ *** 30,36 ****
+   
+   int	rectobj_global_invocation_level = 0;
+   
+ - 
+   /*
+    * This struct provides a indexed version of Rectobj_ops.
+    * Two restrictions: 
+ --- 30,35 ----
+ ***************
+ *** 48,53 ****
+ --- 47,181 ----
+   		(ATTR_ORDINAL(attr) - ATTR_ORDINAL(RECTOBJ_PAINT_PROC))
+   
+   
+ + /****************************************************************************
+ +  *  Automatically shared RECTOBJ_OPS tables.
+ +  *
+ +  *  J. Michael Lake, NEC Research Institute, Princeton, NJ  08540
+ +  *  jmlake@research.nj.nec.com  (jmlake@uiuc.edu after 20 August 1993)
+ +  *  03 August 1993
+ +  ****************************************************************************/
+ + 
+ + typedef struct _o_h_e {
+ + 	int		pre_hash;
+ + 	struct _o_h_e	*next;
+ + 	Rectobj_ops 	*r;
+ + } Rectobj_ops_list;
+ + 
+ + #define TABLE_SIZE         (101)
+ + #define SELECTION_PROC_IDX (RECTOBJ_PROCS_ATTR_INDEX(RECTOBJ_SELECTION_PROC))
+ + 
+ + static Rectobj_ops_list	*hash_table_head[TABLE_SIZE] = { NULL };
+ + 
+ + static      int          rectobj_ops_diff_hash();
+ + Pkg_private Rectobj_ops *rectobj_ops_find     ();
+ + static      Rectobj_ops *rectobj_ops_find_diff();
+ + 
+ + static int
+ + rectobj_ops_diff_hash(r, func, func_value)
+ + 	Rectobj_ops	*r;
+ + 	int		func;
+ + 	Proc_ptr	func_value;
+ + {
+ + 	int rv;
+ + 
+ + 	switch (func) {
+ + 	case RECTOBJ_PROCS_ATTR_INDEX(RECTOBJ_EVENT_PROC)	:
+ + 		rv = ( (  ((int)r->manage_child_proc  )
+ + 			+ ((int)func_value            )
+ + 			+ ((int)r->single_click_proc  )
+ + 			+ ((int)r->dbl_click_proc     )
+ + 			+ ((int)r->paint_proc         )) >> 4);
+ + 		break;
+ + 	case RECTOBJ_PROCS_ATTR_INDEX(RECTOBJ_MANAGE_CHILD_PROC):
+ + 		rv = ( (  ((int)func_value            )
+ + 			+ ((int)r->event_proc         )
+ + 			+ ((int)r->single_click_proc  )
+ + 			+ ((int)r->dbl_click_proc     )
+ + 			+ ((int)r->paint_proc         )) >> 4);
+ + 		break;
+ + 	case RECTOBJ_PROCS_ATTR_INDEX(RECTOBJ_SINGLE_CLICK_PROC):
+ + 		rv = ( (  ((int)r->manage_child_proc  )
+ + 			+ ((int)r->event_proc         )
+ + 			+ ((int)func_value            )
+ + 			+ ((int)r->dbl_click_proc     )
+ + 			+ ((int)r->paint_proc         )) >> 4);
+ + 		break;
+ + 	case RECTOBJ_PROCS_ATTR_INDEX(RECTOBJ_DBL_CLICK_PROC)	:
+ + 		rv = ( (  ((int)r->manage_child_proc  )
+ + 			+ ((int)r->event_proc         )
+ + 			+ ((int)r->single_click_proc  )
+ + 			+ ((int)func_value            )
+ + 			+ ((int)r->paint_proc         )) >> 4);
+ + 		break;
+ + 	case RECTOBJ_PROCS_ATTR_INDEX(RECTOBJ_PAINT_PROC)	:
+ + 		rv = ( (  ((int)r->manage_child_proc  )
+ + 			+ ((int)r->event_proc         )
+ + 			+ ((int)r->single_click_proc  )
+ + 			+ ((int)r->dbl_click_proc     )
+ + 			+ ((int)func_value            )) >> 4);
+ + 		break;
+ + 	default:
+ + 		rv = ( (  ((int)r->manage_child_proc  )
+ + 			+ ((int)r->event_proc         )
+ + 			+ ((int)r->single_click_proc  )
+ + 			+ ((int)r->dbl_click_proc     )
+ + 			+ ((int)r->paint_proc         )) >> 4);
+ + 	}
+ + 
+ + 	return (0x0000ffff & rv);
+ + }
+ + 
+ + 
+ + Pkg_private Rectobj_ops *
+ + rectobj_ops_find(r)
+ + 	Rectobj_ops	*r;
+ + {
+ + 	/* a convenience routine, used in <subclass>_init() only */
+ + 	return rectobj_ops_find_diff(r, 0, r->paint_proc);
+ + }
+ + 
+ + static Rectobj_ops *
+ + rectobj_ops_find_diff(r, func, func_value)
+ + 	Rectobj_ops		*r;
+ + 	int			func;
+ + 	Proc_ptr		func_value;
+ + {
+ + 	int			pre_hash, hash, i, found ;
+ + 	Rectobj_ops_list	*temp;
+ + 	Rectobj_ops_array 	*ra = (Rectobj_ops_array*)r;
+ + 
+ + 	pre_hash = rectobj_ops_diff_hash(r, func, func_value);
+ + 	hash     = pre_hash % TABLE_SIZE;
+ + 	temp     = hash_table_head[ hash ];
+ + 	for(found = 0; !found && temp; temp = temp->next) {
+ + 		Rectobj_ops_array *t = (Rectobj_ops_array *)temp->r;
+ + 
+ + 		if (temp->pre_hash != pre_hash  ) continue;
+ + 		if (t->proc[func]  != func_value) continue;
+ + 		found = 1;
+ + 		for(i = 0; found && (i <= SELECTION_PROC_IDX); ++i) {
+ + 			if (func == i                ) continue;
+ + 			if (ra->proc[i] != t->proc[i]) found = 0;
+ + 		}
+ + 		if (found) return temp->r;
+ + 	}
+ + 
+ + 	if (!(temp = (Rectobj_ops_list*)malloc(sizeof(Rectobj_ops_list)))) {
+ + 		return NULL;	/* could not allocate space for table */
+ + 	} else {
+ + 		temp->pre_hash = pre_hash;
+ + 		temp->next     = hash_table_head[ hash ];
+ + 		if (temp->r    = (Rectobj_ops*)malloc(sizeof(Rectobj_ops))) {
+ + 			*temp->r           = *r;  /* copy it.... */
+ + 			temp->r->ref_count =  1;  /* claim it... */
+ + 			((Rectobj_ops_array*)temp->r)->proc[func] = func_value;
+ + 		}
+ + 		hash_table_head[hash] = temp;
+ + 	}
+ + 	return temp->r;
+ + }
+ + 
+ + 
+   /*ARGSUSED*/
+   Pkg_private int
+   rectobj_init(parent, rectobj, avlist)
+ ***************
+ *** 58,64 ****
+   	Rectobj_info	*rinfo;
+   	Rectobj_struct	*rectobj_object;
+   	static Rectobj_ops rectobj_ops = {
+ ! 		1000,
+   		rectobj_paint_proc,
+   		rectobj_event_proc,
+   		rectobj_map_event_proc,
+ --- 186,192 ----
+   	Rectobj_info	*rinfo;
+   	Rectobj_struct	*rectobj_object;
+   	static Rectobj_ops rectobj_ops = {
+ ! 		1,
+   		rectobj_paint_proc,
+   		rectobj_event_proc,
+   		rectobj_map_event_proc,
+ ***************
+ *** 73,79 ****
+   	rectobj_object->private_data = (Xv_opaque) rinfo;
+   
+   	rectobj_internal_init(rectobj, rinfo);
+ ! 	rinfo->rectobj_ops = (Rectobj_ops*)&rectobj_ops;
+   	rinfo->parent = parent;
+   
+   	if(parent) {
+ --- 201,208 ----
+   	rectobj_object->private_data = (Xv_opaque) rinfo;
+   
+   	rectobj_internal_init(rectobj, rinfo);
+ ! 	rinfo->rectobj_ops = rectobj_ops_find((Rectobj_ops*)&rectobj_ops);
+ ! 	++rinfo->rectobj_ops->ref_count;
+   	rinfo->parent = parent;
+   
+   	if(parent) {
+ ***************
+ *** 711,720 ****
+   	if(canvas_shell)
+   		rectobj_set_delay_repaint(canvas_shell, FALSE);
+   
+ ! 	if(rinfo->rectobj_ops->ref_count == 1)
+   		free(rinfo->rectobj_ops);
+ ! 	else
+   		rinfo->rectobj_ops->ref_count--;
+   
+   	free(rinfo);
+   	return XV_OK;
+ --- 840,850 ----
+   	if(canvas_shell)
+   		rectobj_set_delay_repaint(canvas_shell, FALSE);
+   
+ ! 	if(rinfo->rectobj_ops->ref_count == 1) {
+   		free(rinfo->rectobj_ops);
+ ! 	} else {
+   		rinfo->rectobj_ops->ref_count--;
+ + 	}
+   
+   	free(rinfo);
+   	return XV_OK;
+ ***************
+ *** 797,810 ****
+   	int		which;
+   	Proc_ptr	fn;
+   {
+   	if(rinfo->rectobj_ops->ref_count != 1) {
+   		/*
+   		 * Shared rectobj_ops:  copy and set private to this rectobj.
+   		 */
+   		Rectobj_ops	*tmp;
+ ! 		tmp = (Rectobj_ops*) malloc(sizeof(Rectobj_ops));
+ ! 		*tmp = *(rinfo->rectobj_ops);
+ ! 		tmp->ref_count = 1;
+   		rinfo->rectobj_ops = tmp;
+   	}
+   
+ --- 927,940 ----
+   	int		which;
+   	Proc_ptr	fn;
+   {
+ + 
+   	if(rinfo->rectobj_ops->ref_count != 1) {
+   		/*
+   		 * Shared rectobj_ops:  copy and set private to this rectobj.
+   		 */
+   		Rectobj_ops	*tmp;
+ ! 		tmp = rectobj_ops_find_diff(rinfo->rectobj_ops, which, fn);
+ ! 		++tmp->ref_count;
+   		rinfo->rectobj_ops = tmp;
+   	}
+   
+ diff -r -c sspkg2.0/src/rectobj_impl.h pappi/sspkg/sspkg2.0/src/rectobj_impl.h
+ *** sspkg2.0/src/rectobj_impl.h	Fri Aug 13 11:44:44 1993
+ --- pappi/sspkg/sspkg2.0/src/rectobj_impl.h	Wed Aug  4 17:45:42 1993
+ ***************
+ *** 132,147 ****
+   
+   } Rectobj_info;
+   
+ ! extern void	rectobj_internal_init();
+ ! extern void	rectobj_paint_proc();
+ ! extern void	rectobj_event_proc();
+ ! extern Rectobj	rectobj_map_event_proc();
+ ! extern void	rectobj_manage_child_proc();
+ ! extern void	rectobj_set_geometry_proc();
+ ! extern void	rectobj_add_child_proc();
+ ! extern void	rectobj_del_child_proc();
+ ! extern void	rectobj_finish_set_proc();
+ ! extern void	rectobj_set_delay_repaint();
+   
+   extern void	bag_set_geometry_proc();
+   extern void	bag_manage_child_proc();
+ --- 132,148 ----
+   
+   } Rectobj_info;
+   
+ ! extern void		rectobj_internal_init();
+ ! extern void		rectobj_paint_proc();
+ ! extern void		rectobj_event_proc();
+ ! extern Rectobj		rectobj_map_event_proc();
+ ! extern void		rectobj_manage_child_proc();
+ ! extern void		rectobj_set_geometry_proc();
+ ! extern void		rectobj_add_child_proc();
+ ! extern void		rectobj_del_child_proc();
+ ! extern void		rectobj_finish_set_proc();
+ ! extern void		rectobj_set_delay_repaint();
+ ! extern Rectobj_ops 	*rectobj_ops_find();
+   
+   extern void	bag_set_geometry_proc();
+   extern void	bag_manage_child_proc();
+ diff -r -c sspkg2.0/src/tacho.c pappi/sspkg/sspkg2.0/src/tacho.c
+ *** sspkg2.0/src/tacho.c	Fri Aug 13 11:44:46 1993
+ --- pappi/sspkg/sspkg2.0/src/tacho.c	Tue Aug  3 14:19:22 1993
+ ***************
+ *** 87,93 ****
+   	rinfo->rect.r_height = 40;
+   	tinfo->arc_height = 40;
+   	tinfo->bg2 = -1;
+ ! 	rinfo->rectobj_ops = (Rectobj_ops*)&rectobj_ops;
+   
+   	return XV_OK;
+   }
+ --- 87,94 ----
+   	rinfo->rect.r_height = 40;
+   	tinfo->arc_height = 40;
+   	tinfo->bg2 = -1;
+ ! 	rinfo->rectobj_ops = rectobj_ops_find((Rectobj_ops*)&rectobj_ops);
+ ! 	++rinfo->rectobj_ops->ref_count;
+   
+   	return XV_OK;
+   }
+ diff -r -c sspkg2.0/src/tree.c pappi/sspkg/sspkg2.0/src/tree.c
+ *** sspkg2.0/src/tree.c	Fri Aug 13 11:44:47 1993
+ --- pappi/sspkg/sspkg2.0/src/tree.c	Tue Aug  3 14:53:33 1993
+ ***************
+ *** 61,67 ****
+   	tree_object = (Tree_struct*) tree;
+   	tree_object->private_data = (Xv_opaque) tinfo;
+   
+ ! 	RECTOBJ_PRIVATE(tree)->rectobj_ops = (Rectobj_ops*)&rectobj_ops;
+   
+   	tinfo->parent_distance = 30;
+   	tinfo->layout = TREE_LAYOUT_HORIZONTAL;
+ --- 61,68 ----
+   	tree_object = (Tree_struct*) tree;
+   	tree_object->private_data = (Xv_opaque) tinfo;
+   
+ ! 	RECTOBJ_PRIVATE(tree)->rectobj_ops = rectobj_ops_find((Rectobj_ops*)&rectobj_ops);
+ ! 	++RECTOBJ_PRIVATE(tree)->rectobj_ops->ref_count;
+   
+   	tinfo->parent_distance = 30;
+   	tinfo->layout = TREE_LAYOUT_HORIZONTAL;
+ Binary files sspkg2.0/src/Shared/array.o and pappi/sspkg/sspkg2.0/src/Shared/array.o differ
+ Binary files sspkg2.0/src/Shared/array_data.o and pappi/sspkg/sspkg2.0/src/Shared/array_data.o differ
+ Binary files sspkg2.0/src/Shared/bag.o and pappi/sspkg/sspkg2.0/src/Shared/bag.o differ
+ Binary files sspkg2.0/src/Shared/bkg_event.o and pappi/sspkg/sspkg2.0/src/Shared/bkg_event.o differ
+ Binary files sspkg2.0/src/Shared/box.o and pappi/sspkg/sspkg2.0/src/Shared/box.o differ
+ Binary files sspkg2.0/src/Shared/box_data.o and pappi/sspkg/sspkg2.0/src/Shared/box_data.o differ
+ Binary files sspkg2.0/src/Shared/canshell.o and pappi/sspkg/sspkg2.0/src/Shared/canshell.o differ
+ Binary files sspkg2.0/src/Shared/cbox.o and pappi/sspkg/sspkg2.0/src/Shared/cbox.o differ
+ Binary files sspkg2.0/src/Shared/clock.o and pappi/sspkg/sspkg2.0/src/Shared/clock.o differ
+ Binary files sspkg2.0/src/Shared/display_list.o and pappi/sspkg/sspkg2.0/src/Shared/display_list.o differ
+ Binary files sspkg2.0/src/Shared/dnd.o and pappi/sspkg/sspkg2.0/src/Shared/dnd.o differ
+ Binary files sspkg2.0/src/Shared/drawarea.o and pappi/sspkg/sspkg2.0/src/Shared/drawarea.o differ
+ Binary files sspkg2.0/src/Shared/drawicon.o and pappi/sspkg/sspkg2.0/src/Shared/drawicon.o differ
+ Binary files sspkg2.0/src/Shared/drawimage.o and pappi/sspkg/sspkg2.0/src/Shared/drawimage.o differ
+ Binary files sspkg2.0/src/Shared/drawline.o and pappi/sspkg/sspkg2.0/src/Shared/drawline.o differ
+ Binary files sspkg2.0/src/Shared/drawobj_data.o and pappi/sspkg/sspkg2.0/src/Shared/drawobj_data.o differ
+ Binary files sspkg2.0/src/Shared/drawrect.o and pappi/sspkg/sspkg2.0/src/Shared/drawrect.o differ
+ Binary files sspkg2.0/src/Shared/drawtext.o and pappi/sspkg/sspkg2.0/src/Shared/drawtext.o differ
+ Binary files sspkg2.0/src/Shared/event.o and pappi/sspkg/sspkg2.0/src/Shared/event.o differ
+ Binary files sspkg2.0/src/Shared/grip.o and pappi/sspkg/sspkg2.0/src/Shared/grip.o differ
+ Binary files sspkg2.0/src/Shared/list.o and pappi/sspkg/sspkg2.0/src/Shared/list.o differ
+ Binary files sspkg2.0/src/Shared/rectobj.o and pappi/sspkg/sspkg2.0/src/Shared/rectobj.o differ
+ Binary files sspkg2.0/src/Shared/rectobj_data.o and pappi/sspkg/sspkg2.0/src/Shared/rectobj_data.o differ
+ Binary files sspkg2.0/src/Shared/selection.o and pappi/sspkg/sspkg2.0/src/Shared/selection.o differ
+ Binary files sspkg2.0/src/Shared/tacho.o and pappi/sspkg/sspkg2.0/src/Shared/tacho.o differ
+ Binary files sspkg2.0/src/Shared/tree.o and pappi/sspkg/sspkg2.0/src/Shared/tree.o differ
+ Binary files sspkg2.0/src/Static/array.o and pappi/sspkg/sspkg2.0/src/Static/array.o differ
+ Binary files sspkg2.0/src/Static/array_data.o and pappi/sspkg/sspkg2.0/src/Static/array_data.o differ
+ Binary files sspkg2.0/src/Static/bag.o and pappi/sspkg/sspkg2.0/src/Static/bag.o differ
+ Binary files sspkg2.0/src/Static/bkg_event.o and pappi/sspkg/sspkg2.0/src/Static/bkg_event.o differ
+ Binary files sspkg2.0/src/Static/box.o and pappi/sspkg/sspkg2.0/src/Static/box.o differ
+ Binary files sspkg2.0/src/Static/box_data.o and pappi/sspkg/sspkg2.0/src/Static/box_data.o differ
+ Binary files sspkg2.0/src/Static/canshell.o and pappi/sspkg/sspkg2.0/src/Static/canshell.o differ
+ Binary files sspkg2.0/src/Static/cbox.o and pappi/sspkg/sspkg2.0/src/Static/cbox.o differ
+ Binary files sspkg2.0/src/Static/clock.o and pappi/sspkg/sspkg2.0/src/Static/clock.o differ
+ Binary files sspkg2.0/src/Static/display_list.o and pappi/sspkg/sspkg2.0/src/Static/display_list.o differ
+ Binary files sspkg2.0/src/Static/dnd.o and pappi/sspkg/sspkg2.0/src/Static/dnd.o differ
+ Binary files sspkg2.0/src/Static/drawarea.o and pappi/sspkg/sspkg2.0/src/Static/drawarea.o differ
+ Binary files sspkg2.0/src/Static/drawicon.o and pappi/sspkg/sspkg2.0/src/Static/drawicon.o differ
+ Binary files sspkg2.0/src/Static/drawimage.o and pappi/sspkg/sspkg2.0/src/Static/drawimage.o differ
+ Binary files sspkg2.0/src/Static/drawline.o and pappi/sspkg/sspkg2.0/src/Static/drawline.o differ
+ Binary files sspkg2.0/src/Static/drawobj_data.o and pappi/sspkg/sspkg2.0/src/Static/drawobj_data.o differ
+ Binary files sspkg2.0/src/Static/drawrect.o and pappi/sspkg/sspkg2.0/src/Static/drawrect.o differ
+ Binary files sspkg2.0/src/Static/drawtext.o and pappi/sspkg/sspkg2.0/src/Static/drawtext.o differ
+ Binary files sspkg2.0/src/Static/event.o and pappi/sspkg/sspkg2.0/src/Static/event.o differ
+ Binary files sspkg2.0/src/Static/grip.o and pappi/sspkg/sspkg2.0/src/Static/grip.o differ
+ Binary files sspkg2.0/src/Static/list.o and pappi/sspkg/sspkg2.0/src/Static/list.o differ
+ Binary files sspkg2.0/src/Static/rectobj.o and pappi/sspkg/sspkg2.0/src/Static/rectobj.o differ
+ Binary files sspkg2.0/src/Static/rectobj_data.o and pappi/sspkg/sspkg2.0/src/Static/rectobj_data.o differ
+ Binary files sspkg2.0/src/Static/selection.o and pappi/sspkg/sspkg2.0/src/Static/selection.o differ
+ Binary files sspkg2.0/src/Static/tacho.o and pappi/sspkg/sspkg2.0/src/Static/tacho.o differ
+ Binary files sspkg2.0/src/Static/tree.o and pappi/sspkg/sspkg2.0/src/Static/tree.o differ
+ 
+ 
