# Makefile generated by imake - do not edit!
# $XConsortium: imake.c,v 1.51 89/12/12 12:37:30 jim Exp $
#
# The cpp used on this machine replaces all newlines and multiple tabs and
# spaces in a macro expansion with a single space.  Imake tries to compensate
# for this, but is not always successful.
#

SHELL=/bin/sh
MAKESHELL=/bin/sh

TOP = .
CURDIR = .
CONFIGSRC = /source/config
DESTDIR=

IRULESRC = $(CONFIGSRC)

IMAKE= imake
IFLAGS= -I$(IRULESRC) -DTOPDIR=/source

ICONFIGFILE = ${IRULESRC}/Imake.tmpl ${IRULESRC}/Imake.rules \
	${IRULESRC}/site.def Imakefile
MKDIRHIER= sh $(IRULESRC)/mkdirhier.sh

ATHBASEDIR=/usr/athena

ATHLIBDIR=$(ATHBASEDIR)/lib
ATHBINDIR=$(ATHBASEDIR)/bin
ATHINCDIR=$(ATHBASEDIR)/include
ATHETCDIR=$(ATHBASEDIR)/etc
ATHCONFDIR=/etc/athena
ATHMANDIR=$(ATHBASEDIR)/man
ATHRBINDIR=/bin/athena
ATHRETCDIR=/etc/athena

ATHNEWDIR=$(ATHBINDIR)

ATHXAPPDIR=/usr/athena/lib/X11/app-defaults
ATHXBITDIR=/usr/athena/lib/X11/bitmaps
ATHXINCDIR=/usr/athena/include
ATHXLIBDIR=/usr/athena/lib

LINTCFLAG=-o
LINTFLAGS=$(DEFINES) -I/usr/athena/include

INSTALL=install -c
RANLIB=ranlib
CC=cc -qlanglvl=extended
LD=cc
AS=as
RM=rm -f
CDEBUG=-O

CFLAGS=$(CDEBUG) -D_BSD -D_BSD_INCLUDES -DAIXV=31 -DPOSIX $(DEFINES) -I/usr/athena/include
LDFLAGS= $(LDDEFS)
LDPATH=-L$(ATHLIBDIR)/shared -L$(ATHLIBDIR)
LDLIBS=-lbsd

all::
install:: install_dirs
install_dirs::

clean::
depend::

FRC::

###########################################################################
# Project inclusion
###########################################################################

###########################################################################
# start of Imakefile
###########################################################################

clean::
	rm -rf ./usr/include/rpc
	rm -f ./usr/bin/rpcgen
	rm -f ./usr/lib/librpclib.a

Makefile:: $(ICONFIGFILE)
	-@if [ -f Makefile ]; then \
	echo "  $(RM) Makefile.bak; mv Makefile Makefile.bak"; \
	$(RM) Makefile.bak; mv Makefile Makefile.bak; \
	else exit 0; fi
	$(IMAKE) $(IFLAGS) $(IPROJ) -DNEWTOP=$(TOP) -DNEWCURDIR=$(CURDIR)

clean::
	rm -f *~ *.o *.a core a.out

###########################################################################
# rules for building in SUBDIRS - do not edit

Makefiles:: Makefile
	@echo "### Making Makefiles in $(CURDIR)"
	@-for d in rpcgen rpc; \
	do \
	case "$$d" in \
	./?*/?*/?*/?*) newtop=../../../.. ;; \
	./?*/?*/?*) newtop=../../.. ;; \
	./?*/?*) newtop=../.. ;; \
	./?*) newtop=.. ;; \
	*/?*/?*/?*) newtop=../../../.. ;; \
	*/?*/?*) newtop=../../.. ;; \
	*/?*) newtop=../.. ;; \
	*) newtop=.. ;; \
	esac; \
	( cd $$d; \
	echo "### Making Makefile in $(CURDIR)/$$d"; \
	if [ -f Makefile ]; then \
	$(RM) Makefile.bak; \
	mv Makefile Makefile.bak; fi; \
	make -f $${newtop}/Makefile TOP=$${newtop}/$(TOP) \
	CURDIR=$(CURDIR)/$$d Makefile; \
	make $(MFLAGS) Makefiles; \
	echo "### Done with $(CURDIR)/$$d" ) ; \
	done

all:: FRC
	@for d in  rpcgen rpc; \
	do \
	(cd $$d; echo "### Making" all "in $(CURDIR)/$$d"; \
	make $(MFLAGS)  DESTDIR=$(DESTDIR) all; \
	echo "### Done with $(CURDIR)/$$d"); \
	done

install:: FRC
	@for d in  rpcgen rpc; \
	do \
	(cd $$d; echo "### Making" install "in $(CURDIR)/$$d"; \
	make $(MFLAGS)  DESTDIR=$(DESTDIR) install; \
	echo "### Done with $(CURDIR)/$$d"); \
	done

clean:: FRC
	@for d in  rpcgen rpc; \
	do \
	(cd $$d; echo "### Making" clean "in $(CURDIR)/$$d"; \
	make $(MFLAGS)  DESTDIR=$(DESTDIR) clean; \
	echo "### Done with $(CURDIR)/$$d"); \
	done

depend:: FRC
	@for d in  rpcgen rpc; \
	do \
	(cd $$d; echo "### Making" depend "in $(CURDIR)/$$d"; \
	make $(MFLAGS)  DESTDIR=$(DESTDIR) depend; \
	echo "### Done with $(CURDIR)/$$d"); \
	done
rpcgen rpc:: FRC
	@(cd $@; echo "### Making" all "in $(CURDIR)/$@"; \
	make $(MFLAGS) DESTDIR=$(DESTDIR) all ; \
	echo "### Done with $(CURDIR)/$@")

###########################################################################
# dependencies generated by makedepend

