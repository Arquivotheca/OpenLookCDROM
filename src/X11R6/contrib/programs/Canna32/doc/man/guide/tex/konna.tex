% Copyright 1994 NEC Corporation, Tokyo, Japan.
%
% Permission to use, copy, modify, distribute and sell this software
% and its documentation for any purpose is hereby granted without
% fee, provided that the above copyright notice appear in all copies
% and that both that copyright notice and this permission notice
% appear in supporting documentation, and that the name of NEC
% Corporation not be used in advertising or publicity pertaining to
% distribution of the software without specific, written prior
% permission.  NEC Corporation makes no representations about the
% suitability of this software for any purpose.  It is provided "as
% is" without express or implied warranty.
%
% NEC CORPORATION DISCLAIMS ALL WARRANTIES WITH REGARD TO THIS SOFTWARE,
% INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS, IN 
% NO EVENT SHALL NEC CORPORATION BE LIABLE FOR ANY SPECIAL, INDIRECT OR
% CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF 
% USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR 
% OTHER TORTUOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR 
% PERFORMANCE OF THIS SOFTWARE. 
%
% $Id: konna.tex,v 2.8 1994/06/01 06:35:46 kuma Exp $
%

\chapter{こんな症状のときには}
\label{3.5こんな症状のときには}

日本語入力システムを使っていて、自分が設定しているはずの設定どおりに動
かない場合があります。原因はいろいろありますが、それらのうちのいくつか
は、なんらかの設定の誤りだったり勘違いから生じていることもあります。こ
こでは、問題になっている症状に対処するときの助力となるように、考えられ
る原因とその対処の方法について説明します。


\section{\HIDX{cannacheckコマンド}{ＣＡＮＮＡＣＨＥＣＫこまんど}{H0.8.1.0.0}}
\label{3.5.1cannacheckコマンド}

日本語入力システムを使用している際に起こる、予期しない症状の原因を調べ
るための手段の１つとしてcannacheck(1)コマンドを使用する方法があります。


\subsection{cannacheckとirohacheck}
\label{3.5.1.1cannacheckとirohacheck}

cannacheckとirohacheckはともに日本語入力システム『かんな』の関連情報を表
示するコマンドですが、cannacheckは、『かんな』Version 2.1 以降の日本語
入力システムに関する情報、irohacheckは、『かんな』Version 1.2以前の日
本語入力システムに関する情報を表示します。

使用している『かんな』のバージョンはユーティリティ機能の『環境設定』→
『バージョン表示』にて、調べることができます。使用している『かんな』の
バージョンに応じて、cannacheckとirohacheckを使い分けるようにしてくださ
い。

cannacheckを行った時に反応がない場合や、ユーティリティ機能のメニューに
『環境設定』という項目がない場合は、『かんな』Version 1.2以前のものを
使用しています。irohacheckにて状況を調査してください。詳細な使用方法に
ついてはマニュアルページを御覧ください。

cannacheck、irohacheckの詳細な使用方法については、マニュアルページを御覧ください。

以下では、cannacheckの機能についてのみ説明します。


\subsection{cannacheckの機能}
\label{3.5.1.2cannacheckの機能}

cannacheckコマンドは次の項目についてどのような状況になっているか調べます。

\begin{nquote}{1em}
\begin{enumerate}
\item カスタマイズファイルはどれが使われるか
\item カスタマイズファイルのシンタックスエラー
\item ローマ字かな変換辞書としては何が使われるか
\item どのかな漢字変換サーバが使われるか
\item どの辞書が使われるか
\end{enumerate}
\end{nquote}

上記の項目を調査し、なんらかの問題があればその問題を報告します。$-$vオ
プション(verbose)を指定することにより、問題がない場合でも報告が行われ
ます。

問題となった症状の解析にcannacheckをご利用ください。


\section{問題のレベル}
\label{3.5.2問題のレベル}

日本語入力システムが思うように動かない場合に、cannacheck(1)でどのよう
な問題があるかを調べたとしても何の問題も報告されない場合があります。次
のような場合はcannacheck(1)では問題は報告されません。

\begin{enumerate}

\item {\dg\bf 環境変数CANNAFILEに設定したカスタマイズファイルが存在しない場合}

\$HOME/.cannaあるいは、システムデフォルトのdefault.cannaが用いられ特に問題は報告されません。

\item {\dg\bf カスタマイズファイルで指定したローマ字かな変換辞書がカレントディレクトリに存在しないとき}

同名のファイルがホームディレクトリあるいは、システムのローマ字かな変換
辞書ディレクトリ 
(\refCANNALIBDIR /dic)に存在する場合はそれらの辞書ファイル
が用いられ問題は報告されません。

反対に次のような場合はエラーが報告されます。

\begin{enumerate}
\item 環境変数CANNAHOSTで示されるかな漢字変換サーバに接続できないとき。
\item かな漢字変換辞書が利用できないとき。
\item 指定したローマ字かな変換辞書がシステムディレクトリにも存在しないとき。
\end{enumerate}

以下の表を参考にして、各項目を参照してください。

\begin{table}[hbtp]
\begin{center}
\caption{症状一覧}\label{症状一覧}
\begin{tabular}{|l|c|}
\hline%--------------------------------------------------------------
\multicolumn{1}{|c|}{症　　　　　　　　　　状}       & 対応章番号 \\
\hline%--------------------------------------------------------------
\hline%--------------------------------------------------------------
"かな漢字変換サーバに接続できませんでした"といわれる 
				& \ref{3.5.3一般に見られる症状} (1)   \\
\hline%--------------------------------------------------------------
ローマ字かな変換が行われない  　
				& \ref{3.5.3一般に見られる症状} (2)   \\
\hline%--------------------------------------------------------------
かな漢字変換が行われない        　
				& \ref{3.5.3一般に見られる症状} (3)   \\
\hline%--------------------------------------------------------------
学習の効果がない
				& \ref{3.5.3一般に見られる症状} (4)   \\
\hline%--------------------------------------------------------------
"単語登録できませんでした"といわれる
				& \ref{3.5.3一般に見られる症状} (5)   \\
\hline%--------------------------------------------------------------
部首変換ができない                                   
				& \ref{3.5.3一般に見られる症状} (6)   \\
\hline%--------------------------------------------------------------
逐次変換ができない
				& \ref{3.5.3一般に見られる症状} (7)   \\
\hline%--------------------------------------------------------------
個人別学習の効果がない
				& \ref{3.5.3一般に見られる症状} (8)   \\
\hline%--------------------------------------------------------------
キー入力ができない
				& \ref{3.5.3一般に見られる症状} (9)   \\
\hline%--------------------------------------------------------------
カスタマイズしたとおりの動作をしない
				& \ref{3.5.4カスタマイズに伴う症状} (1)   \\
\hline%--------------------------------------------------------------
ローマ字かな変換辞書の効果がない
				& \ref{3.5.4カスタマイズに伴う症状} (2)   \\
\hline%--------------------------------------------------------------
ユーザ辞書のマウントに失敗する
				& \ref{3.5.4カスタマイズに伴う症状} (3)   \\
\hline%--------------------------------------------------------------
かな漢字変換サーバが起動できない
				& \ref{3.5.5システム管理関係の症状}      \\
\hline%--------------------------------------------------------------
\end{tabular}
\end{center}
\end{table}
\end{enumerate}


\section{一般に見られる症状}
\label{3.5.3一般に見られる症状}

\begin{enumerate}

\item {\dg\bf クライアントが"かな漢字サーバに接続できませんでした"というメッセージを出す。}

\begin{itemize}

\item {\dg\bf かな漢字変換サーバが起動されていますか？}

かな漢字変換サーバが起動されていない場合は、かな漢字変換サーバを
起動してください。

かな漢字変換サーバが起動されているのに、該当するかな漢字変換サーバに全
てのユーザクライアントが接続できないときには、 {\dg\bf \ref{3.5.3一般
に見られる症状}(3)\hpref{count=11,label=H0.8.3.0.0.3}かな漢字変換が行えない} も参照してください。

また、かな漢字変換サーバを起動しようとしても起動できないときには、 
{\dg\bf \ref{3.5.5システム管理関係の症状}(1)
\hpref{count=18,label=H0.8.5.0.0.1}cannaserverが起動できない}
を参照してください。

\item {\dg\bf 意図しないかな漢字変換サーバに接続しようとしていませんか？}

自分が接続したいホスト以外のかな漢字サーバに接続しようとしていませんか。   

接続しようとしているかな漢字サーバは、環境変数CANNAHOST、または、ファ
イル\\
\refCANNALIBDIR /cannahostによって決定されます。

これらの設定が間違っている場合には、拡張機能のサーバの切り替え機能で
サーバを切り替えるか、環境変数、または、
ファイル\refCANNALIBDIR /cannahostを変更してから
クライアントを起動し直してください。

\item {\dg\bf 指定したサーバにアクセス権がありますか？}

接続しようとしているサーバのアクセス権は、cshost(1)コマンドで確
認できます。

詳細はマニュアルページを御覧ください。

かな漢字変換サーバの指定の仕方は、{\dg\bf
5.1.2(2)\hpref{count=12,label=H0.5.1.2.0}かな漢字変換サーバの指定}を参
照してください。



\item {\dg\bf サーバのクライアント数が多くありませんか？}

『かんな』Version 3.2 以上のサーバに接続しようとしている場合には、メモ
リの不足やシステム側で設定しているファイルディスクリプタ数をこえてしまっ
ているために接続できくなっていることがあります。
この場合には、未使用のクライアントは終了させるか、他のマシンのサーバに
接続するようにしてください。

『かんな』 Version 3.2 より前のサーバに接続しようとしている場合には、
サーバ側で接続できるクライアントの数を制限しています。

サーバのファイルディスクリプタ数の最大値は 64 個になっています
 (ファイルディスクリプタ数はクライアント 1 つに 1 個、 
 バイナリ辞書ファイル 1 つにつき 1 個消費されます)。 

 このため、 クライアント数が多い時にサーバに
接続できなくなることがあります。 
 未使用のクライアントは終了させる、
 あるいはサーバを増やし 1 サーバに接続するクライアント数の比率を
 変え、システムの資源を節約する必要があります。

\howversion
\end{itemize}


\item {\dg\bf ローマ字かな変換が行われない}

\begin{itemize}

\item {\dg\bf ローマ字かな変換辞書は存在しますか？}

まず、cannacheckでメッセージが出るかどうか確認してください。メッセージが次のような場合は指定されているローマ字かな変換辞書が存在しません。

\begin{nquote}{1em}
\begin{verbatim}
% cannacheck
ローマ字かな変換辞書 "user.kp" がオープンできません。
%
\end{verbatim}
\end{nquote}

カスタマイズファイルあるいは、ローマ字かな変換辞書を確認してください。ローマ字かな変換辞書の形式が正しくない場合にもこのエラーメッセージがでます。

\end{itemize}

\item {\dg\bf かな漢字変換が行えない}
\hptar{label=H0.8.3.0.0.3}

\begin{itemize}

\item {\dg\bf かな漢字変換サーバと接続できていますか？}

かな漢字変換サーバと接続できていないと、かな漢字変換が行えません。かな漢字変換サーバと接続できない理由として以下のものがあります。

\begin{enumerate}

\item かな漢字変換サーバが動いていない。

自分が接続しようとしている、かな漢字変換サーバが動いていない場合があり
ます。この原因としては、接続しようとしているマシンで、かな漢字変換サー
バを起動するための処理を行っていないことが考えられます。接続しようとし
ているマシンのマシン管理者に相談してみてください。

\item 意図しないかな漢字変換サーバに接続しようとしていた。

\refCANNALIBDIR /cannahost
やCANNAHOSTなどにより自分の意図とは別のかな漢字変換サーバに接続しよう
としている場合があります。cannacheckコマンドによって、どのマシンのかな
漢字変換サーバに接続しようとしているのかをもう一度確認してください。

\item UNIXドメインでの通信ができない。

かな漢字変換サーバとして、同じマシンのサーバを用いるように指定してあり、
しかもcannaserverが動いている場合はUNIXドメインでの通信ができないこと
が考えられます。その原因としては、以下が考えられます。

\begin{enumerate}

\item /tmpの容量不足

/tmpの容量が不足すると(/tmpの全体の容量の9割以上が使用されている場合が
これにあたります)、UNIXドメインを行うための \\
/tmp/.iroha\_unix/IROHA
というファイルが作成されません。このファイルはUNIXドメインでの通信を行
うためにcannaserverが作成する特殊ファイルです。/tmpの容量が不足してい
る場合は、マシン管理者に連絡して、/tmp下の領域が十分用意されるように調
整してもらってください。

\end{enumerate}
\end{enumerate}


\item {\dg\bf かな漢字変換辞書がマウントできていますか？}

かな漢字変換が全く行えないときは、その原因は基本辞書である"iroha"ある
いは"fuzokugo"がマウントできないことにあります。

cannacheck $-$vでマウントしている辞書を表示してみてください。

\begin{nquote}{1em}
\begin{verbatim}
% cannacheck -v
カスタマイズファイルとして"/uhome/user/.canna"を用います。
ローマ字かな変換辞書は"/uhome/user/user.kp"を用います。
  システム辞書"iroha"         を指定しています。
  システム辞書"fuzokugo"      を指定しています。
  システム辞書"hojomwd"       を指定しています。
  システム辞書"hojoswd"       を指定しています。
  システム辞書"yuubin"        を指定しています。
  システム辞書"katakana"      を指定しています。
  システム辞書"software"      を指定しています。
      部首辞書"bushu"         を指定しています。
サーバ"wink"に接続します。
\end{verbatim}
\end{nquote}

上記のように"iroha"および"fuzokugo"が指定されていれば問題ありません。"iroha"および"fuzokugo"が指定されていない場合は、カスタマイズファイルをチェックしてください。
\end{itemize}


\item {\dg\bf 学習が行われない}

\begin{itemize}

\item {\dg\bf (setq gakushu nil)となっていませんか？}

カスタマイズファイルで"(setq gakushu nil)"が指定されている場合は学習が
行われません。学習を行いたい場合はカスタマイズファイルでのこの指定を取
り消すか、"(setq gakushu t)"のように記述してください。

\item {\dg\bf 辞書の書き込み権がありますか？}

たとえばユーザ登録した単語が頻度学習されない場合はユーザ辞書への書き込み
権がcannaserverに対して解放されていないことが考えられます。cannaserver
はユーザIDがbin(2)、グループIDがbin(2)で動作していますのでユーザが作成
した辞書については辞書のオーナをbinにしてオーナに対する書き込み権を開
放するか、辞書のグループをbinにしてグループに対する書き込み権を開放す
るかしてください。ユーザ辞書はオーナをそのユーザ自身とし、グループを
binとしてモードを664または660にするのが良いでしょう。

\item {\dg\bf バイナリ辞書を更新したときにmkdicを行いましたか? }

OSのバージョンアップなどを行ってバイナリ辞書が更新されたときには
個人別学習も更新する必要があります。

したがって、それまで個人別学習を行っていた場合、OSのバージョンアップ後に
個人別学習ファイルをmkdicコマンドによって作成し直さなかった場合には、
学習が行われません。

\end{itemize}

\item {\dg\bf 単語が登録できない}

\begin{itemize}

\item {\dg\bf 単語登録用の辞書は指定されていますか？}

\HELP キーを押して、辞書操作・単語登録を選択した時点で "単語登録用辞書
が指定されていません" または、 "ユーザ辞書が指定
されていません" と警告メッセージが出る場合は単語登録用の辞書が指定されていま
せん。

カスタマイズファイルを用いて単語登録用辞書を指定してください。単語登録
用辞書の指定の詳細は{\dg\bf \ref{3.3.2使用する辞書の指定}
\hpref{count=9,label=H0.4.2.0.0}使用する辞書の指定} 
を参照してください。


\item {\dg\bf 書き込めない辞書を単語登録用辞書として指定していませんか？}

この場合は単語登録の最後で辞書を指定した後"単語登録できませんでした"
というメッセージが出ます。この場合は原因が２つ考えられます。

１つは単語登録用辞書としてバイナリ辞書を指定していた場合です。単語登録
用辞書として使用できるのはテキスト形式辞書だけですので注意してください。

もう１つ考えられるのは登録の対象辞書として指定された辞書の書き込み権が
cannaserverに対して解放されていない場合です。辞書のモードに関しては学
習ができない場合と同様に対処してください。


\item {\dg\bf 単語登録用辞書に \tt{WRITE} 権はついていますか？}

『かんな』 Version 3.2 から辞書のセキュリティ強化のた
め、辞書の \tt{READ・WRITE} 権が設定できるようになっています。
辞書に \tt{WRITE} 権がない場合には単語登録ができませんので、 chmoddic(1) 
で辞書に \tt{WRITE} 権をつけてください。辞書の \tt{READ・WRITE} 権の詳
細については、{\dg\bf \ref{3.4かな漢字変換サーバと辞書}
\hpref{count=9,label=H0.5.0.0.0}かな漢字変換サーバ}を参照してください。 
chmoddic(1) の詳細については、
{\dg\bf \ref{4かな漢字変換ユーティリティ}
\hpref{count=13,label=H0.6.0.0.0}かな漢字変換ユーティリティ} 
を参照してください。
\end{itemize}

\item {\dg\bf 部首変換が行えない}

\begin{itemize}

\item {\dg\bf 部首辞書を指定していますか？}

部首変換が行えないのは部首変換辞書が指定されていないのが原因であると思
われます。初期化(カスタマイズ)ファイルでキーワード :bushudic で部首辞
書が指定されているかどうか確認してください。
\end{itemize}

\item {\dg\bf 逐次自動変換できない。(連文節変換になってしまう)}

ユーティリティ機能の変換方式で、逐次自動変換に切り替えてください。それでも、逐次自動変換にならない場合は以下を参考にしてください。

\begin{itemize}

\item {\dg\bf カスタマイズで(setq auto nil)になっていませんか？}

カスタマイズファイルを書き換えて、クライアントを起動し直してください。

\item {\dg\bf 古いサーバに接続していませんか？}

古いかな漢字変換サーバ(irohaserver)では逐次変換はできません。
\end{itemize}

\item {\dg\bf 個人別学習ができない。}

\begin{itemize}
\item {\dg\bf バイナリ辞書を更新したときにmkdicを行いましたか? }

OSのバージョンアップなどを行ってバイナリ辞書が更新されたときには
個人別学習も更新する必要があります。

したがって、それまで個人別学習を行っていた場合、OSのバージョンアップ後に
個人別学習ファイルをmkdicコマンドによって作成し直さなかった場合には、
学習が行われません。

\item {\dg\bf 個人別学習ファイルがありますか？}

mkdicにて個人別学習ファイルを作成してください。

\item {\dg\bf 個人別学習ファイルに書き込み権がありますか？}

個人別学習ファイルにかな漢字変換サーバの書き込み権を開放してください。

\item {\dg\bf 古いサーバに接続していませんか？}

古いかな漢字変換サーバ(irohaserver)では個人別学習はできません。
\end{itemize}

\item {\dg\bf キーの入力ができない}

\begin{itemize}

\item {\dg\bf マルチシーケンスで割り当ててあるキーを押しませんでしたか？}

マルチシーケンスで割り当ててある(カスタマイズしている)キーを押してしまうとキーシーケンス入力状態になってしまいます。誤ってこのような状態になってしまったときは、quit(取りやめ)を割りあててあるキーを押してください。そうすれば、キーシーケンス入力状態から抜け出て一般のキー入力ができるようになります。デフォルトではquitは \CTRL + \fbox{g}となっています。
\end{itemize}

\item {\dg\bf ローマ字かな変換の"ん"の変換が今までとちがう}

『かんな』Version 2.1 からローマ字かな変換辞書の"ん"の変換するルールが
変更になりました。従来の変換どおりにしたい場合は、使用しているローマ字
かな変換テーブルを変更してください。

デフォルトのローマ字かな変換辞書を使用している場合は、デフォルトのロー
マ字かな変換テーブルのテキスト形式のもの "\refCANNALIBDIR
/sample/src/default.kpdef" を変更して、バイナリに変換したものを使用し
てください。

詳細は、 {\dg\bf \ref{3.3.3ローマ字かな変換テーブルの設定}
\hpref{count=15,label=H0.4.3.0.0}ローマ字かな変換テーブルの設定}、
{\dg\bf \ref{3.3.4ローマ字かな変換テーブルのカスタマイズ}
\hpref{count=19,label=H0.4.4.0.0}ローマ字かな変換テーブルのカスタマイ
ズ}を参照してください。
\end{enumerate}


\section{カスタマイズに伴う症状}
\label{3.5.4カスタマイズに伴う症状}

\begin{enumerate}
\item {\dg\bf カスタマイズファイルに書いたことに効果がない}

\begin{itemize}

\item {\dg\bf エディットしているカスタマイズファイルが実際に用いられるカスタマイズファイルと同じですか？}

どのカスタマイズファイルが使われるかはcannacheckコマンド$-$vオプションを用いて調べてください。

\begin{nquote}{1em}
\begin{verbatim}
% cannacheck -v
カスタマイズファイルとして"/uhome/user/.canna"を用います。
……
\end{verbatim}
\end{nquote}

ここで表示されるファイルとエディットしているファイルが同じものであるかどうか調べてください。

\item {\dg\bf バージョンの違うカスタマイズファイルを使用していませんか？}

カスタマイズファイルは『かんな』Version 1.2までは .irohaというファイル
でしたが、『かんな』Version 2.1からは、.cannaというファイルに変更にな
りました。

使用している日本語入力システムのバージョンに応じたカスタマイズファイル
を使用してください。

\item {\dg\bf カスタマイズで設定した項目がカスタマイズファイルの後ろの方で打ち消されていませんか？}

カスタマイズの効果が表れない別の原因としてカスタマイズファイルの後ろの
方で設定を打ち消している場合があります。たとえば以下の記述を見てください。

\begin{verbatim}
(set-key 'yomi-mode "\C-1" henkan)
　・・・・
(global-set-key "\C-1" forward)
\end{verbatim}

このような場合、読み入力モードで設定したC$-$1が後ろの方の設定で打ち消
されてしまい結局C$-$1は読み入力モードでも右移動キーとして使われること
になります。

すべてのモードに影響するキーのカスタマイズは最初の方に記述し、特定のモー
ドに限定したキーのカスタマイズは後ろの方に記述するのが良いでしょう。

\item {\dg\bf カスタマイズで設定したキーがアプリケーションなどで用いられていませんか？}

最後にアプリケーションによりキーが奪われてしまう例を示します。

たとえばカスタマイズファイルに次のような記述を入れたとします。

\begin{nquote}{1em}
\begin{verbatim}
(global-set-key "\C-s" next)
(global-set-key "\C-q" previous)
\end{verbatim}
\end{nquote}

これをcannadで使おうとしてもTTYドライバが先にC$-$s、C$-$qをXON/XOFFの
ための文字と解釈し使ってしまうためcannad内部のかな漢字変換部分にまでこ
れらのキーが伝わりません。

他の例では、アプリケーションによって \HELP キーや \INS キーに特別の処理を割り当てている場合にもかな漢字変換ではこれらのキーが使われないことになりますので注意してください。
\end{itemize}

\item {\dg\bf ローマ字かな変換辞書の効果がない}

\begin{itemize}

\item {\dg\bf ローマ字かな変換辞書はバイナリ形式で与えていますか？}

ローマ字かな変換テーブルをエディットした後でmkromdic(1)によりローマ字
かな変換テーブルをバイナリ形式に変換していますか？ローマ字かな変換辞書
はバイナリ形式のもののみ有効ですので注意してください。

\item {\dg\bf エディットしている辞書と実際に使われる辞書が同じですか？}

エディットしているローマ字かな変換辞書と実際に使われるローマ字かな変換
辞書が一致していない場合が考えられます。cannacheck $-$vによりどのロー
マ字かな変換辞書が使われるかを確認してください。

使用している日本語入力システムが『かんな』Version 1.2以前の場合は、旧
形式のローマ字かな変換辞書しか使用できません。
\end{itemize}

\item {\dg\bf ユーザ辞書がマウントできない}

\begin{itemize}

\item {\dg\bf ユーザ辞書ディレクトリが存在しますか？}


ユーザ辞書は接続しているサーバが動作しているホストのユーザ辞書ディレ
クトリに存在しなければなりません。
次のことをチェックしてください。


\begin{enumerate}

\item cannacheck $-$vにて、自分がどのホストで動いているサーバを使って
いるのかをチェックしてください。

\item cannastat にて、自分が接続しているサーバのバージョンをチェックし
てください。

\item そのホストにユーザ辞書ディレクトリが存在することを確認してください。
ユーザ辞書ディレクトリは、『かんな』 
Version 3.2 より前のバージョンでは、 "\refCANNALIBDIR/dic/ユーザ名" で
すが、 Version 3.2 からは "\refCANNALIBDIR/\\dic/user/ユーザ名" になって
います。

\item ユーザ辞書ディレクトリ配下の dics.dir に指定した辞書名が記述されていますか？

\end{enumerate}

\end{itemize}


\item {\dg\bf グループ辞書がマウントできない}

\begin{itemize}

\item {\dg\bf 『かんな』のバージョンが 3.2 以上ですか？}

グループ辞書は、『かんな』の Version 3.2 から使用できます。サーバ・ク
ライアントともに『かんな』の Version 3.2 以上でなければなりません。

\howversion

\item {\dg\bf グループ辞書ディレクトリが存在しますか？}


グループ辞書は接続しているサーバが動作しているホストのグループ辞書ディレ
クトリに存在しなければなりません。
次のことをチェックしてください。


\begin{enumerate}

\item cannacheck $-$vにて、自分がどのホストで動いているサーバを使って
いるのかをチェックしてください。

\item そのホストにグループ辞書ディレクトリが存在することを確認してください。
グループ辞書ディレクトリは、"\refCANNALIBDIR/dic/group/グループ名" になって
います。

\item グループ辞書ディレクトリ配下の dics.dir に指定した辞書名が記述されていますか？

\end{enumerate}

\end{itemize}

\end{enumerate}

\newpage
\section{システム管理関係の症状}
\label{3.5.5システム管理関係の症状}

\begin{enumerate}

\item {\hptar{label=H0.8.5.0.0.1}\dg\bf cannaserver が起動できない}

\begin{itemize}

\item {\dg\bf 他の cannaserver が動いていませんか？}

cannaserver は\HIDX{ロックファイル}{ろつくふあいる}{H0.8.5.0.0}を作成します。すでに 
cannaserver が起動している場合にはロックファイルを作成できませんので 
cannaserver を新たに起動することはできません。

\item {\dg\bf ロックファイルがありませんか？}

なんらかの障害によりcannaserverがロックファイルを残したまま停止して
しまった場合は、ロックファイル
(\refCANNALOCKDIR /.CANNALOCK) を削除してから cannaserver
を再起動してください。

ロックファイルの名前が"."で始まっていますのでlsコマンドで参照するときは、
$-$aオプションを指定してください。

\item {\dg\bf ロックファイル作成ディレクトリに書き込み権がありますか？}

\refCANNALOCKDIR のパスに含まれるルートディレクトリ以下の
すべてのディレクトリについて、binのアカウントが
書き込み権を持っているかを確認してください。

ロックファイルがなくても、ディレクトリへの書き込み権がなければ
ロックファイルを作成できないために、かな漢字変換サーバを起動するこ
とはできません。

\refCANNALOCKDIR のパスに含まれるルートディレクトリ以下の
いずれかのディレクトリに対して、binのアカウントの書き込み権が
ない場合には、書き込み権を設定してください。

\item {\dg\bf cannaserverとロックファイルに正当なオーナ、グループ、パーミッションが与えてありますか？}

cannaserver、ロックファイル(\refCANNALOCKDIR /.CANNALOCK)ともにオーナ、
グループは{\dg\bf bin}です。

cannaserverのパーミッションは\verb|-r-sr-sr-x|でなくてはいけません。シ
ンボリックリンクされている場合は実態を調べてください。

ロックファイルは\verb|-rw-r--r--|というパーミッションであるべきです。

なお、それぞれのディレクトリのパーミッションも不正の場合、うまく動作し
ないことがあります。

\end{itemize}

\end{enumerate}
