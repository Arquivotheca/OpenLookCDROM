/*
 *	Copyright (c) 1990 by Columbia University.
 */

#include <stdio.h>

#include "ice_defines.h"

char *progname;
char *xdisplay;
char *newsdisplay;
char *ice_filenm;
char *initpsd_filenm;
boolean init_complete;
int verbose;
int pg_pixwidth, pg_pixheight, pg_pixdepth;
double pg_width, pg_height;
int pg_dpi;
int pg_update;
boolean pg_forceupdate;
int pg_units;
double pg_hsi, pg_vsi;
double pg_xri, pg_yri;
double pg_xru, pg_yru;
int pg_loc;
int pg_locdisplay;
Path *pg_clip;
int pg_originhlt;
int pg_bg;
unsigned char pg_rbg, pg_gbg, pg_bbg;

char *gdf_fontname;
float gdf_fontsize;
float gdf_fontlead;
float gdf_linewidth;
int gdf_fg;
unsigned char gdf_rfg, gdf_gfg, gdf_bfg;
int gdf_bg;
unsigned char gdf_rbg, gdf_gbg, gdf_bbg;
int gdf_mrktype;
float gdf_mrksize;
float gdf_bndwidth;
int gdf_bnd;
unsigned char gdf_rbnd, gdf_gbnd, gdf_bbnd;
int gdf_fill;
unsigned char gdf_rfill, gdf_gfill, gdf_bfill;
int gdf_dtk;
unsigned char gdf_rdtk, gdf_gdtk, gdf_bdtk;

int ins_newobj;

Display *dpy;
int screen;
Window root_win;
Visual *visual;
Colormap def_cmap, cmap, curr_cmap;
XColor def_colors[PSEUDOCOLOR_MAPSZ];
XFontStruct *font;
Atom wmpr_atom, wmsy_atom, wmdw_atom;
char fontnm[MAX_FILENMLEN+1];
char geometry[MAX_GEOMLEN+1];
int fontht, charwd;
unsigned long fg_pixel, bg_pixel, bdr_pixel;
unsigned long black_pixel, white_pixel;
unsigned int border_wd;
PSFontFamily *psfontfamilies;
int npsfonts, npsfontfamilies;
Panel_item *gdf_psff, *text_psff, *axis_psff;

int pg_frameleft, pg_frametop;
unsigned int pg_framewidth, pg_frameheight;
Window pg_frame;
Canvas *pg_canvas;
Window pg_cwin;
Pixmap pg_cpm;
GC pg_gc, pg_ogc, pg_igc, pg_xgc, pg_cgc;
unsigned long pg_bgpixel;
GC pg_bggc;
Cursor std_cursor, hg_cursor;

Menu *pg_menu;
Menu *ins_menu;
Menu *del_menu;
Menu *delpsd_menu, *delras_menu, *deltext_menu;
Menu *delvec_menu, *delcrv_menu, *delmrk_menu;
Menu *delrect_menu, *delpoly_menu, *delaxis_menu;
Menu *delcmp_menu, *delpth_menu;
Menu *attr_menu;
Menu *attrpsd_menu, *attrras_menu, *attrtext_menu;
Menu *attrvec_menu, *attrcrv_menu, *attrmrk_menu;
Menu *attrrect_menu, *attrpoly_menu, *attraxis_menu;
Menu *attrpth_menu;
Menu *tr_menu;
Menu *trpsd_menu, *trras_menu, *trtext_menu;
Menu *trvec_menu, *trcrv_menu, *trmrk_menu;
Menu *trrect_menu, *trpoly_menu, *traxis_menu;
Menu *trcmp_menu, *trpth_menu;
Menu *cp_menu;
Menu *cppsd_menu, *cpras_menu, *cptext_menu;
Menu *cpvec_menu, *cpcrv_menu, *cpmrk_menu;
Menu *cprect_menu, *cppoly_menu, *cpaxis_menu;
Menu *cpcmp_menu;
Menu *cmp_menu;
Menu *cmpattr_menu, *cmpubd_menu, *cmpadd_menu, *cmprm_menu;
Menu *cmpop_menu;
Menu *cmpoppsd_menu, *cmpopras_menu, *cmpoptext_menu;
Menu *cmpopvec_menu, *cmpopcrv_menu, *cmpopmrk_menu;
Menu *cmpoprect_menu, *cmpoppoly_menu, *cmpopaxis_menu;
Menu *cmpopcmp_menu;
Menu *cmap_menu;
Menu *dmp_menu, *dmpall_menu;
Menu *dmppsd_menu, *dmpras_menu, *dmptext_menu;
Menu *dmpvec_menu, *dmpcrv_menu, *dmpmrk_menu;
Menu *dmprect_menu, *dmppoly_menu, *dmpaxis_menu;
Menu *dmpcmp_menu, *dmppth_menu;

Window pgattr_frame;
Panel *pgattr_panel;
Panel_item *pgattr_w, *pgattr_h, *pgattr_dpi;
Panel_item *pgattr_update;
Panel_item *pgattr_loc;
Panel_item *pgattr_locdisplay;
Panel_item *pgattr_units;
Panel_item *pgattr_hsi, *pgattr_vsi;
Panel_item *pgattr_xri, *pgattr_yri;
Panel_item *pgattr_xru, *pgattr_yru;
Panel_item *pgattr_clip;
Panel_item *pgattr_originhlt;
Panel_item *pgattr_bg;
Panel_item *pgattr_rbg, *pgattr_gbg, *pgattr_bbg;
Panel_item *pgattr_cont, *pgattr_abort;

Window gdfattr_frame;
Panel *gdfattr_panel;
Panel_item *gdfattr_fontfamily;
Panel_item *gdfattr_fontsize;
Panel_item *gdfattr_fontlead;
Panel_item *gdfattr_linewidth;
Panel_item *gdfattr_fg;
Panel_item *gdfattr_rfg, *gdfattr_gfg, *gdfattr_bfg;
Panel_item *gdfattr_bg;
Panel_item *gdfattr_rbg, *gdfattr_gbg, *gdfattr_bbg;
Panel_item *gdfattr_mrktype;
Panel_item *gdfattr_mrksize;
Panel_item *gdfattr_bndwidth;
Panel_item *gdfattr_bnd;
Panel_item *gdfattr_rbnd, *gdfattr_gbnd, *gdfattr_bbnd;
Panel_item *gdfattr_fill;
Panel_item *gdfattr_rfill, *gdfattr_gfill, *gdfattr_bfill;
Panel_item *gdfattr_dtk;
Panel_item *gdfattr_rdtk, *gdfattr_gdtk, *gdfattr_bdtk;
Panel_item *gdfattr_cont, *gdfattr_abort;

Window insattr_frame;
Panel *insattr_panel;
Panel_item *insattr_newobj;
Panel_item *insattr_cont, *insattr_abort;

Window psdattr_frame;
Panel *psdattr_panel;
Panel_item *psdattr_fname;
Panel_item *psdattr_hscale, *psdattr_vscale;
Panel_item *psdattr_rot;
Panel_item *psdattr_clip;
Panel_item *psdattr_dtk;
Panel_item *psdattr_rdtk, *psdattr_gdtk, *psdattr_bdtk;
Panel_item *psdattr_seq;
Panel_item *psdattr_cont, *psdattr_abort;

Window rasattr_frame;
Panel *rasattr_panel;
Panel_item *rasattr_fname;
Panel_item *rasattr_pixrep;
Panel_item *rasattr_orig;
Panel_item *rasattr_draw;
Panel_item *rasattr_seq;
Panel_item *rasattr_fg, *rasattr_bg;
Panel_item *rasattr_rfg, *rasattr_gfg, *rasattr_bfg;
Panel_item *rasattr_rbg, *rasattr_gbg, *rasattr_bbg;
Panel_item *rasattr_cont, *rasattr_abort;

Window textattr_frame;
Panel *textattr_panel;
Panel_item *textattr_name;
Panel_item *textattr_src;
Panel_item *textattr_text;
Panel_item *textattr_filenm;
Panel_item *textattr_font;
Panel_item *textattr_fontfamily;
Panel_item *textattr_fontsz;
Panel_item *textattr_size;
Panel_item *textattr_lead;
Panel_item *textattr_just;
Panel_item *textattr_path;
Panel_item *textattr_pathoffset, *textattr_letterspace;
Panel_item *textattr_fg;
Panel_item *textattr_rfg, *textattr_gfg, *textattr_bfg;
Panel_item *textattr_bgmode;
Panel_item *textattr_bg;
Panel_item *textattr_rbg, *textattr_gbg, *textattr_bbg;
Panel_item *textattr_hscale, *textattr_vscale;
Panel_item *textattr_rot;
Panel_item *textattr_clip;
Panel_item *textattr_dtk;
Panel_item *textattr_rdtk, *textattr_gdtk, *textattr_bdtk;
Panel_item *textattr_seq;
Panel_item *textattr_cont, *textattr_abort;

Window vecattr_frame;
Panel *vecattr_panel;
Panel_item *vecattr_name;
Panel_item *vecattr_linewd;
Panel_item *vecattr_lwidth;
Panel_item *vecattr_linestyle;
Panel_item *vecattr_dashstyle;
Panel_item *vecattr_dashlen, *vecattr_dashgaplen;
Panel_item *vecattr_dashpattern, *vecattr_dashoffset;
Panel_item *vecattr_capstyle;
Panel_item *vecattr_ptr, *vecattr_ptrstyle;
Panel_item *vecattr_ptrwd, *vecattr_ptrolen, *vecattr_ptrilen;
Panel_item *vecattr_fg;
Panel_item *vecattr_rfg, *vecattr_gfg, *vecattr_bfg;
Panel_item *vecattr_clip;
Panel_item *vecattr_dtk;
Panel_item *vecattr_rdtk, *vecattr_gdtk, *vecattr_bdtk;
Panel_item *vecattr_seq;
Panel_item *vecattr_mvloc1, *vecattr_mvloc2;
Panel_item *vecattr_cont, *vecattr_abort;

Window crvattr_frame;
Panel *crvattr_panel;
Panel_item *crvattr_name;
Panel_item *crvattr_linewd;
Panel_item *crvattr_lwidth;
Panel_item *crvattr_linestyle;
Panel_item *crvattr_dashstyle;
Panel_item *crvattr_dashlen, *crvattr_dashgaplen;
Panel_item *crvattr_dashpattern, *crvattr_dashoffset;
Panel_item *crvattr_capstyle;
Panel_item *crvattr_fg;
Panel_item *crvattr_rfg, *crvattr_gfg, *crvattr_bfg;
Panel_item *crvattr_clip;
Panel_item *crvattr_dtk;
Panel_item *crvattr_rdtk, *crvattr_gdtk, *crvattr_bdtk;
Panel_item *crvattr_seq;
Panel_item *crvattr_mvloc1, *crvattr_mvloc2;
Panel_item *crvattr_mvcnt1, *crvattr_mvcnt2;
Panel_item *crvattr_cont, *crvattr_abort;

Window mrkattr_frame;
Panel *mrkattr_panel;
Panel_item *mrkattr_name;
Panel_item *mrkattr_type;
Panel_item *mrkattr_size;
Panel_item *mrkattr_radius;
Panel_item *mrkattr_bndmode;
Panel_item *mrkattr_bndwd;
Panel_item *mrkattr_bwidth;
Panel_item *mrkattr_bndcolor;
Panel_item *mrkattr_rbnd, *mrkattr_gbnd, *mrkattr_bbnd;
Panel_item *mrkattr_fillmode;
Panel_item *mrkattr_fillcolor;
Panel_item *mrkattr_rfill, *mrkattr_gfill, *mrkattr_bfill;
Panel_item *mrkattr_hscale, *mrkattr_vscale;
Panel_item *mrkattr_rot;
Panel_item *mrkattr_clip;
Panel_item *mrkattr_dtk;
Panel_item *mrkattr_rdtk, *mrkattr_gdtk, *mrkattr_bdtk;
Panel_item *mrkattr_seq;
Panel_item *mrkattr_cont, *mrkattr_abort;

Window rectattr_frame;
Panel *rectattr_panel;
Panel_item *rectattr_name;
Panel_item *rectattr_bndmode;
Panel_item *rectattr_bndwd;
Panel_item *rectattr_bwidth;
Panel_item *rectattr_linestyle;
Panel_item *rectattr_dashstyle;
Panel_item *rectattr_dashlen, *rectattr_dashgaplen;
Panel_item *rectattr_dashpattern, *rectattr_dashoffset;
Panel_item *rectattr_bndcolor;
Panel_item *rectattr_rbnd, *rectattr_gbnd, *rectattr_bbnd;
Panel_item *rectattr_fillmode;
Panel_item *rectattr_fillcolor;
Panel_item *rectattr_rfill, *rectattr_gfill, *rectattr_bfill;
Panel_item *rectattr_dimmode;
Panel_item *rectattr_width, *rectattr_height;
Panel_item *rectattr_rot;
Panel_item *rectattr_clip;
Panel_item *rectattr_dtk;
Panel_item *rectattr_rdtk, *rectattr_gdtk, *rectattr_bdtk;
Panel_item *rectattr_seq;
Panel_item *rectattr_cont, *rectattr_abort;

Window polyattr_frame;
Panel *polyattr_panel;
Panel_item *polyattr_name;
Panel_item *polyattr_closure;
Panel_item *polyattr_bndmode;
Panel_item *polyattr_bndwd;
Panel_item *polyattr_bwidth;
Panel_item *polyattr_bndcolor;
Panel_item *polyattr_rbnd, *polyattr_gbnd, *polyattr_bbnd;
Panel_item *polyattr_fillmode;
Panel_item *polyattr_fillcolor;
Panel_item *polyattr_rfill, *polyattr_gfill, *polyattr_bfill;
Panel_item *polyattr_hscale, *polyattr_vscale;
Panel_item *polyattr_rot;
Panel_item *polyattr_clip;
Panel_item *polyattr_dtk;
Panel_item *polyattr_rdtk, *polyattr_gdtk, *polyattr_bdtk;
Panel_item *polyattr_seq;
Panel_item *polyattr_cont, *polyattr_abort;

Window axisattr_frame;
Panel *axisattr_panel;
Panel_item *axisattr_name;
Panel_item *axisattr_orig;
Panel_item *axisattr_term;
Panel_item *axisattr_linlog;
Panel_item *axisattr_div;
Panel_item *axisattr_axiswd;
Panel_item *axisattr_axiswidth;
Panel_item *axisattr_tickloc;
Panel_item *axisattr_ptickht;
Panel_item *axisattr_stickht;
Panel_item *axisattr_ttickht;
Panel_item *axisattr_tickwd;
Panel_item *axisattr_tickwidth;
Panel_item *axisattr_lin;
Panel_item *axisattr_rlin, *axisattr_glin, *axisattr_blin;
Panel_item *axisattr_fontloc;
Panel_item *axisattr_font;
Panel_item *axisattr_fontfamily;
Panel_item *axisattr_fontsz;
Panel_item *axisattr_fontsize;
Panel_item *axisattr_fontorient;
Panel_item *axisattr_fontoff;
Panel_item *axisattr_lab;
Panel_item *axisattr_rlab, *axisattr_glab, *axisattr_blab;
Panel_item *axisattr_clip;
Panel_item *axisattr_dtk;
Panel_item *axisattr_rdtk, *axisattr_gdtk, *axisattr_bdtk;
Panel_item *axisattr_seq;
Panel_item *axisattr_mvloc1, *axisattr_mvloc2;
Panel_item *axisattr_cont, *axisattr_abort;

Window cmpattr_frame;
Panel *cmpattr_panel;
Panel_item *cmpattr_name;
Panel_item *cmpattr_scale, *cmpattr_scaleattr;
Panel_item *cmpattr_rot;
Panel_item *cmpattr_cont, *cmpattr_abort;

Window pthattr_frame;
Panel *pthattr_panel;
Panel_item *pthattr_name;
Panel_item *pthattr_src, *pthattr_filenm;
Panel_item *pthattr_closure;
Panel_item *pthattr_vis;
Panel_item *pthattr_fg;
Panel_item *pthattr_rfg, *pthattr_gfg, *pthattr_bfg;
Panel_item *pthattr_cont, *pthattr_abort;

Window locattr_frame;
Panel *locattr_panel;
Panel_item *locattr_lab;
Panel_item *locattr_x, *locattr_y;
Panel_item *locattr_cont, *locattr_abort;

Window dmpips_frame;
Panel *dmpips_panel;
Panel_item *dmpips_filenm;
Panel_item *dmpips_mode;
Panel_item *dmpips_ras;
Panel_item *dmpips_cont, *dmpips_abort;

Window insice_frame;
Panel *insice_panel;
Panel_item *insice_filenm;
Panel_item *insice_pg;
Panel_item *insice_gdf;
Panel_item *insice_currobj, *insice_newobj;
Panel_item *insice_cont, *insice_abort;

int ice_op;

Grobj *grobjs;
int npsdocs, nrasters, ntexts;
int nvectors, ncurves, nmarkers;
int nrectangles, npolygons, naxes;
int unnamed_texts, unnamed_vectors, unnamed_curves, unnamed_markers;
int unnamed_rectangles, unnamed_polygons, unnamed_axes;

Composite *cmpobjs;

Pathdir *pathdirs;

Path *paths;
int npaths;
